<!DOCTYPE html>
<html lang="zh-cn">
  <head><meta name="generator" content="Hexo 3.8.0">
    
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">


<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">

<meta name="theme-color" content="#f8f5ec">
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">



  <meta name="description" content="Java 基础知识">




  <meta name="keywords" content="java, Tanjunze笔记">










  <link rel="alternate" href="/atom.xml" title="Tanjunze笔记">




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=2.10.2">



<link rel="canonical" href="https://tanjunze.github.io/2018/12/10/Java基础知识/">



  <link rel="stylesheet" type="text/css" href="/lib/fancybox/jquery.fancybox.css">




  <link rel="stylesheet" type="text/css" href="/lib/nprogress/nprogress.min.css">



<link rel="stylesheet" type="text/css" href="/css/style.css?v=2.10.2">



  



  <script id="baidu_push">
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>









<script>
  window.config = {"leancloud":{"app_id":null,"app_key":null},"toc":true,"fancybox":true,"pjax":true};
</script>

    <title> Java 基础知识 - Tanjunze笔记 </title>
  </head>

  <body><div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/." class="logo">Tanjunze笔记</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>

<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    
      <a href="/">
        <li class="mobile-menu-item">
          
          
            首页
          
        </li>
      </a>
    
      <a href="/tags">
        <li class="mobile-menu-item">
          
          
            标签
          
        </li>
      </a>
    
      <a href="/categories">
        <li class="mobile-menu-item">
          
          
            分类
          
        </li>
      </a>
    
      <a href="/about">
        <li class="mobile-menu-item">
          
          
            关于
          
        </li>
      </a>
    
  </ul>
</nav>

    <div class="container" id="mobile-panel">
      <header id="header" class="header"><div class="logo-wrapper">
  <a href="/." class="logo">Tanjunze笔记</a>
</div>

<nav class="site-navbar">
  
    <ul id="menu" class="menu">
      
        <li class="menu-item">
          <a class="menu-item-link" href="/">
            
            
              首页
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/tags">
            
            
              标签
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/categories">
            
            
              分类
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/about">
            
            
              关于
            
          </a>
        </li>
      
    </ul>
  
</nav>

      </header>

      <main id="main" class="main">
        <div class="content-wrapper">
          <div id="content" class="content">
            
  
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          Java 基础知识
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2018-12-09
        </span>
        
          <span class="post-category">
            
              <a href="/categories/java/">java</a>
            
          </span>
        
        
      </div>
    </header>

    
    
  <div class="post-toc" id="post-toc">
    <h2 class="post-toc-title">文章目录</h2>
    <div class="post-toc-content">
      <ol class="toc"><li class="toc-item toc-level-4"><a class="toc-link" href="#Java-三大特性"><span class="toc-text">Java 三大特性</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1、封装"><span class="toc-text">1、封装</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2、继承"><span class="toc-text">2、继承</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3、多态"><span class="toc-text">3、多态</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#抽象类和接口"><span class="toc-text">抽象类和接口</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#抽象类"><span class="toc-text">抽象类</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#String-、StringBuffer-、StringBuider"><span class="toc-text">String 、StringBuffer 、StringBuider</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#反射"><span class="toc-text">反射</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#注解"><span class="toc-text">注解</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#依赖注入"><span class="toc-text">依赖注入</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Java代理"><span class="toc-text">Java代理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#浅拷贝与深拷贝"><span class="toc-text">浅拷贝与深拷贝</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#常见问题"><span class="toc-text">常见问题</span></a></li></ol>
    </div>
  </div>



    <div class="post-content">
      
        <h4 id="Java-三大特性"><a href="#Java-三大特性" class="headerlink" title="Java 三大特性"></a>Java 三大特性</h4><h5 id="1、封装"><a href="#1、封装" class="headerlink" title="1、封装"></a>1、封装</h5><p><strong>定义：</strong>将类的某些信息隐藏在类内部，不允许外部程序直接访问，而是通过该类提供的方法来实现对隐藏信息的操作和访问。</p>
<p><strong>好处:</strong></p>
<ul>
<li>减少耦合</li>
<li>类内部的结构可以自由修改</li>
<li>可以对成员变量进行精准控制</li>
<li>隐藏信息，实现细节</li>
</ul>
<p><strong>权限修饰符</strong></p>
<table>
<thead>
<tr>
<th>修饰符</th>
<th>同一类</th>
<th>同一包</th>
<th>不同包的子类</th>
<th>不同包的非子类</th>
</tr>
</thead>
<tbody>
<tr>
<td>private</td>
<td>√</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>default</td>
<td>√</td>
<td>√</td>
<td></td>
<td></td>
</tr>
<tr>
<td>protected</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td></td>
</tr>
<tr>
<td>public</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>√</td>
</tr>
</tbody>
</table>
<h5 id="2、继承"><a href="#2、继承" class="headerlink" title="2、继承"></a>2、继承</h5><p><strong>定义：</strong> 子类继承父类的特征和行为。在java中使用<code>extends</code>实现继承父类</p>
<p><strong>好处：</strong></p>
<ul>
<li>实现代码的复用</li>
</ul>
<p><strong>分类：</strong></p>
<ul>
<li><p>单继承</p>
<p>子类只有一个父类的关系称为单继承。在java中使用<code>extends</code>实现</p>
</li>
<li><p>多继承</p>
<p>子类有多个父类的关系称为多继承。java 中不支持多继承，但可以使用<code>implements</code>实现多继承。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sleep</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">B</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">C</span> <span class="keyword">implements</span> <span class="title">A</span>,<span class="title">B</span> </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h5 id="3、多态"><a href="#3、多态" class="headerlink" title="3、多态"></a>3、多态</h5><p><strong>定义：</strong>多态是同一个行为具有多个不同表现形式或形态的能力</p>
<p><strong>好处：</strong></p>
<ul>
<li>类型间的解耦</li>
<li>扩展性和维护性</li>
</ul>
<p><strong>多态的必要条件：</strong></p>
<ul>
<li>继承</li>
<li>重写（重新定义父类方法）</li>
<li>向上转型（父类引用指向子类对象）</li>
</ul>
<p><strong>多态的实现：</strong></p>
<ul>
<li><p>基于继承实现</p>
<p>子类重写父类方法，使多个子类对同一方法的重写可以表现不同的行为。</p>
</li>
<li><p>基于接口实现</p>
<p>通过实现接口并覆盖接口中的方法，同一接口下的子类方法具有不同的行为。</p>
</li>
</ul>
<h4 id="抽象类和接口"><a href="#抽象类和接口" class="headerlink" title="抽象类和接口"></a>抽象类和接口</h4><h5 id="抽象类"><a href="#抽象类" class="headerlink" title="抽象类"></a>抽象类</h5><p><strong>定义：</strong>使用<code>abstract</code>修饰的类。</p>
<p><strong>特点：</strong></p>
<ul>
<li>抽象类不能直接实例化。</li>
<li>抽象类中不一定包含抽象方法，但是有抽象方法的类必定是抽象类。</li>
<li>抽象方法只是声明，不能实现，必须在子类中实现</li>
</ul>
<p>#####接口 </p>
<p><strong>定义：</strong>使用<code>interface</code>修饰的类</p>
<p><strong>特点：</strong>：</p>
<ul>
<li>接口是隐式抽象的，不必使用<code>abstract</code>关键字。</li>
<li>接口中每一个方法也是隐式抽象的。且是public</li>
<li>接口中的方法都是public。</li>
<li>接口允许继承和<strong>多继承</strong>。</li>
<li>一个类可以实现多个接口</li>
<li>接口中的变量会被隐式的指定为 <strong>public static final</strong> 变量</li>
</ul>
<p><strong>实现：</strong> 使用<code>implements</code>实现接口，可以继承接口，也一个多继承。</p>
<h4 id="String-、StringBuffer-、StringBuider"><a href="#String-、StringBuffer-、StringBuider" class="headerlink" title="String 、StringBuffer 、StringBuider"></a>String 、StringBuffer 、StringBuider</h4><p><strong>String：</strong>  是由final修饰的char数组构成的字符串常量，只能赋值一次，字符串长度不可变。String 使用‘+’号拼接时jvm会隐式的转换成StringBuilder拼接字符串。在单行用加号拼接字符串是没有性能损失的，有循环的情况下，仍然会有不必要的性能损耗 。</p>
<p>String不可变对象的理解。String 在赋值，替换等操作会创建新String对象，原对象没有改变，依然在内存中。指向原对象的引用在赋值，替换等操作后指向创建的新String对象。</p>
<p><strong>StringBuffer：</strong>线程安全的可变字符串。</p>
<p><strong>StringBuilder：</strong>非线程安全的可变字符串。</p>
<h4 id="反射"><a href="#反射" class="headerlink" title="反射"></a>反射</h4><p><strong>定义：</strong>Java中允许<strong>运行时</strong>操作类或者获取对象内部属性的机制。</p>
<h4 id="注解"><a href="#注解" class="headerlink" title="注解"></a>注解</h4><p><strong>定义：</strong>Java标注，可以在代码中插入<strong>元数据</strong>的语法。在代码使用注解可以通过反射获取标注的内容。</p>
<p><strong>作用：</strong></p>
<ul>
<li>编写文档：通过代码里标识的元数据生成文档；</li>
<li>代码分析：通过代码里标识的元数据对代码进行分析；</li>
<li>编译检查：通过代码里标识的元数据让编译器能实现基本的编译检查；</li>
</ul>
<p><strong>内置注解</strong>：</p>
<ul>
<li><code>@Override</code> - 检查该方法是否是重载方法。如果发现其父类，或者是引用的接口中并没有该方法时，会报编译错误。</li>
<li><code>@Deprecated</code> - 标记过时方法。如果使用该方法，会报编译警告。</li>
<li><code>@SuppressWarnings</code> - 指示编译器去忽略注解中声明的警告。</li>
</ul>
<p><strong>注解的注解：</strong></p>
<ul>
<li><p>@Retention - 标识这个注解怎么保存，是只在代码中，还是编入class文件中，或者是在运行时可以通过反射访问。</p>
<ul>
<li>RetentionPolicy.SOURCE 注解只在源码阶段保留，在编译器进行编译时它将被丢弃忽视。</li>
<li>RetentionPolicy.CLASS 注解只被保留到编译进行的时候，它并不会被加载到 JVM 中。</li>
<li>RetentionPolicy.RUNTIME 注解可以保留到程序运行的时候，它会被加载进入到 JVM 中，所以在程序运行时可以获取到它们。</li>
</ul>
</li>
<li><p><code>@Documented</code> - 标记这些注解是否包含在用户文档中。</p>
</li>
<li><p><code>@Target</code> - 标记这个注解应该是哪种 Java 成员。</p>
<ul>
<li>ElementType.ANNOTATION_TYPE 可以给一个注解进行注解</li>
<li>ElementType.CONSTRUCTOR 可以给构造方法进行注解</li>
<li>ElementType.FIELD 可以给属性进行注解</li>
<li>ElementType.LOCAL_VARIABLE 可以给局部变量进行注解</li>
<li>ElementType.METHOD 可以给方法进行注解</li>
<li>ElementType.PACKAGE 可以给一个包进行注解</li>
<li>ElementType.PARAMETER 可以给一个方法内的参数进行注解</li>
<li>ElementType.TYPE 可以给一个类型进行注解，比如类、接口、枚举</li>
</ul>
</li>
<li><p><code>@Inherited</code> - 标记这个注解是继承于哪个注解类(默认 注解并没有继承于任何子类)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">@Inherited</span><br><span class="line">@Retention(RetentionPolicy.RUNTIME)</span><br><span class="line">@interface InheritedTest &#123;&#125;</span><br><span class="line"></span><br><span class="line">@InheritedTest</span><br><span class="line">public class Parent&#123;&#125;</span><br><span class="line"></span><br><span class="line">public class Child extends Parent &#123;&#125;</span><br></pre></td></tr></table></figure>
<p>如代码所示，Child类继承了含有InheritedTest注解的Parent类，此时Child也含有相同的注解。</p>
</li>
<li><p><code>@SafeVarargs</code> - Java 7 开始支持，忽略任何使用参数为泛型变量的方法或构造函数调用产生的警告。</p>
</li>
<li><p><code>@FunctionalInterface</code> - Java 8 开始支持，标识一个匿名函数或函数式接口。</p>
</li>
<li><p>@Repeatable Java 8 开始支持，标识某注解可以在同一个声明上使用多次。</p>
</li>
</ul>
<p><strong>自定义注解</strong></p>
<p>使用<code>@interface</code>声明注解</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1、声明Test标注</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Test &#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 2、使用注解</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">open</span><span class="params">()</span></span>&#123;&#125;</span><br></pre></td></tr></table></figure>
<p>注解中的属性</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Target</span>(ElementType.TYPE)</span><br><span class="line"><span class="meta">@Retention</span>(RetentionPolicy.RUNTIME)</span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> TestAnnotation &#123;</span><br><span class="line">	 <span class="function">String <span class="title">name</span><span class="params">()</span> <span class="keyword">default</span> "java"</span>;</span><br><span class="line">	 <span class="function"><span class="keyword">int</span> <span class="title">phone</span><span class="params">()</span> <span class="keyword">default</span> 1111111</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@TestAnnotation</span>(name=<span class="string">"tanzj"</span>,phone=<span class="number">1788888888</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//默认注解，注解内仅有一个value属性。</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Check &#123;</span><br><span class="line">	<span class="function">String <span class="title">value</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Check</span>(<span class="string">"hi"</span>)</span><br><span class="line"><span class="keyword">int</span> a;</span><br><span class="line"><span class="meta">@Check</span>(value=<span class="string">"hi"</span>)</span><br><span class="line"><span class="keyword">int</span> a;</span><br></pre></td></tr></table></figure>
<p>注解的提取</p>
<p>注解是的提取是使用反射获取的。</p>
<ol>
<li>通过 Class 对象的<strong>isAnnotationPresent() </strong>方法判断它是否应用了某个注解</li>
<li>通过<strong>getAnnotation() </strong>或 <strong>getAnnotations()</strong>方法来获取 Annotation 对象</li>
<li></li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@TestAnnotation</span>()</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		<span class="comment">//1.</span></span><br><span class="line">		<span class="keyword">boolean</span> hasAnnotation = Test.class.isAnnotationPresent(TestAnnotation.class);</span><br><span class="line">		<span class="keyword">if</span> ( hasAnnotation ) &#123;</span><br><span class="line">        <span class="comment">//2.</span></span><br><span class="line">			TestAnnotation testAnnotation = Test.class.getAnnotation(TestAnnotation.class);		System.out.println(<span class="string">"name:"</span>+testAnnotation.name());      System.out.println(<span class="string">"phone:"</span>+testAnnotation.phone());</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>应用实例</strong></p>
<p>JUnit，ButterKnife，Dagger2，Retrofit等。</p>
<h4 id="依赖注入"><a href="#依赖注入" class="headerlink" title="依赖注入"></a>依赖注入</h4><p>依赖抽象，用于代码的解耦。</p>
<h4 id="Java代理"><a href="#Java代理" class="headerlink" title="Java代理"></a>Java代理</h4><p>代理是一种设计模式，为其他对象提供一个代理已控制对象的访问。主要为了解耦操作。</p>
<p><strong>静态代理</strong></p>
<p><img src="/images/javaproxy.webp" alt></p>
<p>示例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 1、代理接口</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">ISubject</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doSomething</span><span class="params">(String something)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 2、真实的委托类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RealSubject</span> <span class="keyword">implements</span> <span class="title">ISubject</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doSomething</span><span class="params">(String something)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"正在做："</span> + something);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 3、代理类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProxySubject</span> <span class="keyword">implements</span> <span class="title">ISubject</span> </span>&#123;</span><br><span class="line">    <span class="comment">//代理类持有一个委托类的对象引用</span></span><br><span class="line">    <span class="keyword">private</span> ISubject delegate;</span><br><span class="line">     <span class="function"><span class="keyword">public</span> <span class="title">ProxySubject</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> ISubject <span class="title">getISubject</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (delegate==<span class="keyword">null</span>) &#123;</span><br><span class="line">            delegate=<span class="keyword">new</span> RealSubject();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> delegate;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doSomething</span><span class="params">(String something)</span></span>&#123;</span><br><span class="line">        <span class="comment">//调用真实的委托类处理</span></span><br><span class="line">        getISubject().doSomething(something);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 4、调用委托类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client1</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        ISubject proxy =<span class="keyword">new</span> ProxySubject()</span><br><span class="line">        proxy.doSomething(<span class="string">"codeing"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>优点：</strong></p>
<p>业务类只需要关注业务逻辑本身，保证了业务类的重用性。这是代理的共有优点。</p>
<p><strong>缺点：</strong></p>
<p>1、代理对象的一个接口只服务于一种类型的对象，如果要代理的方法很多，势必要为每一种方法都进行代理，静态代理在程序规模稍大时就无法胜任了。</p>
<p>2、如果接口增加一个方法，除了所有实现类需要实现这个方法外，所有代理类也需要实现此方法。增加了代码维护的复杂度。</p>
<p><strong>动态代理</strong></p>
<p><strong>定义：</strong>在运行期间确定代理类和委托类之间的关系。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 方法 1: 该方法用于获取指定代理对象所关联的调用处理器  </span></span><br><span class="line"><span class="function"><span class="keyword">static</span> InvocationHandler <span class="title">getInvocationHandler</span><span class="params">(Object proxy)</span>   </span></span><br><span class="line"><span class="function">  </span></span><br><span class="line"><span class="function"><span class="comment">// 方法 2：该方法用于获取关联于指定类装载器和一组接口的动态代理类的类对象  </span></span></span><br><span class="line"><span class="function"><span class="keyword">static</span> Class <span class="title">getProxyClass</span><span class="params">(ClassLoader loader, Class[] interfaces)</span>   </span></span><br><span class="line"><span class="function">  </span></span><br><span class="line"><span class="function"><span class="comment">// 方法 3：该方法用于判断指定类对象是否是一个动态代理类  </span></span></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">isProxyClass</span><span class="params">(Class cl)</span>   </span></span><br><span class="line"><span class="function">  </span></span><br><span class="line"><span class="function"><span class="comment">// 方法 4：该方法用于为指定类装载器、一组接口及调用处理器生成动态代理类实例  </span></span></span><br><span class="line"><span class="function"><span class="keyword">static</span> Object <span class="title">newProxyInstance</span><span class="params">(ClassLoader loader, Class[] interfaces, InvocationHandler h)</span></span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** </span></span><br><span class="line"><span class="comment"> * 动态代理类对应的调用处理程序类 </span></span><br><span class="line"><span class="comment"> */</span>  </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SubjectInvocationHandler</span> <span class="keyword">implements</span> <span class="title">InvocationHandler</span> </span>&#123;  </span><br><span class="line">   </span><br><span class="line"> <span class="comment">//代理类持有一个委托类的对象引用  </span></span><br><span class="line"> <span class="keyword">private</span> Object delegate;  </span><br><span class="line">   </span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="title">SubjectInvocationHandler</span><span class="params">(Object delegate)</span> </span>&#123;  </span><br><span class="line">  <span class="keyword">this</span>.delegate = delegate;  </span><br><span class="line"> &#125;  </span><br><span class="line"> <span class="meta">@Override</span>  </span><br><span class="line"> <span class="function"><span class="keyword">public</span> Object <span class="title">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable </span>&#123;  </span><br><span class="line">  <span class="comment">//利用反射机制将请求分派给委托类处理。Method的invoke返回Object对象作为方法执行结果。  </span></span><br><span class="line">   Object result=method.invoke(delegate, args); </span><br><span class="line">    <span class="keyword">return</span> result;  </span><br><span class="line"> &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[]args)</span> </span>&#123;</span><br><span class="line">        ISubject delegate=<span class="keyword">new</span> RealSubject();</span><br><span class="line">        InvocationHandler handler=<span class="keyword">new</span> SubjectInvocationHandler(delegate);</span><br><span class="line">        Sales proxy=(Sales)Proxy.newProxyInstance(delegate.getClass().getClassLoader(), delegate.getClass().getInterfaces(), handler);</span><br><span class="line">        proxy.doSomething(<span class="string">"coding"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>优点：</strong></p>
<p>动态代理类在运行时有Java反射生成，更加灵活。</p>
<p><strong>缺点：</strong></p>
<p>动态代理机制只能代理实现了接口的类</p>
<h4 id="浅拷贝与深拷贝"><a href="#浅拷贝与深拷贝" class="headerlink" title="浅拷贝与深拷贝"></a>浅拷贝与深拷贝</h4><ul>
<li><p>浅拷贝</p>
<p>浅拷贝是按位拷贝对象，它会创建一个新对象，这个对象有着原始对象属性值的一份精确拷贝。如果属性是基本类型，拷贝的就是基本类型的值；如果属性是<a href="https://www.baidu.com/s?wd=%E5%86%85%E5%AD%98%E5%9C%B0%E5%9D%80&amp;tn=24004469_oem_dg&amp;rsv_dl=gh_pl_sl_csd" target="_blank" rel="noopener">内存地址</a>（引用类型），拷贝的就是内存地址 ，因此如果其中一个对象改变了这个地址，就会影响到另一个对象。</p>
</li>
<li><p>深拷贝</p>
<p>深拷贝会拷贝所有的属性,并拷贝属性指向的动态分配的内存。当对象和它所引用的对象一起拷贝时即发生深拷贝。深拷贝相比于浅拷贝速度较慢并且花销较大。</p>
</li>
</ul>
<h4 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h4><ol>
<li><p>多态的机制</p>
<p>动态绑定，即父类引用指向子类对象。</p>
</li>
<li><p>接口与类的区别</p>
<ul>
<li>接口不能示例化，类可以。</li>
<li>接口没有构造函数，类有。</li>
<li>接口中的所有方法都是抽象的。</li>
<li>接口不能被类继承只能实现。</li>
<li>接口支持多继承。</li>
</ul>
</li>
<li><p>接口与抽象类的区别</p>
<ul>
<li>抽象类中方法可以有方法的实现。接口方法不行。</li>
<li>抽象类中的成员变量可以是任意类型，接口中的成员变量只能是<strong>public static final</strong>类型的。</li>
<li>抽象类中可以有静态代码块和静态方法，接口没有。</li>
<li>一个类只能继承一个抽象类，一个类可以实现多个接口</li>
</ul>
</li>
<li><p>抽象类可以用final声明么？</p>
<p>不能，抽象类必须有子类，使用final 定义的类不能有子类。</p>
</li>
<li><p>抽象类可以用static声明么？</p>
<p>可以在内部抽象类中使用。使用static申明的内部类属于外部类。</p>
</li>
<li><p>父类的静态方法能不能被子类重写？</p>
<p>不能。</p>
</li>
<li><p>Java 中的 ==, equals 与 hashCode 的区别</p>
<ul>
<li><p>==</p>
<ol>
<li>基本数据类型时，判断<strong>值</strong>是否相等。</li>
<li>引用数据类型时，判断<strong>内存地址</strong>是否相等即是否是同一个对象。</li>
</ol>
</li>
<li><p>equals</p>
<p>判断对象是否一致</p>
</li>
<li><p>hashCode</p>
<p>表示对象的唯一性，用来快速检索对象。</p>
</li>
</ul>
</li>
</ol>
<hr>
<p>参考：</p>
<ol>
<li><a href="http://www.runoob.com/java/java-interfaces.html" target="_blank" rel="noopener">runoob</a></li>
<li><a href="https://blog.csdn.net/wei_zhi/article/details/52736350" target="_blank" rel="noopener">Java抽象类 详解</a></li>
<li><a href="https://blog.csdn.net/kingzone_2008/article/details/9220691" target="_blank" rel="noopener">Java：String、StringBuffer和StringBuilder的区别</a></li>
<li><a href="https://www.jianshu.com/p/16480390a847" target="_blank" rel="noopener">解读不可变的String</a></li>
<li><a href="https://blog.csdn.net/renfufei/article/details/16808775" target="_blank" rel="noopener">为什么String要设计成不可变的?</a></li>
<li><a href="https://blog.csdn.net/justloveyou_/article/details/52464440" target="_blank" rel="noopener">Java 中的 ==, equals 与 hashCode 的区别与联系</a></li>
<li><a href="https://zh.wikipedia.org/wiki/Java%E6%B3%A8%E8%A7%A3" target="_blank" rel="noopener">Java注解</a></li>
<li><a href="https://blog.csdn.net/briblue/article/details/73824058" target="_blank" rel="noopener">秒懂，Java 注解 （Annotation）你可以这样学</a></li>
<li><a href="https://www.jianshu.com/p/4068da3c8d3d" target="_blank" rel="noopener">Java注解深入理解</a></li>
<li><a href="https://www.jianshu.com/p/2f518a4a4c2b" target="_blank" rel="noopener">Java静态代理和动态代理</a></li>
<li><a href="https://www.jianshu.com/p/861223789d53" target="_blank" rel="noopener">Java代理和动态代理机制分析和应用</a></li>
</ol>

      
    </div>

    
      
      



      
      
    

    
      <footer class="post-footer">
        
          <div class="post-tags">
            
              <a href="/tags/java/">java</a>
            
          </div>
        
        
        
  <nav class="post-nav">
    
      <a class="prev" href="/2018/12/30/Java数据结构/">
        <i class="iconfont icon-left"></i>
        <span class="prev-text nav-default">Java数据结构</span>
        <span class="prev-text nav-mobile">上一篇</span>
      </a>
    
    
      <a class="next" href="/2018/10/12/Dart Package Server/">
        <span class="next-text nav-default">私有Dart Package Sever</span>
        <span class="prev-text nav-mobile">下一篇</span>
        <i class="iconfont icon-right"></i>
      </a>
    
  </nav>


      </footer>
    

  </article>


          </div>
          
  <div class="comments" id="comments">
    
  </div>


        </div>
      </main>

      <footer id="footer" class="footer">

  <div class="social-links">
    
      
        
          <a href="mailto:tan2junze@gmail.com" class="iconfont icon-email" title="email"></a>
        
      
    
      
    
      
    
      
    
      
    
      
    
      
        
          <a href="https://github.com/tanjunze" class="iconfont icon-github" title="github"></a>
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    

    
      <a href="/atom.xml" class="iconfont icon-rss" title="rss"></a>
    
  </div>



<div class="copyright">
  <span class="power-by">
    由 <a class="hexo-link" href="https://hexo.io/">Hexo</a> 强力驱动
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    主题 - 
    <a class="theme-link" href="https://github.com/ahonn/hexo-theme-even">Even</a>
  </span>

  <span class="copyright-year">
    
    &copy; 
     
      2017 - 
    
    2019

    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">tanjunze</span>
  </span>
</div>

      </footer>

      <div class="back-to-top" id="back-to-top">
        <i class="iconfont icon-up"></i>
      </div>
    </div>

    
  
  

  



    
  



  
  





  
    <script type="text/javascript" src="/lib/jquery/jquery.min.js"></script>
  

  
    <script type="text/javascript" src="/lib/slideout/slideout.js"></script>
  

  
    <script type="text/javascript" src="/lib/fancybox/jquery.fancybox.pack.js"></script>
  

  
    <script type="text/javascript" src="/lib/pjax/jquery.pjax.min.js"></script>
  

  
    <script type="text/javascript" src="/lib/nprogress/nprogress.min.js"></script>
  


    <script type="text/javascript" src="/js/src/even.js?v=2.10.2"></script>

  </body>
</html>
