{"meta":{"title":"Tanjunzeç¬”è®°","subtitle":null,"description":"tanjunze","author":"tanjunze","url":"https://tanjunze.github.io"},"pages":[{"title":"categories","date":"2019-02-21T01:44:35.459Z","updated":"2019-02-21T01:44:35.449Z","comments":true,"path":"categories/index.html","permalink":"https://tanjunze.github.io/categories/index.html","excerpt":"","text":""},{"title":"tags","date":"2019-02-21T01:43:43.912Z","updated":"2019-02-21T01:43:43.904Z","comments":true,"path":"tags/index.html","permalink":"https://tanjunze.github.io/tags/index.html","excerpt":"","text":""},{"title":"å…³äº","date":"2018-10-26T13:59:02.000Z","updated":"2019-02-21T02:01:08.921Z","comments":true,"path":"about/index.html","permalink":"https://tanjunze.github.io/about/index.html","excerpt":"","text":"ã€ ä¸ç§¯è·¬æ­¥æ— ä»¥è‡³åƒé‡Œï¼Œä¸ç§¯å°æµæ— ä»¥æˆæ±Ÿæµ· ã€ å…³äºæˆ‘AndroidæŠ€æœ¯å®…ï¼Œè®¡ç®—æœºä¸“ä¸šï¼Œå–œæ¬¢æŠ˜è…¾ã€‚æŠ€æœ¯æ ˆ: Java/Android/Kotlinã€Flutter(å¼ºçƒˆæ¨è)ã€H5ã€ReactNativeã€Weexã€Cordovaã€Linuxã€SQlã€TensorFlowã€C++ è”ç³»æ–¹å¼é‚®ç®±ï¼štan_junze@qq.com Githubï¼šhttps://github.com/tanjunze"}],"posts":[{"title":"åœ¨Blogä¸­æ·»åŠ èƒŒæ™¯å›¾å’ŒåŠ¨æ•ˆ","slug":"åœ¨Blogä¸­æ·»åŠ èƒŒæ™¯å›¾å’ŒåŠ¨æ•ˆ","date":"2018-10-26T14:53:36.000Z","updated":"2018-10-26T07:29:00.498Z","comments":true,"path":"2018/10/26/åœ¨Blogä¸­æ·»åŠ èƒŒæ™¯å›¾å’ŒåŠ¨æ•ˆ/","link":"","permalink":"https://tanjunze.github.io/2018/10/26/åœ¨Blogä¸­æ·»åŠ èƒŒæ™¯å›¾å’ŒåŠ¨æ•ˆ/","excerpt":"è®°å½•ä¸€æ¬¡åœ¨Blogä¸­æ·»åŠ åŠ¨æ€æ•ˆæœã€‚ å‚è€ƒç½‘å€ï¼šç½‘ç«™åŠ¨æ€èƒŒæ™¯ï¼ˆåŠ¨æ€å›¾ï¼‰å’Œé™æ€èƒŒæ™¯ï¼ˆèƒŒæ™¯å›¾ç‰‡ï¼‰çš„ä¸»é¢˜ç¾åŒ–","text":"è®°å½•ä¸€æ¬¡åœ¨Blogä¸­æ·»åŠ åŠ¨æ€æ•ˆæœã€‚ å‚è€ƒç½‘å€ï¼šç½‘ç«™åŠ¨æ€èƒŒæ™¯ï¼ˆåŠ¨æ€å›¾ï¼‰å’Œé™æ€èƒŒæ™¯ï¼ˆèƒŒæ™¯å›¾ç‰‡ï¼‰çš„ä¸»é¢˜ç¾åŒ– æ·»åŠ èœ˜è››ç½‘åŠ¨æ•ˆéœ€è¦åœ¨htmlé¡µé¢çš„&lt;body&gt;&lt;/body&gt;æ ‡ç­¾ä¸­æ·»åŠ ä¸‹é¢çš„js: 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283&lt;script type=\"text/javascript\"&gt; ! function () &#123; function o(w, v, i) &#123; return w.getAttribute(v) || i &#125; function j(i) &#123; return document.getElementsByTagName(i) &#125; function l() &#123; var i = j(\"script\"), w = i.length, v = i[w - 1]; return &#123; l: w, z: o(v, \"zIndex\", -1), //è®¾ç½®åŠ¨æ€å›¾æ˜¾ç¤ºçš„å±‚ä½ï¼Œä¸€èˆ¬-1å°±è¡Œï¼Œä¸ç”¨æ”¹ o: o(v, \"opacity\", 0.5), //0.5æ˜¾ç¤ºçš„æ˜¯çº¿æ¡çš„é€æ˜åº¦ï¼Œå¯ä»¥è‡ªè¡Œè°ƒæ•´ c: o(v, \"color\", \"0,0,0\"), //è®¾ç½®çº¿æ¡çš„é¢œè‰²ï¼Œä¸‰ä¸ª0,0,0åˆ†åˆ«ä»£è¡¨RGBé¢œè‰²æ•°å€¼ï¼Œä¸çŸ¥é“çš„å¯ä»¥æ‰“å¼€PSé‡Œçš„æ‹¾è‰²å™¨å°±å¯ä»¥çœ‹åˆ°RGBæ•°å€¼äº† n: o(v, \"count\", 120), //è®¾ç½®çº¿æ¡æ˜¾ç¤ºçš„æ•°é‡ï¼Œæœ‰å¯†é›†ææƒ§ç—‡çš„æœ‹å‹å¯åˆ«æŠŠæ•°å€¼è®¾ç½®å¤ªå¤§å“¦ &#125; &#125; function k() &#123; r = u.width = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth, n = u.height = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight &#125; function b() &#123; e.clearRect(0, 0, r, n); var w = [f].concat(t); var x, v, A, B, z, y; t.forEach(function (i) &#123; i.x += i.xa, i.y += i.ya, i.xa *= i.x &gt; r || i.x &lt; 0 ? -1 : 1, i.ya *= i.y &gt; n || i.y &lt; 0 ? -1 : 1, e.fillRect(i.x - 0.5, i.y - 0.5, 1, 1); for (v = 0; v &lt; w.length; v++) &#123; x = w[v]; if (i !== x &amp;&amp; null !== x.x &amp;&amp; null !== x.y) &#123; B = i.x - x.x, z = i.y - x.y, y = B * B + z * z; y &lt; x.max &amp;&amp; (x === f &amp;&amp; y &gt;= x.max / 2 &amp;&amp; (i.x -= 0.03 * B, i.y -= 0.03 * z), A = (x.max - y) / x.max, e.beginPath(), e.lineWidth = A / 2, e.strokeStyle = \"rgba(\" + s.c + \",\" + (A + 0.2) + \")\", e.moveTo(i.x, i.y), e.lineTo(x.x, x.y), e.stroke()) &#125; &#125; w.splice(w.indexOf(i), 1) &#125;), m(b) &#125; var u = document.createElement(\"canvas\"), s = l(), c = \"c_n\" + s.l, e = u.getContext(\"2d\"), r, n, m = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || function (i) &#123; window.setTimeout(i, 1000 / 45) &#125;, a = Math.random, f = &#123; x: null, y: null, max: 20000 &#125;; u.id = c; u.style.cssText = \"position:fixed;top:0;left:0;z-index:\" + s.z + \";opacity:\" + s.o; j(\"body\")[0].appendChild(u); k(), window.onresize = k; window.onmousemove = function (i) &#123; i = i || window.event, f.x = i.clientX, f.y = i.clientY &#125;, window.onmouseout = function () &#123; f.x = null, f.y = null &#125;; for (var t = [], p = 0; s.n &gt; p; p++) &#123; var h = a() * r, g = a() * n, q = 2 * a() - 1, d = 2 * a() - 1; t.push(&#123; x: h, y: g, xa: q, ya: d, max: 6000 &#125;) &#125; setTimeout(function () &#123; b() &#125;, 100) &#125;();&lt;/script&gt; æ·»åŠ èƒŒæ™¯å›¾æˆ‘çš„blogçš„æ ·å¼æœ‰ç‚¹å·®å¼‚ï¼Œè¿™è®°å½•ä¸€ä¸‹ã€‚ åœ¨cssæ ·å¼æ–‡ä»¶ä¸­æ·»åŠ ä¸€ä¸‹css:123456body&#123; width:100%; height:auto; background: url(èƒŒæ™¯å›¾è·¯å¾„) no-repeat fixed; background-size: cover;&#125; æ³¨æ„ï¼šèƒŒæ™¯å›¾ç‰‡æœ€å¥½æ˜¯ï¼š1920x1080 èƒŒæ™¯å›¾ç‰‡ç´ æç½‘ï¼šToptal å¥½äº†ï¼Œé€šè¿‡ä»¥ä¸Š2æ­¥æ“ä½œå°±å¯ä»¥å®ç°çœ‹çš„èœ˜è››ç½‘æ•ˆæœ æœ¬blogä½¿ç”¨hexo +material-x æ­å»ºï¼Œbody æ ‡ç­¾æ–‡ä»¶åœ¨ &lt;hexo blog path&gt;\\themes\\material-x\\layout\\layout.ejsbody CSSæ–‡ä»¶åœ¨ &lt;hexo blog path&gt;\\themes\\material-x\\source\\less\\_base.lessä¸­æ·»åŠ ","categories":[],"tags":[]},{"title":"ç§æœ‰Dart Package Sever","slug":"Dart Package Server","date":"2018-10-12T00:00:00.000Z","updated":"2018-12-28T05:43:44.146Z","comments":true,"path":"2018/10/12/Dart Package Server/","link":"","permalink":"https://tanjunze.github.io/2018/10/12/Dart Package Server/","excerpt":"","text":"æ­å»ºç§æœ‰ Dart Package Server1ã€æ­å»ºDart Package Server","categories":[{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"https://tanjunze.github.io/categories/å‰ç«¯/"}],"tags":[{"name":"Dart","slug":"Dart","permalink":"https://tanjunze.github.io/tags/Dart/"},{"name":"Flutter","slug":"Flutter","permalink":"https://tanjunze.github.io/tags/Flutter/"}]},{"title":"Dockerå‘½ä»¤ç¬”è®°","slug":"Dockerå‘½ä»¤ç¬”è®°","date":"2018-08-17T10:15:12.000Z","updated":"2019-02-26T07:18:10.976Z","comments":true,"path":"2018/08/17/Dockerå‘½ä»¤ç¬”è®°/","link":"","permalink":"https://tanjunze.github.io/2018/08/17/Dockerå‘½ä»¤ç¬”è®°/","excerpt":"ä¸€ã€Docker å®‰è£…æœ¬ç¤ºä¾‹é‡‡ç”¨shè„šæœ¬å®‰è£…,å…¶ä»–æ–¹å¼å‚è€ƒDocker CEå®˜ç½‘ã€‚","text":"ä¸€ã€Docker å®‰è£…æœ¬ç¤ºä¾‹é‡‡ç”¨shè„šæœ¬å®‰è£…,å…¶ä»–æ–¹å¼å‚è€ƒDocker CEå®˜ç½‘ã€‚ 0ã€rootç”¨æˆ·ç™»é™† 1ã€å‡çº§yumåŒ…ï¼š $ sudo yum update 2ã€ï¼ˆå¯é€‰ï¼‰å¸è½½æ—§çš„Docker $ sudo yum erase docker docker-common docker-client docker-compose 4ã€æ‰§è¡Œ Docker å®‰è£…è„šæœ¬ $ curl -fsSL https://get.docker.com/ | shæˆ–$ wget -qO- https://get.docker.com/ | sh 5ã€æµ‹è¯•Docker $ docker info 6ã€è®¾ç½®Dockerå¼€æœºå¯åŠ¨ $ sudo systemctl enable docker.service 7ã€å¼€å¯DockeræœåŠ¡ $ sudo systemctl start docker äºŒã€Docker Compose å®‰è£… 1ã€ä¸‹è½½å®‰è£…è„šæœ¬ $ curl -L https://github.com/docker/compose/releases/download/1.21.1/docker-compose-`uname -s-uname -m` -o /usr/local/bin/docker-compose 2ã€æ·»åŠ æ‰§è¡Œæƒé™ $ chmod +x /usr/local/bin/docker-compose ä¸‰ã€Docker å¸¸ç”¨å‘½ä»¤ Docker å¯åŠ¨ $ sudo systemctl start docker docker å¼€æœºå¯åŠ¨ $ sudo systemctl enable docker.service docker å½“å‰å®¹å™¨å¼€æœºå¯åŠ¨ $ docker run -d â€“restart=always å®¹å™¨ç»ˆç«¯ $ docker exec -it &lt;å®¹å™¨id&gt; /bin/bash æŒ‚è½½ç›®å½• $ docker run -d -v &lt;ä¸»æœºç›®å½•è·¯å¾„&gt;:&lt;å®¹å™¨ç›®å½•è·¯å¾„ &gt; ç¤ºä¾‹ï¼š $ docker run -d â€“restart=always -v /root/notebooks:/notebooks -it -p 8888:8888 tensorflow/tensorflow:latest-py3 æ‹‰å–é•œåƒ $ docker pull &lt;é•œåƒtag&gt; æŸ¥çœ‹è¿è¡Œä¸­çš„å®¹å™¨ $ docker ps æŸ¥çœ‹æ‰€æœ‰å®¹å™¨ $ docker ps -a å…³é—­å®¹å™¨ $ docker stop &lt;å®¹å™¨id&gt; å¼ºåˆ¶åˆ é™¤å®¹å™¨ $ docker rm -f &lt;å®¹å™¨id&gt; æŸ¥çœ‹é•œåƒæ–‡ä»¶ $ docker images åˆ é™¤é•œåƒæ–‡ä»¶ docker rmi &lt;é•œåƒid&gt; å‚è€ƒæ–‡æ¡£ [1]ã€Docker CE [2]ã€Docker Compose [3]ã€Docker å¸¸ç”¨å‘½ä»¤ä¸æ“ä½œ","categories":[{"name":"Docker","slug":"Docker","permalink":"https://tanjunze.github.io/categories/Docker/"}],"tags":[{"name":"Docker","slug":"Docker","permalink":"https://tanjunze.github.io/tags/Docker/"}]},{"title":"Flutter æ•´ç†","slug":"Flutteræ•´ç†2","date":"2018-07-12T21:22:10.000Z","updated":"2019-02-26T07:17:26.469Z","comments":true,"path":"2018/07/13/Flutteræ•´ç†2/","link":"","permalink":"https://tanjunze.github.io/2018/07/13/Flutteræ•´ç†2/","excerpt":"","text":"Dart Packagehttps://www.dartlang.org/tools/pub åˆ›å»ºdart åŒ…https://www.dartlang.org/guides/libraries/create-library-packages dartåŒ…ä¾èµ–https://www.dartlang.org/tools/pub/dependencies#path-packages ä¾èµ–è‡ªå»º pub serverhttps://www.dartlang.org/tools/pub/dependencies#hosted-packages è‡ªå»ºç§æœ‰æœåŠ¡å™¨Githubï¼š pub server ä¾èµ–Gitä»“åº“https://www.dartlang.org/tools/pub/dependencies#git-packages æœ¬åœ°ä»“åº“ä¾èµ–https://www.dartlang.org/tools/pub/dependencies#path-packages Flutter Packagehttps://flutter.io/docs/development/packages-and-plugins/using-packages å¼€å‘FlutteråŒ…https://flutter.io/docs/development/packages-and-plugins/developing-packages","categories":[{"name":"Flutter","slug":"Flutter","permalink":"https://tanjunze.github.io/categories/Flutter/"}],"tags":[{"name":"Flutter","slug":"Flutter","permalink":"https://tanjunze.github.io/tags/Flutter/"},{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"https://tanjunze.github.io/tags/å‰ç«¯/"}]},{"title":"Android AIDL åŸç†","slug":"Android AIDL åŸç†","date":"2018-06-17T16:22:04.000Z","updated":"2019-02-22T05:40:53.522Z","comments":true,"path":"2018/06/18/Android AIDL åŸç†/","link":"","permalink":"https://tanjunze.github.io/2018/06/18/Android AIDL åŸç†/","excerpt":"","text":"Android AIDL åŸç†","categories":[{"name":"Android","slug":"Android","permalink":"https://tanjunze.github.io/categories/Android/"}],"tags":[{"name":"Android","slug":"Android","permalink":"https://tanjunze.github.io/tags/Android/"}]},{"title":"Flutter æ•´ç†","slug":"Flutteræ•´ç†","date":"2018-06-04T21:00:05.000Z","updated":"2019-02-26T07:18:02.078Z","comments":true,"path":"2018/06/05/Flutteræ•´ç†/","link":"","permalink":"https://tanjunze.github.io/2018/06/05/Flutteræ•´ç†/","excerpt":"","text":"æ–‡æ¡£Flutter å®˜ç½‘ https://flutter.io/ Flutter ä¸­æ–‡ å®˜æ–¹ï¼šhttps://flutter-io.cn/ ç¤¾åŒºï¼šhttps://flutterchina.club/ Dartå®˜ç½‘ https://www.dartlang.org/ DartåŒ…ç®¡ç† https://pub.dartlang.org/ https://pub.flutter-io.cn/ Flutter æ¡Œé¢ç‰ˆ ç¤¾åŒºï¼šhttps://github.com/google/flutter-desktop-embedding å…¶ä»–ï¼šhttps://feather-apps.com/ codelabsä¸­æ–‡ï¼šhttps://codelabs.flutter-io.cn/ å·¥å…·json_serializable https://caijinglong.github.io/json2dart/index_ch.html åŠ¨ç”» https://www.2dimensions.com/runtimes åšæ–‡é—²é±¼ https://www.yuque.com/xytech/flutter","categories":[{"name":"Flutter","slug":"Flutter","permalink":"https://tanjunze.github.io/categories/Flutter/"}],"tags":[{"name":"Flutter","slug":"Flutter","permalink":"https://tanjunze.github.io/tags/Flutter/"},{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"https://tanjunze.github.io/tags/å‰ç«¯/"}]},{"title":"linuxç¬”è®°ä¹‹ssh","slug":"linuxç¬”è®°ä¹‹ssh","date":"2018-05-23T10:08:33.000Z","updated":"2019-02-26T06:30:22.051Z","comments":true,"path":"2018/05/23/linuxç¬”è®°ä¹‹ssh/","link":"","permalink":"https://tanjunze.github.io/2018/05/23/linuxç¬”è®°ä¹‹ssh/","excerpt":"1ã€sshè‡ªåŠ¨è„šæœ¬ç™»é™† 1.1ã€åˆ›å»ºshellè„šæœ¬ï¼Œå¦‚è„šæœ¬ login.shå†…å®¹å¦‚ä¸‹ï¼š 1234567#!/usr/bin/expect set timeout 3 spawn ssh user@192.168.3.24 expect \"*password*\" send \"youPassword\\r\" interact","text":"1ã€sshè‡ªåŠ¨è„šæœ¬ç™»é™† 1.1ã€åˆ›å»ºshellè„šæœ¬ï¼Œå¦‚è„šæœ¬ login.shå†…å®¹å¦‚ä¸‹ï¼š 1234567#!/usr/bin/expect set timeout 3 spawn ssh user@192.168.3.24 expect \"*password*\" send \"youPassword\\r\" interact 1.2ã€ä¸ºè‡ªåŠ¨ç™»é™†è„šæœ¬æ·»åŠ æ‰§è¡Œæƒé™ï¼Œå¦‚ï¼š $ sudo chmod +x ./login.sh 1.3ã€ï¼ˆå¯é€‰ï¼‰ä¸ºè„šæœ¬æ·»åŠ åˆ«å æ‰“å¼€ç”¨æˆ·ç›®å½•ä¸‹çš„.bash_profileæ–‡ä»¶ $ vim ~/.bash_profile æ·»åŠ  åˆ«åï¼ˆå¦‚ï¼šSSLoginï¼‰å’Œ è„šæœ¬è·¯å¾„ï¼ˆå¦‚ï¼š/Users/youAccount/home/login.shï¼‰ä¿å­˜å¹¶é€€å‡ºï¼Œ å¦‚ï¼š $ alias SSLogin=â€™/Users/youAccount/home/login.shâ€™ åˆ·æ–°ç¯å¢ƒå˜é‡ $ source ~/.bash_profile åœ¨ç»ˆç«¯ä¸­ç›´æ¥ä½¿ç”¨åˆ«å SSLoginå»ç™»é™†äº†,å¦‚ $ SSLogin 2ã€sshå…å¯†ç ç™»é™† å‚è€ƒåšæ–‡ï¼šSSHå…å¯†ç ç™»é™†å’Œå…ipè¿æ¥ å‚è€ƒç½‘å€ï¼š [1]ã€expectæ•™ç¨‹ä¸­æ–‡ç‰ˆ [2]ã€shellå®ç°SSHè‡ªåŠ¨ç™»é™†","categories":[{"name":"Linux","slug":"Linux","permalink":"https://tanjunze.github.io/categories/Linux/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://tanjunze.github.io/tags/Linux/"},{"name":"SSH","slug":"SSH","permalink":"https://tanjunze.github.io/tags/SSH/"}]},{"title":"MACå‘½ä»¤","slug":"Mac å‘½ä»¤æ”¶é›†","date":"2018-05-22T15:56:43.000Z","updated":"2019-02-26T06:29:55.432Z","comments":true,"path":"2018/05/22/Mac å‘½ä»¤æ”¶é›†/","link":"","permalink":"https://tanjunze.github.io/2018/05/22/Mac å‘½ä»¤æ”¶é›†/","excerpt":"","text":"Mac å‘½ä»¤æ‰“å¼€å…³é—­éšè—æ–‡ä»¶åŠç›®å½•1shift commond .","categories":[{"name":"Linux","slug":"Linux","permalink":"https://tanjunze.github.io/categories/Linux/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://tanjunze.github.io/tags/Linux/"},{"name":"SSH","slug":"SSH","permalink":"https://tanjunze.github.io/tags/SSH/"},{"name":"Mac","slug":"Mac","permalink":"https://tanjunze.github.io/tags/Mac/"}]},{"title":"æ ‘è“æ´¾ç¬”è®°ä¹‹è‡ªåŠ¨æŒ‚è½½nftsç§»åŠ¨ç¡¬ç›˜","slug":"æ ‘è“æ´¾ç¬”è®°ä¹‹è‡ªåŠ¨æŒ‚è½½nftsç§»åŠ¨ç¡¬ç›˜","date":"2018-05-21T14:52:53.000Z","updated":"2018-10-26T05:52:43.901Z","comments":true,"path":"2018/05/21/æ ‘è“æ´¾ç¬”è®°ä¹‹è‡ªåŠ¨æŒ‚è½½nftsç§»åŠ¨ç¡¬ç›˜/","link":"","permalink":"https://tanjunze.github.io/2018/05/21/æ ‘è“æ´¾ç¬”è®°ä¹‹è‡ªåŠ¨æŒ‚è½½nftsç§»åŠ¨ç¡¬ç›˜/","excerpt":"0ã€æ’å…¥ntfsçš„å­˜å‚¨è®¾å¤‡å¦‚ï¼šç§»åŠ¨ç¡¬ç›˜1ã€å®‰è£…ntfs-3g $ sudo apt-get install ntfs-3g 2ã€æŸ¥è¯¢å¤–æ¥å­˜å‚¨ç›®å½•æƒé™å’ŒUUID $ ls -l /dev/disk/by-uuid/ è¾“å‡ºï¼š1lrwxrwxrwx 1 root root 10 Jan 1 1970 0AC4D607C4D5F543 - &gt; ../../sda1 è®°ä¸‹UUID - &gt; 0AC4D607C4D5F543çš„å€¼","text":"0ã€æ’å…¥ntfsçš„å­˜å‚¨è®¾å¤‡å¦‚ï¼šç§»åŠ¨ç¡¬ç›˜1ã€å®‰è£…ntfs-3g $ sudo apt-get install ntfs-3g 2ã€æŸ¥è¯¢å¤–æ¥å­˜å‚¨ç›®å½•æƒé™å’ŒUUID $ ls -l /dev/disk/by-uuid/ è¾“å‡ºï¼š1lrwxrwxrwx 1 root root 10 Jan 1 1970 0AC4D607C4D5F543 - &gt; ../../sda1 è®°ä¸‹UUID - &gt; 0AC4D607C4D5F543çš„å€¼ 3ã€åˆ›å»ºæŒ‚è½½ç‚¹å¹¶èµ‹æƒ $ sudo mkdir /mnt/usbdrive $ sudo chmod 770 /mnt/usbdrive 4ã€ä½¿ç”¨idå‘½ä»¤è·å–uidï¼Œpiç”¨æˆ·å’Œç»„çš„gidï¼ˆé€šå¸¸ä¸º1000ï¼‰ $ id -u pi $ id -g pi 5ã€æŒ‚è½½ï¼Œç„¶åæ£€æŸ¥/mnt/usbdriveæ˜¯å¦å¯ä»¥è®¿é—®å®ƒ $ sudo mount -t ntfs-3g -o uid=1000ï¼Œgid=1000ï¼Œumask=007 /dev/sda1/mnt/usbdrive 6ã€å¤‡ä»½é©±åŠ¨ç›®å½•å¹¶æ’å…¥æ–°çš„æŒ‚è½½ç‚¹å¤‡ä»½ï¼š $ sudo cp /etc/fstab /etc/fstab.backup æ‰“å¼€é©±åŠ¨ç›®å½•æ–‡ä»¶å¹¶åœ¨æœ€åä¸€è¡Œå†™å…¥æ–°çš„é©±åŠ¨ä¿¡æ¯ $ sudo nano /etc/fstab åœ¨fstabæ–‡ä»¶ä¸­æ·»åŠ å®‰è£…ä¿¡æ¯ï¼ˆç”¨æ‚¨è‡ªå·±çš„UUIDï¼Œuidï¼Œgidæ›¿æ¢ï¼‰ï¼š1UUID=0AC4D607C4D5F543 /mnt/usbdrive ntfs-3g uid=1000ï¼Œgid=1000ï¼Œumask=007 0 0 7ã€é‡æ–°å¯åŠ¨æ ‘è“æ´¾ sudo reboot 8ã€ä½œä¸ºNextCloudçš„å­˜å‚¨è®¾å¤‡åœ¨/mnt/usbdriveé©±åŠ¨ï¼ˆç§»åŠ¨ç¡¬ç›˜ï¼‰ä¸Šé…ç½®NextCloudçš„æ•°æ®ç›®å½•ï¼Œåˆ™å®ƒåº”è¯¥å¯¹www-dataç”¨æˆ·æ‹¥æœ‰770æƒé™ã€‚æ‚¨å¯ä»¥ç®€å•åœ°å°†ç”¨æˆ·www-dataæ·»åŠ åˆ°piç»„ä¸­ï¼Œå› ä¸ºå®ƒå·²ç»æ‹¥æœ‰770çš„æƒé™ï¼Œå¦‚ä¸Šé¢åœ¨fstabä¸­è®¾ç½®çš„é‚£æ ·ã€‚ $ sudo usermod -a -G pi www-data å‚è€ƒç½‘å€ï¼š [1]ã€How to setup mount / auto-mount USB Hard Drive on Raspberry Pi [2]ã€NTFS External HD With ownCloud on the Raspberry Pi [3]ã€NTFS-3g HDD 0770 and 0777 permissions Owncloud [4]ã€é€šè¿‡ NextCloudPi ä¸ºæ ‘è“æ´¾å¯è§†åŒ–æ­å»º NextCloud ç½‘ç›˜ï¼ˆå¹¶æŠ˜è…¾æ— è¯­çš„ NTFS ç§»åŠ¨ç¡¬ç›˜ï¼‰ [5]ã€ç»™æ ‘è“æ´¾æŒ‚è½½ç§»åŠ¨ç¡¬ç›˜æˆ–Uç›˜ [6]ã€æ ‘è“æ´¾Raspberry Pi æ‰“é€ ä½æˆæœ¬NASå­˜å‚¨å®¶åº­æœåŠ¡å™¨çš„åä¸ªé—®é¢˜æ•´ç†","categories":[{"name":"æ ‘è“æ´¾","slug":"æ ‘è“æ´¾","permalink":"https://tanjunze.github.io/categories/æ ‘è“æ´¾/"}],"tags":[{"name":"æ ‘è“æ´¾","slug":"æ ‘è“æ´¾","permalink":"https://tanjunze.github.io/tags/æ ‘è“æ´¾/"}]},{"title":"æ ‘è“æ´¾ç¬”è®°ä¹‹NextCloudå®‰è£…","slug":"æ ‘è“æ´¾ç¬”è®°ä¹‹NextCloudå®‰è£…","date":"2018-05-21T13:32:27.000Z","updated":"2018-10-26T05:52:34.453Z","comments":true,"path":"2018/05/21/æ ‘è“æ´¾ç¬”è®°ä¹‹NextCloudå®‰è£…/","link":"","permalink":"https://tanjunze.github.io/2018/05/21/æ ‘è“æ´¾ç¬”è®°ä¹‹NextCloudå®‰è£…/","excerpt":"Nextcloud æ˜¯ä¸€ä¸ªå…è´¹ä¸“ä¸šçš„ç§æœ‰äº‘å­˜å‚¨ç½‘ç›˜ã€Œå¼€æºã€é¡¹ç›®ï¼Œå¯ä»¥è®©ä½ ç®€å•å¿«é€Ÿåœ°åœ¨ä¸ªäºº/å…¬å¸ç”µè„‘ã€æœåŠ¡å™¨ç”šè‡³æ˜¯æ ‘è“æ´¾ç­‰è®¾å¤‡ä¸Šæ¶è®¾ä¸€å¥—å±äºè‡ªå·±æˆ–å›¢é˜Ÿä¸“å±çš„äº‘åŒæ­¥ç½‘ç›˜ï¼Œä»è€Œå®ç°è·¨å¹³å°è·¨è®¾å¤‡æ–‡ä»¶åŒæ­¥ã€å…±äº«ã€ç‰ˆæœ¬æ§åˆ¶ã€å›¢é˜Ÿåä½œç­‰åŠŸèƒ½ã€‚ 1ã€NextCloudç®€å•å®‰è£…çš„ä¸‰ç§æ–¹å¼æ€»ç»“ 1.1ã€ä½¿ç”¨ docker å®‰è£…ï¼šæ–‡æ¡£ï¼šhttps://github.com/nextcloud/docker 1.2ã€ä½¿ç”¨ nextcloud-snap å®‰è£…æ–‡æ¡£ï¼šhttps://github.com/nextcloud/nextcloud-snap 1.3 ä½¿ç”¨VMå®‰è£…æ–‡æ¡£ï¼šhttps://github.com/nextcloud/vm","text":"Nextcloud æ˜¯ä¸€ä¸ªå…è´¹ä¸“ä¸šçš„ç§æœ‰äº‘å­˜å‚¨ç½‘ç›˜ã€Œå¼€æºã€é¡¹ç›®ï¼Œå¯ä»¥è®©ä½ ç®€å•å¿«é€Ÿåœ°åœ¨ä¸ªäºº/å…¬å¸ç”µè„‘ã€æœåŠ¡å™¨ç”šè‡³æ˜¯æ ‘è“æ´¾ç­‰è®¾å¤‡ä¸Šæ¶è®¾ä¸€å¥—å±äºè‡ªå·±æˆ–å›¢é˜Ÿä¸“å±çš„äº‘åŒæ­¥ç½‘ç›˜ï¼Œä»è€Œå®ç°è·¨å¹³å°è·¨è®¾å¤‡æ–‡ä»¶åŒæ­¥ã€å…±äº«ã€ç‰ˆæœ¬æ§åˆ¶ã€å›¢é˜Ÿåä½œç­‰åŠŸèƒ½ã€‚ 1ã€NextCloudç®€å•å®‰è£…çš„ä¸‰ç§æ–¹å¼æ€»ç»“ 1.1ã€ä½¿ç”¨ docker å®‰è£…ï¼šæ–‡æ¡£ï¼šhttps://github.com/nextcloud/docker 1.2ã€ä½¿ç”¨ nextcloud-snap å®‰è£…æ–‡æ¡£ï¼šhttps://github.com/nextcloud/nextcloud-snap 1.3 ä½¿ç”¨VMå®‰è£…æ–‡æ¡£ï¼šhttps://github.com/nextcloud/vm NextCloudå®‰è£…å®˜æ–¹æ–‡æ¡£ï¼šhttps://nextcloud.com/install/#instructions-server 2ã€NextCloudåœ¨æ ‘è“æ´¾ä¸Šçš„å®‰è£…æ–¹å¼NextCloudPIå®˜æ–¹æ–‡æ¡£ï¼šhttps://github.com/nextcloud/nextcloudpi 2.1ã€è‡ªå·±æ„å»ºç¯å¢ƒå’Œéƒ¨ç½²NextCloudåšæ–‡ï¼šåœ¨Raspberry Piä¸Šç®€å•å®‰è£…Nextcloud 2.1ã€è‡ªåŠ¨è„šæœ¬æ„å»ºNextCloudåšæ–‡ï¼šåœ¨Raspberry Piä¸Šè‡ªåŠ¨å®‰è£…Nextcloud 2.3ã€åˆ·NextCloudPié•œåƒæ–‡ä»¶åšæ–‡ï¼šæ ‘è“æ´¾Raspberry Piå®‰è£…NextCloudæ•™ç¨‹-è‡ªå»ºå®¶åº­ç§æœ‰äº‘å±€åŸŸç½‘å…±äº« 2.4 ä½¿ç”¨ docker å®‰è£…ï¼šæ–‡æ¡£ï¼šNextCloudPI Github 3ã€NextCloudå¿«é€Ÿå®‰è£…ç¬”è®° è¿™é‡Œè®°å½•æˆ‘ç›®å‰ä½¿ç”¨çš„å®‰è£…æ–¹å¼ æ­¥éª¤2.1ä¸­å…³é”®å‘½ä»¤ï¼Œæ–¹ä¾¿æŸ¥é˜…ï¼š 3.1ã€ä¸‹è½½Ansible $ sudo apt-get -y install ansible 3.2ã€ä¸‹è½½è‡ªåŠ¨æ„å»ºè„šæœ¬ $ wget https://raw.githubusercontent.com/webtaster/Nextcloud/master/build_nextcloud.yml 3.3ã€(å¯é€‰)ä½¿ç”¨ SQLiteå®‰è£…å’Œé…ç½®Nextcloud $ sudo date ; ansible-playbook -s -c local -i â€œlocalhost,â€ build_nextcloud.yml 3.4ã€(å¯é€‰)ä½¿ç”¨ MySQLå®‰è£…å’Œé…ç½®Nextcloud $ date ; ansible-playbook -s -c local -i â€œlocalhost,â€ â€“extra-vars â€œDATABASE=mysql MYSQL_ROOT_PASSWORD=qwerty NCUSER_PASSWORD=raindropâ€ build_nextcloud.yml ä¸Šé¢æŒ‡ä»¤ä¸­MySQLç”¨æˆ·å¯†ç ï¼ˆå¯ä»¥è‡ªå®šä¹‰ï¼‰ï¼šç”¨æˆ·ï¼šroot å¯†ç ï¼šqwerty å¯¹åº”å‘½ä»¤ï¼šMYSQL_ROOT_PASSWORD = qwertyç”¨æˆ·ï¼šncuser å¯†ç ï¼šrainindrop å¯¹åº”å‘½ä»¤ï¼šNCUSER_PASSWORD = raindrop 3.5ã€åˆå§‹åŒ–é…ç½®NextCloudåœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ http://æ ‘è“æ´¾çš„IPåœ°å€/nextcloud ä¾‹å¦‚ï¼š http://192.168.1.99/nextcloud ç„¶åæ ¹æ®NextCloudæç¤ºé…ç½®NextCloudå°±å¯ä»¥äº†ã€‚ 3.6ã€(å¯é€‰)é…ç½®æ ‘è“æ´¾ç›®å½•è¯»å†™æƒé™å¦‚æœåœ¨æµè§ˆå™¨ä¸­é…ç½®NextCloudè¿‡ç¨‹ä¸­é”™è¯¯æç¤ºâ€œæ— æ³•åˆ›å»ºvar/www/html/nextcloud/dataâ€œæ—¶ï¼Œsshç­‰ç™»é™†æ ‘è“æ´¾å¹¶èµ‹äºˆ775æƒé™ $ sudo chmod -R 775 /var/www/html/nextcloud/","categories":[{"name":"æ ‘è“æ´¾","slug":"æ ‘è“æ´¾","permalink":"https://tanjunze.github.io/categories/æ ‘è“æ´¾/"}],"tags":[{"name":"æ ‘è“æ´¾","slug":"æ ‘è“æ´¾","permalink":"https://tanjunze.github.io/tags/æ ‘è“æ´¾/"}]},{"title":"æ ‘è“æ´¾ç¬”è®°ä¹‹å®‰è£…é…ç½®","slug":"æ ‘è“æ´¾ç¬”è®°ä¹‹å®‰è£…é…ç½®","date":"2018-05-21T09:38:43.000Z","updated":"2018-10-26T05:52:39.303Z","comments":true,"path":"2018/05/21/æ ‘è“æ´¾ç¬”è®°ä¹‹å®‰è£…é…ç½®/","link":"","permalink":"https://tanjunze.github.io/2018/05/21/æ ‘è“æ´¾ç¬”è®°ä¹‹å®‰è£…é…ç½®/","excerpt":"å‰è¨€ï¼š è¿™ç¯‡ç¬”è®°è®°å½•ä¸ä½¿ç”¨æ˜¾ç¤ºå±å’Œç½‘çº¿æ¥å®‰è£…ç³»ç»Ÿå’Œé…ç½®ç¯å¢ƒ 1ã€å‡†å¤‡ æ ‘è“æ´¾3b+æ¿å­ SDå­˜å‚¨å¡å’Œå¡å¥— ç”µæºçº¿å’Œæ’å¤´ è·¯ç”±å™¨ï¼ˆæœ‰wifiå°±è¡Œï¼‰","text":"å‰è¨€ï¼š è¿™ç¯‡ç¬”è®°è®°å½•ä¸ä½¿ç”¨æ˜¾ç¤ºå±å’Œç½‘çº¿æ¥å®‰è£…ç³»ç»Ÿå’Œé…ç½®ç¯å¢ƒ 1ã€å‡†å¤‡ æ ‘è“æ´¾3b+æ¿å­ SDå­˜å‚¨å¡å’Œå¡å¥— ç”µæºçº¿å’Œæ’å¤´ è·¯ç”±å™¨ï¼ˆæœ‰wifiå°±è¡Œï¼‰ 2ã€\båˆ»å½•\bç³»ç»Ÿ 2.1ã€åˆ°æ ‘è“æ´¾å®˜ç½‘ä¸‹è½½ç³»ç»Ÿç³»ç»Ÿæ–‡ä»¶å¹¶è§£å‹ 2.2ã€ä¸‹è½½å®‰è£…é•œåƒåˆ»å½•è½¯ä»¶å¦‚ï¼š\bMacç‰ˆEtcherå’Œwindowç‰ˆwin32diskimagerç­‰ 2.3ã€æ’å…¥SDå¡åˆ°ç”µè„‘å¹¶æ‰“å¼€åˆ»å½•è½¯ä»¶å¦‚ï¼š\bç›®å‰ä½¿ç”¨çš„Etcherï¼ˆç¤ºä¾‹ï¼‰ 2.3.1ã€é€‰æ‹©ï¼ˆSelect imageï¼‰\b\bä»å®˜ç½‘ä¸‹è½½å¹¶è§£å‹\båçš„ NOOBS \bæˆ– RASPBIAN \b\bé•œåƒæ–‡ä»¶ï¼ˆ xxx.img \bæ ¼å¼ï¼‰ 2.3.2ã€é€‰æ‹©SD\bå¡ (Select drive) 2.3.3 \bå¼€å§‹åˆ»å½•é•œåƒï¼ˆFlashï¼‰å¹¶ç­‰å¾…åŠå‡ åˆ†é’Ÿè‡³é•œåƒåˆ»å½•å®Œæˆ\b 3ã€\b\bé…ç½®wif\biå’Œsshå› ä¸ºæ²¡æœ‰ä½¿ç”¨\bç½‘çº¿æ‰€ä»¥è¦åœ¨å®‰è£…å‰é…ç½®å¥½wifiå’Œsshï¼Œ\b\bè®©\b\bæ¿å­åœ¨å®‰è£…å®Œç³»ç»Ÿåè‡ªåŠ¨è¿æ¥wifiå¹¶å¼€å¯sshã€‚ 3.1ã€é…ç½®wifi æ‰“å¼€SDå¡ï¼Œåˆ›å»ºæ–‡ä»¶å¹¶å†™å…¥ä¿å­˜ï¼šæ–‡ä»¶åï¼šwpa_supplicant.conf 12345678910country=CNctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdevupdate_config=1network=&#123;ssid=&quot;mywifi&quot; #ssidï¼ˆwifiåï¼‰psk=&quot;123456&quot; #passwordï¼ˆwifiå¯†ç ï¼‰key_mgmt=WPA-PSK #wifiåŠ å¯†æ–¹å¼priority=1 #ä¼˜å…ˆçº§&#125; 3.2ã€é…ç½®ssh æ‰“å¼€SDå¡ï¼Œåˆ›å»ºæ–‡ä»¶sshæ–‡ä»¶(ä¸å†™å…¥å†…å®¹ï¼Œæ— åç¼€)æ–‡ä»¶åï¼šssh 4ã€å®‰è£…ç³»ç»Ÿå¹¶sshç™»é™† 4.1ã€å°†SDå¡æ’å…¥æ¿å­ä¸­å¹¶ä¸Šç”µå¯åŠ¨ï¼Œå¦‚æœç»¿ç¯ä¸åœ¨é—ªçƒä¸”çº¢ç¯å¸¸äº®ï¼Œé‚£ä¹ˆç³»ç»Ÿå®‰è£…å¹¶å¯åŠ¨æˆåŠŸã€‚ 4.2ã€è¿›å…¥è·¯ç”±å™¨æŸ¥çœ‹åç§°ä¸º raspberryè®¾å¤‡çš„ IPåœ°å€ï¼Œä¾‹å¦‚ï¼šè®¾å¤‡ï¼šraspberry ï¼ŒIPåœ°å€ï¼š192.168.1.56ã€‚å¦‚æœæ²¡æœ‰æŸ¥çœ‹åˆ° raspberryè®¾å¤‡å’ŒIPï¼Œè¯·ç¡®è®¤ æ­¥éª¤3.1 ä¸­æ–‡ä»¶ wpa_supplicant.confæ˜¯å¦æ­£ç¡®é…ç½®wifiåç§°å’Œå¯†ç ã€‚å¦‚æœé”™è¯¯è¯·é‡æ–°åˆ»å½•ç³»ç»Ÿå¹¶é…ç½®wifiã€‚ 4.3ã€ç¡®è®¤åˆ° raspberryçš„IPï¼ˆä¾‹å¦‚ï¼š192.168.1.56ï¼‰ååœ¨ç”µè„‘ä¸­æ‰“å¼€ç»ˆç«¯ï¼ˆwindowä½¿ç”¨xshellï¼‰è¿æ¥åˆ° Raspberry PI æ¿å­çš„ sshæœåŠ¡ï¼Œä¾‹å¦‚ï¼š ssh pi@192.168.1.56 ç„¶åè¾“å…¥å¯†ç ï¼šraspberry(ç³»ç»Ÿé»˜è®¤) 4.4ã€sshç™»é™†å®Œæˆåå°±å¯ä»¥å¯¹æ¿å­æ“ä½œäº†ï¼ 5ã€è®¾ç½®wifiåœ¨æ¿å­æ–­ç”µæˆ–é‡å¯åè‡ªåŠ¨è¿æ¥ç½‘ç»œ 5.1ã€sshç™»é™†åæ‰§è¡Œ sudo nano /etc/network/interfaces 12345678910111213auto loiface lo inet loopbackiface eth0 inet dhcpallow-hotplug wlan0iface wlan0 inet dhcpwpa-ssid &quot;mywifi&quot;wpa-psk &quot;123456&quot; ä¿å­˜é€€å‡º å‚è€ƒåšæ–‡ï¼šRaspberry Piæ ‘è“æ´¾æ— çº¿ç½‘å¡é…ç½®[å¤šé‡æ–¹æ³•å¤‡é€‰] 6ã€å®‰å…¨ç®¡ç† å»ºè®®ä¿®æ”¹é»˜è®¤è´¦æˆ·å¯†ç å¦‚ï¼š ç”¨æˆ·ï¼špi å¯†ç ï¼šraspberry æ³¨ï¼š 1ã€nano ç¼–è¾‘å™¨ æ“ä½œ é€€å‡ºï¼šcontrol xä¿å­˜å¹¶é€€å‡ºï¼š control o ä¿å­˜ enter qç¡®è®¤ control x é€€å‡º 2ã€linxu cé‡å¯å‘½ä»¤ sudo reboot å‚è€ƒåšæ–‡ï¼š [1]ã€æ ‘è“æ´¾å¦‚ä½•å®Œå…¨æ— å¤´(æ— å±æ— ç½‘çº¿æ— é”®ç›˜é¼ æ ‡)å®‰è£… [2]ã€æ ‘è“æ´¾ - ä¿®æ”¹piè´¦å·å¯†ç ,å¼€å¯rootè´¦å· [3]ã€Raspberry Piæ ‘è“æ´¾æ— çº¿ç½‘å¡é…ç½®[å¤šé‡æ–¹æ³•å¤‡é€‰] [4]ã€NextCloudè®ºå›","categories":[{"name":"æ ‘è“æ´¾","slug":"æ ‘è“æ´¾","permalink":"https://tanjunze.github.io/categories/æ ‘è“æ´¾/"}],"tags":[{"name":"æ ‘è“æ´¾","slug":"æ ‘è“æ´¾","permalink":"https://tanjunze.github.io/tags/æ ‘è“æ´¾/"}]},{"title":"Macä½¿ç”¨Androidä»£ç†ç¿»å¢™è®°å½•","slug":"Macä½¿ç”¨Androidä»£ç†ç¿»å¢™è®°å½•","date":"2018-05-17T15:29:09.000Z","updated":"2018-10-26T05:51:01.374Z","comments":true,"path":"2018/05/17/Macä½¿ç”¨Androidä»£ç†ç¿»å¢™è®°å½•/","link":"","permalink":"https://tanjunze.github.io/2018/05/17/Macä½¿ç”¨Androidä»£ç†ç¿»å¢™è®°å½•/","excerpt":"1ã€ä¸‹è½½Proxy Serverä»£ç†è½¯ä»¶2ã€åˆ›å»ºä¸€ä¸ªä»£ç†æœåŠ¡ï¼ˆProxy Serverï¼‰","text":"1ã€ä¸‹è½½Proxy Serverä»£ç†è½¯ä»¶2ã€åˆ›å»ºä¸€ä¸ªä»£ç†æœåŠ¡ï¼ˆProxy Serverï¼‰ 3ã€è®¾ç½®æœåŠ¡åå’Œç«¯å£å¹¶è¿”å›åç‚¹å‡»StartæŒ‰é’®å¯åŠ¨æœåŠ¡ 4ã€æ‰“å¼€FireFoxæµè§ˆå™¨å¹¶é…ç½®ç½‘ç»œä»£ç† 5ã€è®¾ç½®å¯åŠ¨ä»£ç†æœåŠ¡æ‰‹æœºçš„Ipå’Œä¸Šé¢å¡«å†™ç«¯å£ åˆ°æ­¤ FireFox å¯ä»¥ä½¿ç”¨æ‰‹æœºçš„ä»£ç†æœåŠ¡ï¼Œå¦‚æœæ‰‹æœºå·²ç»ç¿»å¢™äº†ï¼Œé‚£ä¹ˆFireFoxå°±å¯ä»¥å®ç°ç¿»å¢™ã€‚ åŒæ ·å¯ä»¥ä¸ºç”µè„‘è®¾ç½®ä»£ç†é…ç½®ï¼Œå®ç°å…¨å±€ä»£ç†ã€‚","categories":[{"name":"æ‚è®°","slug":"æ‚è®°","permalink":"https://tanjunze.github.io/categories/æ‚è®°/"}],"tags":[{"name":"ä»£ç†","slug":"ä»£ç†","permalink":"https://tanjunze.github.io/tags/ä»£ç†/"}]},{"title":"æœºå™¨å­¦ä¹ èµ„æ–™æ•´ç†","slug":"æœºå™¨å­¦ä¹ èµ„æ–™æ•´ç†","date":"2018-04-27T15:36:40.000Z","updated":"2018-10-26T05:52:14.126Z","comments":true,"path":"2018/04/27/æœºå™¨å­¦ä¹ èµ„æ–™æ•´ç†/","link":"","permalink":"https://tanjunze.github.io/2018/04/27/æœºå™¨å­¦ä¹ èµ„æ–™æ•´ç†/","excerpt":"æˆ‘çš„æœºå™¨å­¦ä¹ èµ„æ–™ï¼Œä¸ºäº†æ–¹ä¾¿æŸ¥è¯¢åŒæ­¥åˆ°ç¬”è®°ä¸­ã€‚ æœºå™¨å­¦ä¹ èµ„æ–™æ–‡æ¡£èµ„æ–™ æ·±åº¦å­¦ä¹ èµ„æ–™-Github ç¥ç»ç½‘ç»œå’Œæ·±åº¦å­¦ä¹ â€¢Michael Nielsen ç¥ç»ç½‘ç»œå’Œæ·±åº¦å­¦ä¹ â€¢Michael Nielsenï¼ˆç¿»è¯‘ï¼‰","text":"æˆ‘çš„æœºå™¨å­¦ä¹ èµ„æ–™ï¼Œä¸ºäº†æ–¹ä¾¿æŸ¥è¯¢åŒæ­¥åˆ°ç¬”è®°ä¸­ã€‚ æœºå™¨å­¦ä¹ èµ„æ–™æ–‡æ¡£èµ„æ–™ æ·±åº¦å­¦ä¹ èµ„æ–™-Github ç¥ç»ç½‘ç»œå’Œæ·±åº¦å­¦ä¹ â€¢Michael Nielsen ç¥ç»ç½‘ç»œå’Œæ·±åº¦å­¦ä¹ â€¢Michael Nielsenï¼ˆç¿»è¯‘ï¼‰ æ·±åº¦å­¦ä¹ â€¢Bengio æ·±åº¦å­¦ä¹ â€¢Bengioï¼ˆç¿»è¯‘ï¼‰ Tensorflowå®˜ç½‘-å›½å†… Tensorflowç¤¾åŒº-å›½å†… æ·±åº¦å­¦ä¹ èµ„æ–™æ•´ç†1-å›½å†… æ·±åº¦å­¦ä¹ è·¯çº¿å›¾ æ·±åº¦å­¦ä¹ åšæ–‡ æ·±åº¦å­¦ä¹ Javaæ¡†æ¶ åœ¨çº¿æ•™è‚² Googleæ·±åº¦å­¦ä¹ -Udacityè¯¾ç¨‹ Googleæœºå™¨å­¦ä¹ é€Ÿæˆè¯¾ç¨‹ æ·±åº¦å­¦ä¹ -Stanford-UFLDL æ·±åº¦å­¦ä¹ -Stanford-Tutorial äººå·¥æ™ºèƒ½å®è·µï¼šTensorflowç¬”è®°-æ…•è¯¾ç½‘ è«çƒ¦Python å·¥å…· python jupyter notebook æ¡†æ¶ Tensorflow Tensorflowï¼ˆæå®¢å­¦é™¢-ç¿»è¯‘ï¼‰ TensorLayer-ä¸­æ–‡ TensorLayer scikit-learn scikit-learn ç¿»è¯‘ caffe æˆ– caffe2 Keras keras ç¿»è¯‘ theano â€¦ å…¶ä»–æ–‡æ¡£ Deepmind ç§¯å·ç¥ç»ç½‘ç»œ-æ–¯å¦ç¦ Siraj Raval-Gitub-Youtube CS231nè¯¾ç¨‹-ç§¯å·ç½‘ç»œ CS231nè¯¾ç¨‹-ç§¯å·ç½‘ç»œ-ä¸­æ–‡ç¿»è¯‘ æ·±åº¦å­¦ä¹ -å¼€æºé¡¹ç›® éŸ³é¢‘åˆæˆ-Merlin éŸ³é¢‘åˆæˆ-Wavenet æ·±åº¦å­¦ä¹ -Udacity-Code æ— äººé©¾é©¶-BehavioralCloning) æ— äººé©¾é©¶-udacity-sim æ— äººé©¾é©¶-CSDNåšæ–‡ æœºå™¨å­¦ä¹ æ•°æ®é›† æœºå™¨å­¦ä¹ æ•°æ®é›†1-çŸ¥ä¹æé—® æœºå™¨å­¦ä¹ æ•°æ®é›†2-çŸ¥ä¹åšæ–‡","categories":[{"name":"èµ„æ–™","slug":"èµ„æ–™","permalink":"https://tanjunze.github.io/categories/èµ„æ–™/"}],"tags":[{"name":"æœºå™¨å­¦ä¹ ","slug":"æœºå™¨å­¦ä¹ ","permalink":"https://tanjunze.github.io/tags/æœºå™¨å­¦ä¹ /"},{"name":"TensorFlow","slug":"TensorFlow","permalink":"https://tanjunze.github.io/tags/TensorFlow/"}]},{"title":"Dart ä¹‹æ—…","slug":"Dartä¹‹æ—…","date":"2018-03-21T20:10:13.000Z","updated":"2019-02-26T07:18:18.066Z","comments":true,"path":"2018/03/22/Dartä¹‹æ—…/","link":"","permalink":"https://tanjunze.github.io/2018/03/22/Dartä¹‹æ—…/","excerpt":"","text":"dartpad ç‰¹æ€§ æ‰€æœ‰çš„å˜é‡å¼•ç”¨éƒ½æ˜¯å¯¹è±¡ï¼Œæ¯ä¸ªå¯¹è±¡éƒ½æ˜¯ä¸€ä¸ªç±»çš„å®ä¾‹ã€‚åœ¨Dart ä¸­ç”šè‡³ æ•°å­—ï¼ˆnumbersï¼‰ã€æ–¹æ³•ï¼ˆfunctionsï¼‰å’Œnulléƒ½æ˜¯å¯¹è±¡ã€‚æ‰€æœ‰å¯¹è±¡éƒ½ç»§æ‰¿Objectç±»ã€‚ å°½ç®¡Dart æ˜¯å¼ºç±»å‹è¯­è¨€ï¼Œä½†æ˜¯ç±»å‹å£°æ˜æ˜¯å¯é€‰çš„ï¼Œå› ä¸ºDartå¯ä»¥æ¨æ–­ç±»å‹ã€‚å¦‚æœè¦æ˜ç¡®è¯´æ˜ä¸éœ€è¦ä»»ä½•ç±»å‹ï¼Œ åˆ™ä½¿ç”¨ç‰¹æ®Šç±»å‹dynamicã€‚ Dart æ”¯æŒæ³›å‹ï¼Œä¾‹å¦‚List æˆ–Listã€‚ Dart æ”¯æŒé¡¶çº§æ–¹æ³•ï¼ˆå¦‚main()ï¼‰ï¼Œé™æ€æ–¹æ³•ï¼Œå®ä¾‹æ–¹æ³•å’Œæ–¹æ³•å†…æ–¹æ³•ï¼ˆåµŒå¥—å‡½æ•°å’Œæœ¬åœ°å‡½æ•°ï¼‰ã€‚ Dart æ”¯æŒé¡¶çº§å˜é‡ï¼Œä»¥åŠç±»ä¸­å®šä¹‰å˜é‡ï¼ˆé™æ€å˜é‡å’Œå®ä¾‹å˜é‡ï¼‰ã€‚å®ä¾‹å˜é‡æœ‰æ—¶ç§°ä¸ºå­—æ®µå’Œå±æ€§ã€‚ ä¸Javaä¸åŒçš„æ˜¯ï¼ŒDart ä¸­æ²¡æœ‰public,private,protectedå…³é”®å­—ï¼Œå¦‚æœæ ‡è¯†ç¬¦å·²ï¼ˆ_ï¼‰å¼€å¤´ï¼Œåˆ™å…¶æ˜¯ç§æœ‰çš„ã€‚ æ ‡è¯†ç¬¦å¯ä»¥ä»¥å­—æ¯æˆ–ä¸‹åˆ’çº¿ï¼ˆ_ï¼‰å¼€å¤´ï¼Œåè·Ÿè¿™äº›å­—ç¬¦åŠ æ•°å­—çš„ä»»æ„ç»„åˆã€‚ Dartæœ‰ä¸¤ä¸ªè¡¨è¾¾å¼ï¼ˆå…·æœ‰è¿è¡Œæ—¶å€¼ï¼‰å’Œ è¯­å¥ï¼ˆä¸å…·æœ‰ï¼‰ã€‚ä¾‹å¦‚ï¼Œæ¡ä»¶è¡¨è¾¾å¼ condition ? expr1 : expr2çš„å€¼ä¸ºexpr1æˆ–expr2ã€‚å°†å…¶ä¸if-elseè¯­å¥è¿›è¡Œæ¯”è¾ƒï¼Œè¯¥è¯­å¥æ²¡æœ‰ä»»ä½•å€¼ã€‚è¯­å¥é€šå¸¸åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªè¡¨è¾¾å¼ï¼Œä½†è¡¨è¾¾å¼ä¸èƒ½ç›´æ¥åŒ…å«è¯­å¥ã€‚ Dartå·¥å…·å¯ä»¥æŠ¥å‘Šä¸¤ç§é—®é¢˜ï¼šè­¦å‘Šå’Œé”™è¯¯ã€‚è­¦å‘Šåªæ˜¯è¡¨æ˜æ‚¨çš„ä»£ç å¯èƒ½æ— æ³•æ­£å¸¸å·¥ä½œï¼Œä½†å®ƒä»¬ä¸ä¼šé˜»æ­¢æ‚¨çš„ç¨‹åºæ‰§è¡Œã€‚é”™è¯¯å¯ä»¥æ˜¯ç¼–è¯‘æ—¶æˆ–è¿è¡Œæ—¶ã€‚ç¼–è¯‘æ—¶é”™è¯¯ä¼šé˜»æ­¢ä»£ç æ‰§è¡Œ; è¿è¡Œæ—¶é”™è¯¯å¯¼è‡´ ä»£ç æ‰§è¡Œæ—¶å¼•å‘å¼‚å¸¸ã€‚ å˜é‡12var name='Bob';dynamic name = 'Bob' ; é»˜è®¤å€¼æœªåˆå§‹åŒ–çš„å˜é‡é»˜è®¤ä¸ºnullã€‚ 1int lineCount ; assert ï¼ˆlineCount == null ï¼‰; final å’Œ constå¦‚æœä¸æ‰“ç®—ä¿®æ”¹ä¸€ä¸ªå˜é‡ï¼Œä½¿ç”¨finalæˆ–const,final ä¿®é¥°çš„å˜é‡åªèƒ½èµ‹å€¼ä¸€æ¬¡ï¼›ä¸€ä¸ªconstå˜é‡æ˜¯ç¼–è¯‘æ—¶å¸¸é‡ã€‚ï¼ˆconstå˜é‡åŒæ—¶ä¹Ÿæ˜¯finalå˜é‡ã€‚ï¼‰é¡¶çº§çš„final å˜é‡æˆ–ç±»ä¸­çš„finalå˜é‡åœ¨ç¬¬ä¸€æ¬¡ä½¿ç”¨æ—¶åˆå§‹åŒ–ã€‚ 12345678910final name = 'Bob'; final String nickname = 'Bobby';const bar = 1000000ï¼›const double atm = 1.01325 * bar;var foo = const [];final bar = const [];const baz = []; // ç­‰ä»·äº`const []`foo = [1, 2, 3]; // const []baz = [42]; // é”™è¯¯ ä¸èƒ½èµ‹å€¼ å†…ç½®ç±»å‹number123456789101112131415161718192021222324252627282930// int ç±»å‹var x = 1 ;var hex = 0xDEADBEEF ; // double ç±»å‹var y = 1.1 ; var exponents = 1.42e5 ; double z = 1 ; //ç›¸å½“äºdouble z = 1.0ã€‚ // ç±»å‹è½¬æ¢// String -&gt; intvar one = int.parse('1');assert(one == 1);// String -&gt; doublevar onePointOne = double.parse('1.1');assert(onePointOne == 1.1);// int -&gt; StringString oneAsString = 1.toString();assert(oneAsString == '1');// double -&gt; StringString piAsString = 3.14159.toStringAsFixed(2);assert(piAsString == '3.14');assert((3 &lt;&lt; 1) == 6); // 0011 &lt;&lt; 1 == 0110assert((3 &gt;&gt; 1) == 1); // 0011 &gt;&gt; 1 == 0001assert((3 | 4) == 7); // 0011 | 0100 == 0111const msPerSecond = 1000;const secondsUntilRetry = 5;const msUntilRetry = secondsUntilRetry * msPerSecond; StringDart String æ˜¯UTF-16ç¼–ç ï¼Œå¯ä»¥ä½¿ç”¨&#39;æˆ–&quot; 1234var s1 = 'Single quotes work well for string literals.';var s2 = \"Double quotes work just as well.\";var s3 = 'It\\'s easy to escape the string delimiter.';var s4 = \"It's even easier to use the other delimiter.\"; å­—ç¬¦ä¸²æ‹¼æ¥ 1234567891011121314151617181920212223242526272829303132333435var s = 'string interpolation';assert('Dart has $s, which is very handy.' == 'Dart has string interpolation, ' + 'which is very handy.'); // trueassert('That deserves all caps. ' + '$&#123;s.toUpperCase()&#125; is very handy!' == 'That deserves all caps. ' + 'STRING INTERPOLATION is very handy!'); // truevar s1 = 'String ' 'concatenation' \" works even over line breaks.\";assert(s1 == 'String concatenation works even over ' 'line breaks.'); // truevar s2 = 'The + operator ' + 'works, as well.';assert(s2 == 'The + operator works, as well.'); // truevar s = r'In a raw string, not even \\n gets special treatment.';// These work in a const string.const aConstNum = 0;const aConstBool = true;const aConstString = 'a constant string';// These do NOT work in a const string.var aNum = 0;var aBool = true;var aString = 'a string';const aConstList = [1, 2, 3];const validConstString = '$aConstNum $aConstBool $aConstString';// const invalidConstString = '$aNum $aBool $aString $aConstList'; Booleans123456789101112131415// Check for an empty string.var fullName = '';assert(fullName.isEmpty);// Check for zero.var hitPoints = 0;assert(hitPoints &lt;= 0);// Check for null.var unicorn;assert(unicorn == null);// Check for NaN.var iMeantToDoThis = 0 / 0;assert(iMeantToDoThis.isNaN); List12345678910var list = [1, 2, 3];var list = [1, 2, 3];assert(list.length == 3);assert(list[1] == 2);list[1] = 1;assert(list[1] == 1);var constantList = const [1, 2, 3];// constantList[1] = 1; // Uncommenting this causes an error. Maps12345678910111213141516171819202122232425262728293031323334353637383940414243var gifts = &#123; // Key: Value 'first': 'partridge', 'second': 'turtledoves', 'fifth': 'golden rings'&#125;;var nobleGases = &#123; 2: 'helium', 10: 'neon', 18: 'argon',&#125;;var gifts = Map();gifts['first'] = 'partridge';gifts['second'] = 'turtledoves';gifts['fifth'] = 'golden rings';var nobleGases = Map();nobleGases[2] = 'helium';nobleGases[10] = 'neon';nobleGases[18] = 'argon';var gifts = &#123;'first': 'partridge'&#125;;gifts['fourth'] = 'calling birds'; // Add a key-value pairvar gifts = &#123;'first': 'partridge'&#125;;assert(gifts['first'] == 'partridge');var gifts = &#123;'first': 'partridge'&#125;;assert(gifts['fifth'] == null);var gifts = &#123;'first': 'partridge'&#125;;gifts['fourth'] = 'calling birds';assert(gifts.length == 2);// truefinal constantMap = const &#123; 2: 'helium', 10: 'neon', 18: 'argon',&#125;;// constantMap[2] = 'Helium'; // Uncommenting this causes an error. Runesè¡¨è¾¾Unicodeä»£ç çš„å¸¸ç”¨æ–¹æ³•æ˜¯ \\uXXXXï¼Œå…¶ä¸­XXXXæ˜¯4ä½åå…­è¿›åˆ¶å€¼ã€‚ä¾‹å¦‚ï¼Œå¿ƒè„ï¼ˆâ™¥ï¼‰æ˜¯\\u2665ã€‚è¦æ˜¯å¤šäºæˆ–å°‘äº4ä¸ªåå…­è¿›åˆ¶æ•°å­—ï¼Œå°†å€¼æ”¾åœ¨å¤§æ‹¬å·ä¸­ã€‚ä¾‹å¦‚ï¼Œç¬‘è¡¨æƒ…ç¬¦å·ï¼ˆğŸ˜†ï¼‰æ˜¯\\u{1f600}ã€‚ 1234567891011121314main() &#123; var clapping = '\\u&#123;1f44f&#125;'; print(clapping); print(clapping.codeUnits); print(clapping.runes.toList()); // ğŸ‘ //[55357, 56399] //[128079] Runes input = new Runes( '\\u2665 \\u&#123;1f605&#125; \\u&#123;1f60e&#125; \\u&#123;1f47b&#125; \\u&#123;1f596&#125; \\u&#123;1f44d&#125;'); print(new String.fromCharCodes(input)); // â™¥ ğŸ˜… ğŸ˜ ğŸ‘» ğŸ–– ğŸ‘&#125; æ–¹æ³•1234bool isNoble(int atomicNumber) &#123; return _nobleGases[atomicNumber] != null;&#125;bool isNoble(int atomicNumber) =&gt; _nobleGases[atomicNumber] != null; å¯é€‰å‚æ•°å¯é€‰å‚æ•°å¯ä»¥æ˜¯å‘½åå‚æ•°æˆ–è€…åŸºäºä½ç½®çš„å‚æ•°ï¼Œä½†æ˜¯è¿™ä¸¤ç§å‚æ•°ä¸èƒ½åŒæ—¶å½“åšå¯é€‰å‚æ•°ã€‚ Optional named parametersï¼ˆå¯é€‰å‘½åå‚æ•°ï¼‰è°ƒç”¨å‡½æ•°æ—¶ï¼Œå¯ä»¥ä½¿ç”¨æŒ‡å®šå‘½åå‚æ•° ã€‚ä¾‹å¦‚ï¼š*paramName*: *value* 1enableFlags ï¼ˆbold ï¼štrue ï¼Œhidden ï¼šfalse ï¼‰; å®šä¹‰å‡½æ•°æ—¶ï¼Œç”¨äº {param1, param2, â€¦}æŒ‡å®šå‘½åå‚æ•°ã€‚ 1void enableFlags(&#123;bool bold, bool hidden&#125;) &#123;...&#125; Optional positional parametersï¼ˆå¯é€‰ä½ç½®å‚æ•°ï¼‰æŠŠä¸€äº›æ–¹æ³•çš„å‚æ•°æ”¾åˆ° [] ä¸­å°±å˜æˆå¯é€‰ ä½ç½®å‚æ•°äº†ï¼š 1234567891011String say(String from, String msg, [String device]) &#123; var result = '$from says $msg'; if (device != null) &#123; result = '$result with a $device'; &#125; return result;&#125;assert(say('Bob', 'Howdy') == 'Bob says Howdy'); //trueassert(say('Bob', 'Howdy', 'smoke signal') == 'Bob says Howdy with a smoke signal');// true Default parameter valuesï¼ˆé»˜è®¤å‚æ•°å€¼ï¼‰12345678910111213141516171819202122232425262728293031/// Sets the [bold] and [hidden] flags ...void enableFlags(&#123;bool bold = false, bool hidden = false&#125;) &#123;...&#125;// bold will be true; hidden will be false.enableFlags(bold: true);String say(String from, String msg, [String device = 'carrier pigeon', String mood]) &#123; var result = '$from says $msg'; if (device != null) &#123; result = '$result with a $device'; &#125; if (mood != null) &#123; result = '$result (in a $mood mood)'; &#125; return result;&#125;assert(say('Bob', 'Howdy') == 'Bob says Howdy with a carrier pigeon');void doStuff( &#123;List&lt;int&gt; list = const [1, 2, 3], Map&lt;String, String&gt; gifts = const &#123; 'first': 'paper', 'second': 'cotton', 'third': 'leather' &#125;&#125;) &#123; print('list: $list'); print('gifts: $gifts');&#125;","categories":[{"name":"Dart","slug":"Dart","permalink":"https://tanjunze.github.io/categories/Dart/"}],"tags":[{"name":"Dart","slug":"Dart","permalink":"https://tanjunze.github.io/tags/Dart/"}]},{"title":"Android AIDL ä½¿ç”¨","slug":"Android AIDL ä¸€  åŸºæœ¬ä½¿ç”¨ ","date":"2018-02-25T21:13:43.000Z","updated":"2019-02-26T07:22:00.361Z","comments":true,"path":"2018/02/26/Android AIDL ä¸€  åŸºæœ¬ä½¿ç”¨ /","link":"","permalink":"https://tanjunze.github.io/2018/02/26/Android AIDL ä¸€  åŸºæœ¬ä½¿ç”¨ /","excerpt":"","text":"Android AIDLAIDLï¼šAndroid Interface Definition Language ã€‚ç”¨äºIPC ï¼ˆInter-Process Communicationï¼Œè¿›ç¨‹é—´é€šä¿¡ï¼‰ï¼Œå¦‚ å¤šåº”ç”¨é—´çš„é€šä¿¡ï¼Œåº”ç”¨ä¸­å­˜åœ¨å¤šè¿›ç¨‹é—´çš„é€šä¿¡ç­‰åœºæ™¯ã€‚ åªæœ‰å…è®¸ä¸åŒåº”ç”¨çš„å®¢æˆ·ç«¯ç”¨ IPC æ–¹å¼è®¿é—®æœåŠ¡ï¼Œå¹¶ä¸”æƒ³è¦åœ¨æœåŠ¡ä¸­å¤„ç†å¤šçº¿ç¨‹æ—¶ï¼Œæ‰æœ‰å¿…è¦ä½¿ç”¨ AIDLã€‚ å¦‚æœæ‚¨ä¸éœ€è¦æ‰§è¡Œè·¨è¶Šä¸åŒåº”ç”¨çš„å¹¶å‘ IPCï¼Œå°±åº”è¯¥é€šè¿‡å®ç°ä¸€ä¸ª Binder åˆ›å»ºæ¥å£ï¼›æˆ–è€…ï¼Œå¦‚æœæ‚¨æƒ³æ‰§è¡Œ IPCï¼Œä½†æ ¹æœ¬ä¸éœ€è¦å¤„ç†å¤šçº¿ç¨‹ï¼Œåˆ™ä½¿ç”¨ Messenger ç±»æ¥å®ç°æ¥å£ ä¸€ã€å®šä¹‰AIDLæ¥å£1ã€åˆ›å»º .aidl æ–‡ä»¶åœ¨src æ–‡ä»¶å¤¹å†…åˆ›å»ºIRemoteService.aidl æ–‡ä»¶ï¼Œå¦‚ä¸‹ã€‚ç¼–è¯‘å·¥ç¨‹ï¼Œæ­¤æ—¶ä¼šåœ¨åˆ›å»ºç›¸åŒåç§°çš„ IRemoteService.javaæ–‡ä»¶ã€‚ 12345678910111213141516// IRemoteService.aidlpackage com.example.android;// Declare any non-default types here with import statements/** Example service interface */interface IRemoteService &#123; /** Request the process ID of this service, to do evil things with it. */ int getPid(); /** Demonstrates some basic types that you can use as parameters * and return values in AIDL. */ void basicTypes(int anInt, long aLong, boolean aBoolean, float aFloat, double aDouble, String aString);&#125; 2ã€å®ç°.aidlç”Ÿæˆçš„.javaæ¥å£123456789private final IRemoteService.Stub mBinder = new IRemoteService.Stub() &#123; public int getPid()&#123; return Process.myPid(); &#125; public void basicTypes(int anInt, long aLong, boolean aBoolean, float aFloat, double aDouble, String aString) &#123; // Does nothing &#125;&#125;; 3ã€å…¬å¼€æ¥å£12345678910111213141516171819202122public class RemoteService extends Service &#123; @Override public void onCreate() &#123; super.onCreate(); &#125; @Override public IBinder onBind(Intent intent) &#123; // Return the interface return mBinder; &#125; private final IRemoteService.Stub mBinder = new IRemoteService.Stub() &#123; public int getPid()&#123; return Process.myPid(); &#125; public void basicTypes(int anInt, long aLong, boolean aBoolean, float aFloat, double aDouble, String aString) &#123; // Does nothing &#125; &#125;;&#125; äºŒã€é€šè¿‡IPC ä¼ é€’å¯¹è±¡IPC ä¸­ä¼ é€’çš„å¯¹è±¡éœ€è¦å®ç° Parcelable æ¥å£ ï¼Œä¾‹å¦‚ Rect.aidl æ–‡ä»¶å¯åˆ›å»ºä¸€ä¸ªå¯æ‰“åŒ…çš„ Rect ç±»ï¼š 12345package android.graphics;// Declare Rect so AIDL can find it and knows that it implements// the parcelable protocol.parcelable Rect; 1234567891011121314151617181920212223242526272829303132333435363738394041import android.os.Parcel;import android.os.Parcelable;public final class Rect implements Parcelable &#123; public int left; public int top; public int right; public int bottom; public static final Parcelable.Creator&lt;Rect&gt; CREATOR = newParcelable.Creator&lt;Rect&gt;() &#123; public Rect createFromParcel(Parcel in) &#123; return new Rect(in); &#125; public Rect[] newArray(int size) &#123; return new Rect[size]; &#125; &#125;; public Rect() &#123; &#125; private Rect(Parcel in) &#123; readFromParcel(in); &#125; public void writeToParcel(Parcel out) &#123; out.writeInt(left); out.writeInt(top); out.writeInt(right); out.writeInt(bottom); &#125; public void readFromParcel(Parcel in) &#123; left = in.readInt(); top = in.readInt(); right = in.readInt(); bottom = in.readInt(); &#125;&#125; ä¸‰ã€ è°ƒç”¨ IPC æ–¹æ³•123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202public static class Binding extends Activity &#123; /** The primary interface we will be calling on the service. */ IRemoteService mService = null; /** Another interface we use on the service. */ ISecondary mSecondaryService = null; Button mKillButton; TextView mCallbackText; private boolean mIsBound; /** * Standard initialization of this activity. Set up the UI, then wait * for the user to poke it before doing anything. */ @Override protected void onCreate(Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); setContentView(R.layout.remote_service_binding); // Watch for button clicks. Button button = (Button)findViewById(R.id.bind); button.setOnClickListener(mBindListener); button = (Button)findViewById(R.id.unbind); button.setOnClickListener(mUnbindListener); mKillButton = (Button)findViewById(R.id.kill); mKillButton.setOnClickListener(mKillListener); mKillButton.setEnabled(false); mCallbackText = (TextView)findViewById(R.id.callback); mCallbackText.setText(\"Not attached.\"); &#125; /** * Class for interacting with the main interface of the service. */ private ServiceConnection mConnection = new ServiceConnection() &#123; public void onServiceConnected(ComponentName className, IBinder service) &#123; // This is called when the connection with the service has been // established, giving us the service object we can use to // interact with the service. We are communicating with our // service through an IDL interface, so get a client-side // representation of that from the raw service object. mService = IRemoteService.Stub.asInterface(service); mKillButton.setEnabled(true); mCallbackText.setText(\"Attached.\"); // We want to monitor the service for as long as we are // connected to it. try &#123; mService.registerCallback(mCallback); &#125; catch (RemoteException e) &#123; // In this case the service has crashed before we could even // do anything with it; we can count on soon being // disconnected (and then reconnected if it can be restarted) // so there is no need to do anything here. &#125; // As part of the sample, tell the user what happened. Toast.makeText(Binding.this, R.string.remote_service_connected, Toast.LENGTH_SHORT).show(); &#125; public void onServiceDisconnected(ComponentName className) &#123; // This is called when the connection with the service has been // unexpectedly disconnected -- that is, its process crashed. mService = null; mKillButton.setEnabled(false); mCallbackText.setText(\"Disconnected.\"); // As part of the sample, tell the user what happened. Toast.makeText(Binding.this, R.string.remote_service_disconnected, Toast.LENGTH_SHORT).show(); &#125; &#125;; /** * Class for interacting with the secondary interface of the service. */ private ServiceConnection mSecondaryConnection = new ServiceConnection() &#123; public void onServiceConnected(ComponentName className, IBinder service) &#123; // Connecting to a secondary interface is the same as any // other interface. mSecondaryService = ISecondary.Stub.asInterface(service); mKillButton.setEnabled(true); &#125; public void onServiceDisconnected(ComponentName className) &#123; mSecondaryService = null; mKillButton.setEnabled(false); &#125; &#125;; private OnClickListener mBindListener = new OnClickListener() &#123; public void onClick(View v) &#123; // Establish a couple connections with the service, binding // by interface names. This allows other applications to be // installed that replace the remote service by implementing // the same interface. Intent intent = new Intent(Binding.this, RemoteService.class); intent.setAction(IRemoteService.class.getName()); bindService(intent, mConnection, Context.BIND_AUTO_CREATE); intent.setAction(ISecondary.class.getName()); bindService(intent, mSecondaryConnection, Context.BIND_AUTO_CREATE); mIsBound = true; mCallbackText.setText(\"Binding.\"); &#125; &#125;; private OnClickListener mUnbindListener = new OnClickListener() &#123; public void onClick(View v) &#123; if (mIsBound) &#123; // If we have received the service, and hence registered with // it, then now is the time to unregister. if (mService != null) &#123; try &#123; mService.unregisterCallback(mCallback); &#125; catch (RemoteException e) &#123; // There is nothing special we need to do if the service // has crashed. &#125; &#125; // Detach our existing connection. unbindService(mConnection); unbindService(mSecondaryConnection); mKillButton.setEnabled(false); mIsBound = false; mCallbackText.setText(\"Unbinding.\"); &#125; &#125; &#125;; private OnClickListener mKillListener = new OnClickListener() &#123; public void onClick(View v) &#123; // To kill the process hosting our service, we need to know its // PID. Conveniently our service has a call that will return // to us that information. if (mSecondaryService != null) &#123; try &#123; int pid = mSecondaryService.getPid(); // Note that, though this API allows us to request to // kill any process based on its PID, the kernel will // still impose standard restrictions on which PIDs you // are actually able to kill. Typically this means only // the process running your application and any additional // processes created by that app as shown here; packages // sharing a common UID will also be able to kill each // other's processes. Process.killProcess(pid); mCallbackText.setText(\"Killed service process.\"); &#125; catch (RemoteException ex) &#123; // Recover gracefully from the process hosting the // server dying. // Just for purposes of the sample, put up a notification. Toast.makeText(Binding.this, R.string.remote_call_failed, Toast.LENGTH_SHORT).show(); &#125; &#125; &#125; &#125;; // ---------------------------------------------------------------------- // Code showing how to deal with callbacks. // ---------------------------------------------------------------------- /** * This implementation is used to receive callbacks from the remote * service. */ private IRemoteServiceCallback mCallback = new IRemoteServiceCallback.Stub() &#123; /** * This is called by the remote service regularly to tell us about * new values. Note that IPC calls are dispatched through a thread * pool running in each process, so the code executing here will * NOT be running in our main thread like most other things -- so, * to update the UI, we need to use a Handler to hop over there. */ public void valueChanged(int value) &#123; mHandler.sendMessage(mHandler.obtainMessage(BUMP_MSG, value, 0)); &#125; &#125;; private static final int BUMP_MSG = 1; private Handler mHandler = new Handler() &#123; @Override public void handleMessage(Message msg) &#123; switch (msg.what) &#123; case BUMP_MSG: mCallbackText.setText(\"Received from service: \" + msg.arg1); break; default: super.handleMessage(msg); &#125; &#125; &#125;;&#125; å‚è€ƒï¼š [1]ã€Android AIDL","categories":[{"name":"Android","slug":"Android","permalink":"https://tanjunze.github.io/categories/Android/"}],"tags":[{"name":"Android","slug":"Android","permalink":"https://tanjunze.github.io/tags/Android/"}]},{"title":"Android ContentProvider","slug":"Android ContentProvider","date":"2018-01-25T23:27:04.000Z","updated":"2019-02-26T07:21:33.499Z","comments":true,"path":"2018/01/26/Android ContentProvider/","link":"","permalink":"https://tanjunze.github.io/2018/01/26/Android ContentProvider/","excerpt":"","text":"Android ContentProviderContentProviderï¼ˆå†…å®¹æä¾›è€…ï¼‰ä½œä¸ºAndroid å››å¤§ç»„ä»¶ä¹‹ä¸€ä¸»è¦ç”¨äºä¸ºä¸ºå…¶ä»–åº”ç”¨æä¾›å¤æ‚çš„æ•°æ®æˆ–æ–‡ä»¶ã€‚ å†…å®¹ URIæ˜¯ContentProvider çš„å”¯ä¸€è¡¨ç¤º,app æ ¹æ®æ‚¨ å†…å®¹uri æŸ¥è¯¢æ“ä½œæ•°æ®ã€‚å†…å®¹uriçš„ç»“æ„å¦‚ä¸‹ï¼š 1content://authority/tablename/id æ ‡è¯† è¯´æ˜ content ContentProvider å‰ç¼€æ ‡è¯† authority æˆæƒï¼šæŒ‡å®šå†…å®¹æä¾›è€…çš„åç§°ï¼Œå¦‚ï¼šcom.hello.provider tablename éœ€è¦è®¿é—®æ•°æ®çš„åç§°ï¼Œä¸€èˆ¬ä¸ºæ•°æ®åº“è¡¨å å¦‚ï¼šuser id æ•°æ®è¡¨ä¸‹ id è¡¨ç¤ºçš„è¡Œ,å¦‚ï¼š1 ç¤ºä¾‹ï¼šcontent://com.hello.provider/user/1 è®¿é—® com.hello.provideræ•°æ®user è¡¨ä¸­1è¡¨ç¤ºçš„è¡Œã€‚ å†…å®¹url çš„é€šé…ç¬¦ â€‹ *ï¼šåŒ¹é…ç”±ä»»æ„é•¿åº¦çš„ä»»ä½•æœ‰æ•ˆå­—ç¬¦ç»„æˆçš„å­—ç¬¦ä¸² â€‹ #ï¼šåŒ¹é…ç”±ä»»æ„é•¿åº¦çš„æ•°å­—å­—ç¬¦ç»„æˆçš„å­—ç¬¦ä¸² åˆ›å»ºå†…å®¹æä¾›è€…1ã€å®ç°ContentProvider123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117public class BookProvider extends ContentProvider &#123; private static final String TAG = \"BookProvider\"; public static final String AUTHORITY = \"com.ryg.chapter_2.book.provider\"; public static final Uri BOOK_CONTENT_URI = Uri.parse(\"content://\" + AUTHORITY + \"/book\"); public static final Uri USER_CONTENT_URI = Uri.parse(\"content://\" + AUTHORITY + \"/user\"); public static final int BOOK_URI_CODE = 0; public static final int USER_URI_CODE = 1; private static final UriMatcher sUriMatcher = new UriMatcher( UriMatcher.NO_MATCH); static &#123; sUriMatcher.addURI(AUTHORITY, \"book\", BOOK_URI_CODE); sUriMatcher.addURI(AUTHORITY, \"user\", USER_URI_CODE); &#125; private Context mContext; private SQLiteDatabase mDb; @Override public boolean onCreate() &#123; Log.d(TAG, \"onCreate, current thread:\" + Thread.currentThread().getName()); mContext = getContext(); initProviderData(); return true; &#125; private void initProviderData() &#123; mDb = new DbOpenHelper(mContext).getWritableDatabase(); mDb.execSQL(\"delete from \" + DbOpenHelper.BOOK_TABLE_NAME); mDb.execSQL(\"delete from \" + DbOpenHelper.USER_TALBE_NAME); mDb.execSQL(\"insert into book values(3,'Android');\"); mDb.execSQL(\"insert into book values(4,'Ios');\"); mDb.execSQL(\"insert into book values(5,'Html5');\"); mDb.execSQL(\"insert into user values(1,'jake',1);\"); mDb.execSQL(\"insert into user values(2,'jasmine',0);\"); &#125; @Override public Cursor query(Uri uri, String[] projection, String selection, String[] selectionArgs, String sortOrder) &#123; Log.d(TAG, \"query, current thread:\" + Thread.currentThread().getName()); String table = getTableName(uri); if (table == null) &#123; throw new IllegalArgumentException(\"Unsupported URI: \" + uri); &#125; return mDb.query(table, projection, selection, selectionArgs, null, null, sortOrder, null); &#125; @Override public String getType(Uri uri) &#123; Log.d(TAG, \"getType\"); return null; &#125; @Override public Uri insert(Uri uri, ContentValues values) &#123; Log.d(TAG, \"insert\"); String table = getTableName(uri); if (table == null) &#123; throw new IllegalArgumentException(\"Unsupported URI: \" + uri); &#125; mDb.insert(table, null, values); mContext.getContentResolver().notifyChange(uri, null); return uri; &#125; @Override public int delete(Uri uri, String selection, String[] selectionArgs) &#123; Log.d(TAG, \"delete\"); String table = getTableName(uri); if (table == null) &#123; throw new IllegalArgumentException(\"Unsupported URI: \" + uri); &#125; int count = mDb.delete(table, selection, selectionArgs); if (count &gt; 0) &#123; getContext().getContentResolver().notifyChange(uri, null); &#125; return count; &#125; @Override public int update(Uri uri, ContentValues values, String selection, String[] selectionArgs) &#123; Log.d(TAG, \"update\"); String table = getTableName(uri); if (table == null) &#123; throw new IllegalArgumentException(\"Unsupported URI: \" + uri); &#125; int row = mDb.update(table, values, selection, selectionArgs); if (row &gt; 0) &#123; getContext().getContentResolver().notifyChange(uri, null); &#125; return row; &#125; private String getTableName(Uri uri) &#123; String tableName = null; switch (sUriMatcher.match(uri)) &#123; case BOOK_URI_CODE: tableName = DbOpenHelper.BOOK_TABLE_NAME; break; case USER_URI_CODE: tableName = DbOpenHelper.USER_TALBE_NAME; break; default:break; &#125; return tableName; &#125;&#125; æ³¨å†Œ ContentProvider 1234&lt;provider android:name=\".provider.BookProvider\" android:authorities=\"com.ryg.chapter_2.book.provider\" &gt;&lt;/provider&gt; 2ã€è°ƒç”¨ContentProvider12345678910111213141516171819202122232425262728293031323334public class ProviderActivity extends Activity &#123; private static final String TAG = \"ProviderActivity\"; @Override protected void onCreate(Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); setContentView(R.layout.activity_provider); Uri bookUri = Uri.parse(\"content://com.ryg.chapter_2.book.provider/book\"); ContentValues values = new ContentValues(); values.put(\"_id\", 6); values.put(\"name\", \"ç¨‹åºè®¾è®¡çš„è‰ºæœ¯\"); getContentResolver().insert(bookUri, values); Cursor bookCursor = getContentResolver().query(bookUri, new String[]&#123;\"_id\", \"name\"&#125;, null, null, null); while (bookCursor.moveToNext()) &#123; Book book = new Book(); book.bookId = bookCursor.getInt(0); book.bookName = bookCursor.getString(1); Log.d(TAG, \"query book:\" + book.toString()); &#125; bookCursor.close(); Uri userUri = Uri.parse(\"content://com.ryg.chapter_2.book.provider/user\"); Cursor userCursor = getContentResolver().query(userUri, new String[]&#123;\"_id\", \"name\", \"sex\"&#125;, null, null, null); while (userCursor.moveToNext()) &#123; User user = new User(); user.userId = userCursor.getInt(0); user.userName = userCursor.getString(1); user.isMale = userCursor.getInt(2) == 1; Log.d(TAG, \"query user:\" + user.toString()); &#125; userCursor.close(); &#125;&#125; 3ã€æ·»åŠ è‡ªå®šä¹‰æƒé™ContentProvider å¯ä»¥è‡ªå®šä¹‰æƒé™æ¥é™åˆ¶ æ•°æ®å…±äº«çš„åº”ç”¨ï¼Œ è‡ªå®šä¹‰æƒé™ï¼šhttps://developer.android.com/guide/topics/manifest/permission-element.html å‚è€ƒï¼š [1]ã€Android ContentProvider [2]ã€Android Permission [3]ã€ã€ŠAndroidå¼€å‘è‰ºæœ¯æ¢ç´¢ã€‹","categories":[{"name":"Android","slug":"Android","permalink":"https://tanjunze.github.io/categories/Android/"}],"tags":[{"name":"Android","slug":"Android","permalink":"https://tanjunze.github.io/tags/Android/"}]},{"title":"Android FragmentPageAdapter ä¸ FragmentStatePageAdapter","slug":"FragmentPageAdapter","date":"2017-12-04T22:30:59.000Z","updated":"2019-02-26T06:32:10.348Z","comments":true,"path":"2017/12/05/FragmentPageAdapter/","link":"","permalink":"https://tanjunze.github.io/2017/12/05/FragmentPageAdapter/","excerpt":"","text":"FragmentPageAdapter ä¸ FragmentStatePageAdapteråœ¨é¡¹ç›®ä¸­éœ€è¦åŠ¨æ€æ›´æ–°Tabï¼Œäºæ˜¯å¯¹äºé€‰æ‹©FragmentPageAdapterå’ŒFragmentStatePageAdapteræœ‰ç‚¹å›°æƒ‘ã€‚å‡ ç»å‘¨è½¬æ€»ç®—ç†è§£äº†ï¼Œè¿™é‡Œè®°å½•ä¸€ä¸‹ã€‚å½“ç„¶æœ‰é—®é¢˜æ˜¯çš„æ—¶å€™è¿˜æ˜¯çœ‹å®˜æ–¹æ–‡æ¡£æ¯”è¾ƒè¯¦ç»†ã€‚ FragmentPageAdapterå®˜ç½‘ï¼šhttps://developer.android.com/reference/android/support/v4/app/FragmentPagerAdapter.html æ–‡æ¡£ä¸­æè¿°äº†FragmentPageAdapterä¸­æ¯ä¸€ä¸ªFragmentéƒ½å°†ä¿å­˜åœ¨å†…å­˜ï¼Œæ‰€ä»¥FragmentPagerAdapteré€‚åˆé‚£äº›ç›¸æ•°é‡ç›¸å¯¹è¾ƒå°‘ï¼Œé™æ€çš„é¡µé¢ã€‚å¯¹äºå­˜åœ¨å¤šä¸ªfragmentçš„æƒ…å†µï¼Œä¸€èˆ¬æ¨èä½¿ç”¨FragmentStatePagerAdapterã€‚ ç¤ºä¾‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103public class FragmentPagerSupport extends FragmentActivity &#123; static final int NUM_ITEMS = 10; MyAdapter mAdapter; ViewPager mPager; @Override protected void onCreate(Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); setContentView(R.layout.fragment_pager); mAdapter = new MyAdapter(getSupportFragmentManager()); mPager = (ViewPager)findViewById(R.id.pager); mPager.setAdapter(mAdapter); // Watch for button clicks. Button button = (Button)findViewById(R.id.goto_first); button.setOnClickListener(new OnClickListener() &#123; @Override public void onClick(View v) &#123; mPager.setCurrentItem(0); &#125; &#125;); button = (Button)findViewById(R.id.goto_last); button.setOnClickListener(new OnClickListener() &#123; @Override public void onClick(View v) &#123; mPager.setCurrentItem(NUM_ITEMS-1); &#125; &#125;); &#125; public static class MyAdapter extends FragmentPagerAdapter &#123; public MyAdapter(FragmentManager fm) &#123; super(fm); &#125; @Override public int getCount() &#123; return NUM_ITEMS; &#125; @Override public Fragment getItem(int position) &#123; return ArrayListFragment.newInstance(position); &#125; &#125; public static class ArrayListFragment extends ListFragment &#123; int mNum; /** * Create a new instance of CountingFragment, providing \"num\" * as an argument. */ static ArrayListFragment newInstance(int num) &#123; ArrayListFragment f = new ArrayListFragment(); // Supply num input as an argument. Bundle args = new Bundle(); args.putInt(\"num\", num); f.setArguments(args); return f; &#125; /** * When creating, retrieve this instance's number from its arguments. */ @Override public void onCreate(Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); mNum = getArguments() != null ? getArguments().getInt(\"num\") : 1; &#125; /** * The Fragment's UI is just a simple text view showing its * instance number. */ @Override public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) &#123; View v = inflater.inflate(R.layout.fragment_pager_list, container, false); View tv = v.findViewById(R.id.text); ((TextView)tv).setText(\"Fragment #\" + mNum); return v; &#125; @Override public void onActivityCreated(Bundle savedInstanceState) &#123; super.onActivityCreated(savedInstanceState); setListAdapter(new ArrayAdapter&lt;String&gt;(getActivity(), android.R.layout.simple_list_item_1, Cheeses.sCheeseStrings)); &#125; @Override public void onListItemClick(ListView l, View v, int position, long id) &#123; Log.i(\"FragmentList\", \"Item clicked: \" + id); &#125; &#125;&#125; R.layout.fragment_pager 1234567891011121314151617181920212223242526&lt;LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\" android:orientation=\"vertical\" android:padding=\"4dip\" android:gravity=\"center_horizontal\" android:layout_width=\"match_parent\" android:layout_height=\"match_parent\"&gt; &lt;android.support.v4.view.ViewPager android:id=\"@+id/pager\" android:layout_width=\"match_parent\" android:layout_height=\"0px\" android:layout_weight=\"1\"&gt; &lt;/android.support.v4.view.ViewPager&gt; &lt;LinearLayout android:orientation=\"horizontal\" android:gravity=\"center\" android:measureWithLargestChild=\"true\" android:layout_width=\"match_parent\" android:layout_height=\"wrap_content\" android:layout_weight=\"0\"&gt; &lt;Button android:id=\"@+id/goto_first\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:text=\"@string/first\"&gt; &lt;/Button&gt; &lt;Button android:id=\"@+id/goto_last\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:text=\"@string/last\"&gt; &lt;/Button&gt; &lt;/LinearLayout&gt;&lt;/LinearLayout&gt; R.layout.fragment_pager_list 123456789101112131415161718192021222324252627282930313233343536&lt;LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\" android:orientation=\"vertical\" android:layout_width=\"match_parent\" android:layout_height=\"match_parent\" android:background=\"@android:drawable/gallery_thumb\"&gt; &lt;TextView android:id=\"@+id/text\" android:layout_width=\"match_parent\" android:layout_height=\"wrap_content\" android:gravity=\"center_vertical|center_horizontal\" android:textAppearance=\"?android:attr/textAppearanceMedium\" android:text=\"@string/hello_world\"/&gt; &lt;!-- The frame layout is here since we will be showing either the empty view or the list view. --&gt; &lt;FrameLayout android:layout_width=\"match_parent\" android:layout_height=\"0dip\" android:layout_weight=\"1\" &gt; &lt;!-- Here is the list. Since we are using a ListActivity, we have to call it \"@android:id/list\" so ListActivity will find it --&gt; &lt;ListView android:id=\"@android:id/list\" android:layout_width=\"match_parent\" android:layout_height=\"match_parent\" android:drawSelectorOnTop=\"false\"/&gt; &lt;!-- Here is the view to show if the list is emtpy --&gt; &lt;TextView android:id=\"@android:id/empty\" android:layout_width=\"match_parent\" android:layout_height=\"match_parent\" android:textAppearance=\"?android:attr/textAppearanceMedium\" android:text=\"No items.\"/&gt; &lt;/FrameLayout&gt;&lt;/LinearLayout&gt; FragmentStatePageAdapterå®˜ç½‘ï¼šhttps://developer.android.com/reference/android/support/v4/app/FragmentPagerAdapter.html FragmentStatePageAdapter åœ¨é€‚åˆåƒlistViewå¤§é‡pageçš„åœºæ™¯ã€‚å½“pageä¸æ˜¾ç¤ºçš„æ—¶å€™fragmentå¯èƒ½è¢«é”€æ¯ï¼Œæ­¤æ—¶fragmentçš„çŠ¶æ€ä¼šä¿å­˜èµ·æ¥ï¼Œç›¸æ¯”FragmentPageAdapterå ç”¨å†…å­˜è¾ƒå°‘ã€‚ä½†æ˜¯åœ¨ page åˆ‡æ¢æ—¶fragment å†æ¬¡åˆ›å»ºä¼šäº§ç”Ÿé¢å¤–çš„å¼€é”€ã€‚ 123456789101112131415public static class MyAdapter extends FragmentStatePagerAdapter &#123; public MyAdapter(FragmentManager fm) &#123; super(fm); &#125; @Override public int getCount() &#123; return NUM_ITEMS; &#125; @Override public Fragment getItem(int position) &#123; return ArrayListFragment.newInstance(position); &#125; &#125;","categories":[{"name":"Android","slug":"Android","permalink":"https://tanjunze.github.io/categories/Android/"}],"tags":[{"name":"Android","slug":"Android","permalink":"https://tanjunze.github.io/tags/Android/"}]},{"title":"Android Handle æ¶ˆæ¯æœºåˆ¶","slug":"Android handle æ¶ˆæ¯æœºåˆ¶","date":"2017-12-01T21:00:54.000Z","updated":"2019-02-26T07:20:58.317Z","comments":true,"path":"2017/12/02/Android handle æ¶ˆæ¯æœºåˆ¶/","link":"","permalink":"https://tanjunze.github.io/2017/12/02/Android handle æ¶ˆæ¯æœºåˆ¶/","excerpt":"","text":"Android Handle æ¶ˆæ¯æœºåˆ¶handle æ¶ˆæ¯æœºåˆ¶æ˜¯Android é‡è¦çš„ç»„æˆéƒ¨åˆ†ï¼Œé¦–å…ˆæˆ‘ä»¬éœ€è¦çš„ç†è§£çš„æ˜¯Androidä¸ºä»€ä¹ˆéœ€è¦ handle æœºåˆ¶ã€‚å¼€å‘Androidçš„éƒ½å¾—çŸ¥é“ Androidæœ‰ä¸»çº¿ç¨‹ä¹‹åˆ†ï¼ˆUI çº¿ç¨‹ï¼‰ï¼Œä¸»çº¿ç¨‹ä¸­æ¯16msæ¥æ”¶åˆ°Androidç³»ç»Ÿçš„åŒæ­¥ä¿¡å·æ¥æ›´æ–°UI è§†å›¾ã€‚å¦‚æœåœ¨ä¸»çº¿ç¨‹ä¸­è¿›è¡Œè€—æ—¶æ“ä½œä¼šé˜»å¡çº¿æ€§ä¼šé€ æˆANRï¼ˆæ— å“åº”å¼‚å¸¸ï¼‰ã€‚å¦‚æœåœ¨å­çº¿ç¨‹ä¸­è¿›è¡Œè€—æ—¶æ“ä½œï¼Œå½“å­çº¿ç¨‹ä»»åŠ¡å®Œæˆæ—¶ï¼Œæ— æ³•ç›´æ¥è°ƒç”¨ä¸»çº¿ç¨‹ä¸­UI ç»„ä»¶ï¼ˆä¸»çº¿ç¨‹ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå­çº¿ç›´æ¥è°ƒç”¨ä¸»çº¿ç¨‹ä¸­çš„UI ç»„ä»¶ä¼šäº§ç”Ÿä¸å¯é¢„æœŸçš„é”™è¯¯ï¼Œå¦‚æ­»é”ç­‰ï¼Œå¦‚æœç»™ä¸»çº¿ç¨‹åŠ é”ä¼šé€ æˆUI ç»„ä»¶çš„å¤æ‚æ€§å¹¶ä¸”é˜»å¡äº†éƒ¨åˆ†æ“ä½œçš„æ‰§è¡Œï¼‰ã€‚åŸºäºä»¥ä¸Šçš„ç†ç”±Android è®¾è®¡äº†Handle æœºåˆ¶æ¥ç¡®ä¿å½“å­çº¿ç¨‹æ‰§è¡Œå®Œè€—æ—¶æ“ä½œæ—¶èƒ½å¤Ÿå®‰å…¨çš„æ›´æ–°ä¸»çº¿ç¨‹ä¸­çš„UI è§†å›¾ï¼ˆä¹Ÿå¯ä»¥ç¡®ä¿ä¸åŒçº¿ç¨‹ä¹‹é—´çš„å®‰å…¨é€šä¿¡ï¼‰ã€‚åˆ°è¿™é‡Œæˆ‘ä»¬èƒ½å¤Ÿç†è§£ handle æœºåˆ¶ æœºåˆ¶å­˜åœ¨çš„ç†ç”±äº†ï¼Œä¸‹é¢æˆ‘ä»¬ç»§ç»­ç»„æˆã€ä½¿ç”¨åŠåŸç†ã€‚ å¦‚ä¸Šå›¾ï¼ŒHandle ä¸­æœ‰ä¸‰ä¸ªé‡è¦çš„ç»„æˆéƒ¨åˆ†ï¼šhandleï¼ŒLoopï¼ŒMessageQueueã€‚ Handleåœ¨Handleä¸»è¦æ‰¿æ‹…ç€å‘é€Message åˆ° MessageQueueé˜Ÿåˆ—ä¸­å’Œå’Œæ¥æ”¶å¤„ç† Loop åˆ†å‘è¿‡æ¥çš„ Messageã€‚ å¦‚ä¸‹ä»£ç  1234567891011121314151617181920212223242526public class HandleExample &#123; Handler mHandler; public static final int HANDLE_WHAT_1 = 10; public void HandleExample() &#123; mHandler = new Handler(Looper.getMainLooper()) &#123; // æ¥æ”¶ Loop åˆ†å‘çš„ Message @Override public void handleMessage(Message message) &#123; switch (message.what) &#123; case HANDLE_WHAT_1: break; default: break; &#125; &#125; &#125;; Message message = new Message(); message.what = HANDLE_WHAT_1; message.arg1 = 1; message.arg2 = 2; message.obj = \"handle test\"; // å‘é€ æ¶ˆæ¯ mHandler.sendMessage(message); &#125;&#125; åœ¨æºä»£ç ä¸­ handle é€šè¿‡ send***æ–¹æ³•è°ƒç”¨MessageQueueçš„queue.enqueueMessageå‘ MessageQueueæ’å…¥ä¸€æ¡Message 1234567891011121314151617181920// æºç  Handler.java public final boolean sendMessageAtFrontOfQueue(Message msg) &#123; MessageQueue queue = mQueue; if (queue == null) &#123; RuntimeException e = new RuntimeException( this + \" sendMessageAtTime() called with no mQueue\"); Log.w(\"Looper\", e.getMessage(), e); return false; &#125; return enqueueMessage(queue, msg, 0); &#125; private boolean enqueueMessage(MessageQueue queue, Message msg, long uptimeMillis) &#123; msg.target = this; if (mAsynchronous) &#123; msg.setAsynchronous(true); &#125; return queue.enqueueMessage(msg, uptimeMillis); &#125; åœ¨Loopè°ƒç”¨ MessageQueueä¸­çš„ getNextMessage æ–¹æ³• è·å– Messageçš„handle å¼•ç”¨ é€šè¿‡ dispatchMessageåˆ†å‘Handle ä¸­å¤„ç†ã€‚ 12345678910111213141516// æºç  while (SystemClock.uptimeMillis() &lt; end) &#123; boolean conditionsMet = true; // çœç•¥éƒ¨åˆ†ä»£ç  if (conditionsMet) &#123; QueueState queueState = queueInterrogator.determineQueueState(); if (queueState == QueueState.EMPTY || queueState == QueueState.TASK_DUE_LONG) &#123; return; &#125; &#125; Message message = queueInterrogator.getNextMessage(); message.getTarget().dispatchMessage(message); recycler.recycle(message); loopCount++; &#125; MessageQueueå•é“¾è¡¨ç»“æ„ï¼Œä¸»è¦ç”¨äºå­˜å‚¨ Message, æ’å…¥æ–¹æ³•enqueueMessage,å‡ºé˜Ÿæ–¹æ³• next , LoopLoop ä¸»è¦æ˜¯ä¸€ä¸ªå¾ªç¯å™¨ï¼Œå®ƒä¸æ–­çš„å¾ªç¯ MessageQueue é˜Ÿåˆ—å¹¶å–å‡º Message äº¤ä¸ª Handleå¤„ç†ã€‚","categories":[{"name":"Android","slug":"Android","permalink":"https://tanjunze.github.io/categories/Android/"}],"tags":[{"name":"Android","slug":"Android","permalink":"https://tanjunze.github.io/tags/Android/"}]},{"title":"Android Service äºŒ ç»„ä»¶é—´é€šä¿¡","slug":"Android Service äºŒ ç»„ä»¶é—´é€šä¿¡","date":"2017-11-13T22:35:02.000Z","updated":"2019-02-26T07:20:25.383Z","comments":true,"path":"2017/11/14/Android Service äºŒ ç»„ä»¶é—´é€šä¿¡/","link":"","permalink":"https://tanjunze.github.io/2017/11/14/Android Service äºŒ ç»„ä»¶é—´é€šä¿¡/","excerpt":"","text":"Android Service é€šä¿¡Android ä¸­ Service é€šä¿¡éœ€è¦ä½¿ç”¨ bindServiceå¯åŠ¨æ–¹å¼ï¼Œä½†æ˜¯startServiceå¯åŠ¨æ–¹å¼ ä¹Ÿå¯ä»¥ä¸ç»„ä»¶é—´è¿›è¡Œé€šä¿¡ã€‚è¿™é‡Œæ€»ç»“ Service é€šä¿¡æ–¹å¼ã€‚ startService1ã€ä½¿ç”¨å¹¿æ’­é€šä¿¡ä¸æ¨èæ­¤ç§æ–¹å¼ å¹¿æ’­å‘é€ï¼š 1234Intent intent = new Intent();intent.putExtra(\"paramkey1\",\"params1\");intent.setAction(RECEIVER_ACTION); LocalBroadcastManager.getInstance(getApplicationContext()).sendBroadcast(intent); å¹¿æ’­æ¥æ”¶ï¼š 12345private BroadcastReceiver mReceiver = new BroadcastReceiver() &#123; @Override public void onReceive(Context context, Intent intent) &#123; // todo&#125; 2ã€EventBus é€šä¿¡eventbusï¼šhttps://github.com/greenrobot/EventBus å‘é€æ¶ˆæ¯ï¼š 12345678910111213141516@Overridepublic void onStart() &#123; super.onStart(); EventBus.getDefault().register(this);&#125;@Overridepublic void onStop() &#123; super.onStop(); EventBus.getDefault().unregister(this);&#125;public void sendComponentMessage()&#123; // å‘é€æ¶ˆæ¯ EventBus.getDefault().post(new MessageEvent());&#125; æ¥æ”¶æ¶ˆæ¯ï¼š 1234@Subscribe(threadMode = ThreadMode.MAIN)public void onMessageEvent(MessageEvent event) &#123; Toast.makeText(getActivity(), event.message, Toast.LENGTH_SHORT).show();&#125; bindServiceåªæœ‰ Activityã€æœåŠ¡å’Œå†…å®¹æä¾›ç¨‹åºå¯ä»¥ç»‘å®šåˆ°æœåŠ¡ â€” æ— æ³•ä»å¹¿æ’­æ¥æ”¶å™¨ç»‘å®šåˆ°æœåŠ¡ã€‚ 1ã€ IBinder é€šä¿¡ æ³¨ï¼šæ­¤æ–¹æ³•åªæœ‰åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡ä½äºåŒä¸€åº”ç”¨å’Œè¿›ç¨‹å†…è¿™ä¸€æœ€å¸¸è§çš„æƒ…å†µä¸‹æ–¹æ‰æœ‰æ•ˆã€‚ ä¾‹å¦‚ï¼Œå¯¹äºéœ€è¦å°† Activity ç»‘å®šåˆ°åœ¨åå°æ’­æ”¾éŸ³ä¹çš„è‡ªæœ‰æœåŠ¡çš„éŸ³ä¹åº”ç”¨ï¼Œæ­¤æ–¹æ³•éå¸¸æœ‰æ•ˆã€‚ ä¹‹æ‰€ä»¥è¦æ±‚æœåŠ¡å’Œå®¢æˆ·ç«¯å¿…é¡»åœ¨åŒä¸€åº”ç”¨å†…ï¼Œæ˜¯ä¸ºäº†ä¾¿äºå®¢æˆ·ç«¯è½¬æ¢è¿”å›çš„å¯¹è±¡å’Œæ­£ç¡®è°ƒç”¨å…¶ APIã€‚æœåŠ¡å’Œå®¢æˆ·ç«¯è¿˜å¿…é¡»åœ¨åŒä¸€è¿›ç¨‹å†…ï¼Œå› ä¸ºæ­¤æ–¹æ³•ä¸æ‰§è¡Œä»»ä½•è·¨è¿›ç¨‹ç¼–ç»„ã€‚ 1234567891011121314151617181920public class LocalService extends Service &#123; private final IBinder mBinder = new LocalBinder(); private final Random mGenerator = new Random(); public class LocalBinder extends Binder &#123; LocalService getService() &#123; // Return this instance of LocalService so clients can call public methods return LocalService.this; &#125; &#125; @Override public IBinder onBind(Intent intent) &#123; return mBinder; &#125; /** method for clients */ public int getRandomNumber() &#123; return mGenerator.nextInt(100); &#125;&#125; 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354public class BindingActivity extends Activity &#123; LocalService mService; boolean mBound = false; @Override protected void onCreate(Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); setContentView(R.layout.main); &#125; @Override protected void onStart() &#123; super.onStart(); // Bind to LocalService Intent intent = new Intent(this, LocalService.class); bindService(intent, mConnection, Context.BIND_AUTO_CREATE); &#125; @Override protected void onStop() &#123; super.onStop(); // Unbind from the service if (mBound) &#123; unbindService(mConnection); mBound = false; &#125; &#125; /** Called when a button is clicked (the button in the layout file attaches to * this method with the android:onClick attribute) */ public void onButtonClick(View v) &#123; if (mBound) &#123; // Call a method from the LocalService. // However, if this call were something that might hang, then this request should // occur in a separate thread to avoid slowing down the activity performance. int num = mService.getRandomNumber(); Toast.makeText(this, \"number: \" + num, Toast.LENGTH_SHORT).show(); &#125; &#125; /** Defines callbacks for service binding, passed to bindService() */ private ServiceConnection mConnection = new ServiceConnection() &#123; @Override public void onServiceConnected(ComponentName className, IBinder service) &#123; // We've bound to LocalService, cast the IBinder and get LocalService instance LocalBinder binder = (LocalBinder) service; mService = binder.getService(); mBound = true; &#125; @Override public void onServiceDisconnected(ComponentName arg0) &#123; mBound = false; &#125; &#125;;&#125; 2ã€Messenger é€šä¿¡ ç›¸å¯¹äº AIDL å½“æ‚¨éœ€è¦æ‰§è¡Œ IPC æ—¶ï¼Œä¸ºæ‚¨çš„æ¥å£ä½¿ç”¨ Messenger è¦æ¯”ä½¿ç”¨ AIDL å®ç°å®ƒæ›´åŠ ç®€å•ï¼Œå› ä¸º Messenger ä¼šå°†æ‰€æœ‰æœåŠ¡è°ƒç”¨æ’å…¥é˜Ÿåˆ—ï¼Œè€Œçº¯ç²¹çš„ AIDL æ¥å£ä¼šåŒæ—¶å‘æœåŠ¡å‘é€å¤šä¸ªè¯·æ±‚ï¼ŒæœåŠ¡éšåå¿…é¡»åº”å¯¹å¤šçº¿ç¨‹å¤„ç†ã€‚ 1234567891011121314151617181920212223242526272829303132333435public class MessengerService extends Service &#123; /** Command to the service to display a message */ static final int MSG_SAY_HELLO = 1; /** * Handler of incoming messages from clients. */ class IncomingHandler extends Handler &#123; @Override public void handleMessage(Message msg) &#123; switch (msg.what) &#123; case MSG_SAY_HELLO: Toast.makeText(getApplicationContext(), \"hello!\", Toast.LENGTH_SHORT).show(); break; default: super.handleMessage(msg); &#125; &#125; &#125; /** * Target we publish for clients to send messages to IncomingHandler. */ final Messenger mMessenger = new Messenger(new IncomingHandler()); /** * When binding to the service, we return an interface to our messenger * for sending messages to the service. */ @Override public IBinder onBind(Intent intent) &#123; Toast.makeText(getApplicationContext(), \"binding\", Toast.LENGTH_SHORT).show(); return mMessenger.getBinder(); &#125;&#125; 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364public class ActivityMessenger extends Activity &#123; /** Messenger for communicating with the service. */ Messenger mService = null; /** Flag indicating whether we have called bind on the service. */ boolean mBound; /** * Class for interacting with the main interface of the service. */ private ServiceConnection mConnection = new ServiceConnection() &#123; public void onServiceConnected(ComponentName className, IBinder service) &#123; // This is called when the connection with the service has been // established, giving us the object we can use to // interact with the service. We are communicating with the // service using a Messenger, so here we get a client-side // representation of that from the raw IBinder object. mService = new Messenger(service); mBound = true; &#125; public void onServiceDisconnected(ComponentName className) &#123; // This is called when the connection with the service has been // unexpectedly disconnected -- that is, its process crashed. mService = null; mBound = false; &#125; &#125;; public void sayHello(View v) &#123; if (!mBound) return; // Create and send a message to the service, using a supported 'what' value Message msg = Message.obtain(null, MessengerService.MSG_SAY_HELLO, 0, 0); try &#123; mService.send(msg); &#125; catch (RemoteException e) &#123; e.printStackTrace(); &#125; &#125; @Override protected void onCreate(Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); setContentView(R.layout.main); &#125; @Override protected void onStart() &#123; super.onStart(); // Bind to the service bindService(new Intent(this, MessengerService.class), mConnection, Context.BIND_AUTO_CREATE); &#125; @Override protected void onStop() &#123; super.onStop(); // Unbind from the service if (mBound) &#123; unbindService(mConnection); mBound = false; &#125; &#125;&#125; 3ã€AIDL é€šä¿¡Android AIDL ä¸€ åŸºæœ¬ä½¿ç”¨ å‚è€ƒï¼š [1]ã€android ç»‘å®šæœåŠ¡","categories":[{"name":"Android","slug":"Android","permalink":"https://tanjunze.github.io/categories/Android/"}],"tags":[{"name":"Android","slug":"Android","permalink":"https://tanjunze.github.io/tags/Android/"}]},{"title":"Frpå†…ç½‘ç©¿é€ç¬”è®°","slug":"Frpå†…ç½‘ç©¿é€ç¬”è®°","date":"2017-11-01T23:50:34.000Z","updated":"2019-02-26T06:31:48.333Z","comments":true,"path":"2017/11/02/Frpå†…ç½‘ç©¿é€ç¬”è®°/","link":"","permalink":"https://tanjunze.github.io/2017/11/02/Frpå†…ç½‘ç©¿é€ç¬”è®°/","excerpt":"https://github.com/fatedier/frp/issues/176","text":"https://github.com/fatedier/frp/issues/176","categories":[{"name":"æ‚è®°","slug":"æ‚è®°","permalink":"https://tanjunze.github.io/categories/æ‚è®°/"}],"tags":[{"name":"å…¶ä»–","slug":"å…¶ä»–","permalink":"https://tanjunze.github.io/tags/å…¶ä»–/"}]},{"title":"Hexo/GitHub Pagesæ­å»ºä¸ªäººåšå®¢","slug":"Hexoæ­å»ºä¸ªäººåšå®¢","date":"2017-10-05T11:06:23.000Z","updated":"2019-02-26T06:31:18.373Z","comments":true,"path":"2017/10/05/Hexoæ­å»ºä¸ªäººåšå®¢/","link":"","permalink":"https://tanjunze.github.io/2017/10/05/Hexoæ­å»ºä¸ªäººåšå®¢/","excerpt":"å‰è¨€å¥½ä¹…æ²¡æœ‰åœ¨github pages ä¸­æ›´æ–°ç¬”è®°äº†ï¼ŒåˆšæŠŠæ—§çš„githubä»“åº“é‡æ–°æ•´ç†äº†ã€‚åœ¨æ­¤è®°å½•ä¸€ä¸‹ï¼Œæ—¥åé€æ¸å°†æ—§ç¬”è®°å¾€è¿™é‡Œè¿ç§»ã€‚","text":"å‰è¨€å¥½ä¹…æ²¡æœ‰åœ¨github pages ä¸­æ›´æ–°ç¬”è®°äº†ï¼ŒåˆšæŠŠæ—§çš„githubä»“åº“é‡æ–°æ•´ç†äº†ã€‚åœ¨æ­¤è®°å½•ä¸€ä¸‹ï¼Œæ—¥åé€æ¸å°†æ—§ç¬”è®°å¾€è¿™é‡Œè¿ç§»ã€‚ 1ã€é…ç½®ç¯å¢ƒHexoå®˜æ–¹æ–‡æ¡£: Hexo wiki \bé¦–å…ˆå®‰è£…: Node.js Git å†å®‰è£… Hexo1$ npm install -g hexo-cli \båˆ°æ­¤Hexoå®‰è£…å®Œæˆï¼Œå¦‚æœ\bå¤±è´¥\bè¯·å‚è€ƒå®˜ç½‘ï¼Œè¿™é‡Œåªè®°å½•ç®€å•æµç¨‹ã€‚ 2ã€æ­å»ºç«™ç‚¹æ‰§è¡Œå‘½ä»¤ï¼š123$ hexo init &lt;folder&gt;$ cd &lt;folder&gt;$ npm install 3\bã€é…ç½®\bç«™ç‚¹\bæ‰“å¼€ folder/_config.yml æ–‡ä»¶ä¿®æ”¹é…ç½®å³å¯ 4ã€\bå¯åŠ¨æœåŠ¡1$ hexo server \b\b\b\bç®€å†™1$ hexo s æ­¤æ—¶æ§åˆ¶å°ä¸­æ‰“å°å‡º http://localhost:4000/ ,\bå†\bä½¿ç”¨\b\b\b\bæµè§ˆå™¨æ‰“å¼€ä½ å°±å¯ä»¥\bçœ‹åˆ°Hello worldé¡µé¢äº†ã€‚ 5ã€\bå‘å¸ƒåˆ°githubä¸Šå‚è€ƒï¼šHexo éƒ¨ç½² \bæ³¨æ„ï¼šé¦–å…ˆ\bä½ éœ€è¦åˆ›å»ºgithubè´¦æˆ·ï¼Œgtihubçš„ä»“åº“å¹¶pushã€pull\b\bä»“åº“å·²éªŒè¯\bä½ çš„githubé…ç½®å®Œæˆã€‚ å†\båˆ›å»ºä¸€ä¸ªä»“åº“å‘½åä¸º&lt;\bä½ çš„ç”¨æˆ·å&gt;.github.io,å¦‚ï¼š tanjunze.github.io æ‰“å¼€æœ¬åœ°&lt;folder&gt; Hexoå·¥ç¨‹å®‰è£… hexo-deployer-git123cd &lt;folder&gt;npm install hexo-deployer-git --save \b\b\bæ‰“å¼€æœ¬åœ°folder/_config.ymlæ‰¾åˆ°Deploymenté€‰é¡¹ï¼Œå¹¶ä¿®æ”¹ï¼šå…¶ä¸­å°†repoæ”¹ä¸º1git@github.com:&lt;ä½ çš„è´¦æˆ·å&gt;/&lt;ä½ çš„è´¦æˆ·å&gt;.github.io.git æ‰§è¡Œ1hexo deploy å¦‚æœpushæˆåŠŸï¼Œæ‰“å¼€https://&lt;\bä½ çš„ç”¨æˆ·å&gt;.github.io,ä¾‹å¦‚ï¼š https://tanjunze.github.io/ æ­å–œä½ æˆåŠŸæ­å»ºäº†åœ¨Hexo + Gtihub Pages çš„ä¸ªäººå…è´¹ç«™ç‚¹äº†ã€‚ å‚è€ƒç½‘å€ï¼šhttp://www.cnblogs.com/zhcncn/p/4097881.html","categories":[{"name":"æ‚è®°","slug":"æ‚è®°","permalink":"https://tanjunze.github.io/categories/æ‚è®°/"}],"tags":[{"name":"å…¶ä»–","slug":"å…¶ä»–","permalink":"https://tanjunze.github.io/tags/å…¶ä»–/"}]},{"title":"Android Service ä¸€","slug":"Android Service ä¸€","date":"2017-10-01T23:03:43.000Z","updated":"2019-02-26T07:20:04.488Z","comments":true,"path":"2017/10/02/Android Service ä¸€/","link":"","permalink":"https://tanjunze.github.io/2017/10/02/Android Service ä¸€/","excerpt":"","text":"Android ServiceService æ˜¯ä¸€ä¸ªå¯ä»¥åœ¨åå°æ‰§è¡Œé•¿æ—¶é—´è¿è¡Œæ“ä½œè€Œä¸æä¾›ç”¨æˆ·ç•Œé¢çš„åº”ç”¨ç»„ä»¶ã€‚ ä¸€ã€Service å¯åŠ¨æ–¹å¼Serviceæœ‰2ç§å¯åŠ¨æ–¹å¼ï¼š 1ã€startService12Intent intent = new Intent(this, HelloService.class);startService(intent); å½“åº”ç”¨ç»„ä»¶ï¼ˆå¦‚ Activityï¼‰é€šè¿‡è°ƒç”¨ startService() å¯åŠ¨æœåŠ¡æ—¶ï¼ŒæœåŠ¡å³å¤„äºâ€œå¯åŠ¨â€çŠ¶æ€ã€‚ä¸€æ—¦å¯åŠ¨ï¼ŒæœåŠ¡å³å¯åœ¨åå°æ— é™æœŸè¿è¡Œï¼Œå³ä½¿å¯åŠ¨æœåŠ¡çš„ç»„ä»¶å·²è¢«é”€æ¯ä¹Ÿä¸å—å½±å“ã€‚ å·²å¯åŠ¨çš„æœåŠ¡é€šå¸¸æ˜¯æ‰§è¡Œå•ä¸€æ“ä½œï¼Œè€Œä¸”ä¸ä¼šå°†ç»“æœè¿”å›ç»™è°ƒç”¨æ–¹ã€‚ä¾‹å¦‚ï¼Œå®ƒå¯èƒ½é€šè¿‡ç½‘ç»œä¸‹è½½æˆ–ä¸Šä¼ æ–‡ä»¶ã€‚ æ“ä½œå®Œæˆåï¼ŒæœåŠ¡ä¼šè‡ªè¡Œåœæ­¢è¿è¡Œã€‚ 2ã€bindSevice12Intent intent = new Intent(this, LocalService.class);bindService(intent, serviceConnection, Context.BIND_AUTO_CREATE); å½“åº”ç”¨ç»„ä»¶é€šè¿‡è°ƒç”¨ bindService() ç»‘å®šåˆ°æœåŠ¡æ—¶ï¼ŒæœåŠ¡å³å¤„äºâ€œç»‘å®šâ€çŠ¶æ€ã€‚ç»‘å®šæœåŠ¡æä¾›äº†ä¸€ä¸ªå®¢æˆ·ç«¯-æœåŠ¡å™¨æ¥å£ï¼Œå…è®¸ç»„ä»¶ä¸æœåŠ¡è¿›è¡Œäº¤äº’ã€å‘é€è¯·æ±‚ã€è·å–ç»“æœï¼Œç”šè‡³æ˜¯åˆ©ç”¨è¿›ç¨‹é—´é€šä¿¡ (IPC) è·¨è¿›ç¨‹æ‰§è¡Œè¿™äº›æ“ä½œã€‚ ä»…å½“ä¸å¦ä¸€ä¸ªåº”ç”¨ç»„ä»¶ç»‘å®šæ—¶ï¼Œç»‘å®šæœåŠ¡æ‰ä¼šè¿è¡Œã€‚ å¤šä¸ªç»„ä»¶å¯ä»¥åŒæ—¶ç»‘å®šåˆ°è¯¥æœåŠ¡ï¼Œä½†å…¨éƒ¨å–æ¶ˆç»‘å®šåï¼Œè¯¥æœåŠ¡å³ä¼šè¢«é”€æ¯ã€‚ onStartCommand() æ–¹æ³•å¿…é¡»è¿”å›æ•´å‹æ•°ã€‚æ•´å‹æ•°æ˜¯ä¸€ä¸ªå€¼ï¼Œç”¨äºæè¿°ç³»ç»Ÿåº”è¯¥å¦‚ä½•åœ¨æœåŠ¡ç»ˆæ­¢çš„æƒ…å†µä¸‹ç»§ç»­è¿è¡ŒæœåŠ¡ï¼ˆå¦‚ä¸Šæ‰€è¿°ï¼ŒIntentService çš„é»˜è®¤å®ç°å°†ä¸ºæ‚¨å¤„ç†è¿™ç§æƒ…å†µï¼Œä¸è¿‡æ‚¨å¯ä»¥å¯¹å…¶è¿›è¡Œä¿®æ”¹ï¼‰ã€‚ä» onStartCommand() è¿”å›çš„å€¼å¿…é¡»æ˜¯ä»¥ä¸‹å¸¸é‡ä¹‹ä¸€ï¼š 1ã€ START_NOT_STICKY å¦‚æœç³»ç»Ÿåœ¨ onStartCommand() è¿”å›åç»ˆæ­¢æœåŠ¡ï¼Œåˆ™é™¤éæœ‰æŒ‚èµ· Intent è¦ä¼ é€’ï¼Œå¦åˆ™ç³»ç»Ÿä¸ä¼šé‡å»ºæœåŠ¡ã€‚è¿™æ˜¯æœ€å®‰å…¨çš„é€‰é¡¹ï¼Œå¯ä»¥é¿å…åœ¨ä¸å¿…è¦æ—¶ä»¥åŠåº”ç”¨èƒ½å¤Ÿè½»æ¾é‡å¯æ‰€æœ‰æœªå®Œæˆçš„ä½œä¸šæ—¶è¿è¡ŒæœåŠ¡ã€‚ 2ã€ START_STICKY å¦‚æœç³»ç»Ÿåœ¨ onStartCommand() è¿”å›åç»ˆæ­¢æœåŠ¡ï¼Œåˆ™ä¼šé‡å»ºæœåŠ¡å¹¶è°ƒç”¨ onStartCommand()ï¼Œä½†ä¸ä¼šé‡æ–°ä¼ é€’æœ€åä¸€ä¸ª Intentã€‚ç›¸åï¼Œé™¤éæœ‰æŒ‚èµ· Intent è¦å¯åŠ¨æœåŠ¡ï¼ˆåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå°†ä¼ é€’è¿™äº› Intent ï¼‰ï¼Œå¦åˆ™ç³»ç»Ÿä¼šé€šè¿‡ç©º Intent è°ƒç”¨ onStartCommand()ã€‚è¿™é€‚ç”¨äºä¸æ‰§è¡Œå‘½ä»¤ã€ä½†æ— é™æœŸè¿è¡Œå¹¶ç­‰å¾…ä½œä¸šçš„åª’ä½“æ’­æ”¾å™¨ï¼ˆæˆ–ç±»ä¼¼æœåŠ¡ï¼‰ã€‚ 3ã€ START_REDELIVER_INTENT å¦‚æœç³»ç»Ÿåœ¨ onStartCommand() è¿”å›åç»ˆæ­¢æœåŠ¡ï¼Œåˆ™ä¼šé‡å»ºæœåŠ¡ï¼Œå¹¶é€šè¿‡ä¼ é€’ç»™æœåŠ¡çš„æœ€åä¸€ä¸ª Intent è°ƒç”¨ onStartCommand()ã€‚ä»»ä½•æŒ‚èµ· Intent å‡ä¾æ¬¡ä¼ é€’ã€‚è¿™é€‚ç”¨äºä¸»åŠ¨æ‰§è¡Œåº”è¯¥ç«‹å³æ¢å¤çš„ä½œä¸šï¼ˆä¾‹å¦‚ä¸‹è½½æ–‡ä»¶ï¼‰çš„æœåŠ¡ã€‚ äºŒã€Serviceçš„ç”Ÿå‘½å‘¨æœŸ ä¸‰ã€IntentServiceIntentServiceæ˜¯ Service çš„å­ç±»ï¼Œå®ƒé€šè¿‡å·¥ä½œé˜Ÿåˆ—çš„å½¢å¼å¤„ç†ä»»åŠ¡ã€‚å½“ä»»åŠ¡å®Œæˆæ—¶è‡ªåŠ¨stopSelf() IntentService å®ç°å¦‚ä¸‹ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465public abstract class IntentService extends Service &#123; private volatile Looper mServiceLooper; private volatile ServiceHandler mServiceHandler; private String mName; private boolean mRedelivery; private final class ServiceHandler extends Handler &#123; public ServiceHandler(Looper looper) &#123; super(looper); &#125; @Override public void handleMessage(Message msg) &#123; onHandleIntent((Intent)msg.obj); stopSelf(msg.arg1); &#125; &#125; public IntentService(String name) &#123; super(); mName = name; &#125; public void setIntentRedelivery(boolean enabled) &#123; mRedelivery = enabled; &#125; @Override public void onCreate() &#123; super.onCreate(); HandlerThread thread = new HandlerThread(\"IntentService[\" + mName + \"]\"); thread.start(); mServiceLooper = thread.getLooper(); mServiceHandler = new ServiceHandler(mServiceLooper); &#125; @Override public void onStart(@Nullable Intent intent, int startId) &#123; Message msg = mServiceHandler.obtainMessage(); msg.arg1 = startId; msg.obj = intent; mServiceHandler.sendMessage(msg); &#125; @Override public int onStartCommand(@Nullable Intent intent, int flags, int startId) &#123; onStart(intent, startId); return mRedelivery ? START_REDELIVER_INTENT : START_NOT_STICKY; &#125; @Override public void onDestroy() &#123; mServiceLooper.quit(); &#125; @Override @Nullable public IBinder onBind(Intent intent) &#123; return null; &#125; @WorkerThread protected abstract void onHandleIntent(@Nullable Intent intent);&#125; å››ã€å‰å°æœåŠ¡å‰å°æœåŠ¡(foreground service)å¯ä»¥ç®€å•ç†è§£ä¸ºçŠ¶æ€æ æä¾›é€šçŸ¥çš„æœåŠ¡ï¼Œå½“ä¸€ä¸ªæœåŠ¡ä¸ºå‰å°æœåŠ¡æ—¶ï¼Œå³ä½¿ç³»ç»Ÿåœ¨åœ¨å†…å­˜ä¸è¶³æ—¶ï¼Œç³»ç»Ÿä¹Ÿä¸ä¼šè€ƒè™‘å°†å…¶ç»ˆæ­¢ åˆ›å»ºå‰å°æœåŠ¡éœ€è¦åœ¨Serviceä¸­æä¾›çŠ¶æ€æ é€šçŸ¥ï¼Œå¹¶è°ƒç”¨startForeground())ï¼Œä¾‹ï¼š 123456Notification notification = new Notification(R.drawable.icon, getText(R.string.ticker_text),System.currentTimeMillis());Intent notificationIntent = new Intent(this, ExampleActivity.class);PendingIntent pendingIntent = PendingIntent.getActivity(this, 0, notificationIntent, 0);notification.setLatestEventInfo(this, getText(R.string.notification_title), getText(R.string.notification_message), pendingIntent);startForeground(ONGOING_NOTIFICATION_ID, notification); äº”ã€æ‰©å±•çŸ¥è¯†IntentServieJobIntentServicebinderServiceAsyncTaskHandlerThreadå‚è€ƒï¼š [1]ã€android services","categories":[{"name":"Android","slug":"Android","permalink":"https://tanjunze.github.io/categories/Android/"}],"tags":[{"name":"Android","slug":"Android","permalink":"https://tanjunze.github.io/tags/Android/"}]},{"title":"Androidæ‰‹æœºæ­å»ºLinuxç¯å¢ƒ","slug":"Androidæ‰‹æœºæ­å»ºLinuxç¯å¢ƒ","date":"2017-09-23T23:23:07.000Z","updated":"2019-02-26T07:19:33.531Z","comments":true,"path":"2017/09/24/Androidæ‰‹æœºæ­å»ºLinuxç¯å¢ƒ/","link":"","permalink":"https://tanjunze.github.io/2017/09/24/Androidæ‰‹æœºæ­å»ºLinuxç¯å¢ƒ/","excerpt":"Termuxä»‹ç» Termuxæ˜¯Androidï¼ŒChromebookå’ŒFire OSçš„ç»ˆç«¯æ¨¡æ‹Ÿå™¨å’ŒLinuxç¯å¢ƒã€‚","text":"Termuxä»‹ç» Termuxæ˜¯Androidï¼ŒChromebookå’ŒFire OSçš„ç»ˆç«¯æ¨¡æ‹Ÿå™¨å’ŒLinuxç¯å¢ƒã€‚å®˜ç½‘ï¼šhttps://wiki.termux.comgithubï¼šhttps://github.com/termux/termux-app 1ã€é…ç½®Termuxã€‚1.1 å‡çº§ apt(å¦åˆ™æ— æ³•å®‰è£…è½¯ä»¶)1apt update 1.2 å®‰è£…openssh1apt intall openssh","categories":[{"name":"Android","slug":"Android","permalink":"https://tanjunze.github.io/categories/Android/"}],"tags":[{"name":"Android","slug":"Android","permalink":"https://tanjunze.github.io/tags/Android/"}]},{"title":"ä¸Šä¼ æœ¬åœ°æ–‡ä»¶åˆ°è¿œç¨‹linuxä¸»æœº","slug":"åœ¨markdownä¸­ä½¿ç”¨æ•°å­¦å…¬å¼","date":"2017-09-01T16:34:12.000Z","updated":"2019-02-22T01:26:52.191Z","comments":true,"path":"2017/09/02/åœ¨markdownä¸­ä½¿ç”¨æ•°å­¦å…¬å¼/","link":"","permalink":"https://tanjunze.github.io/2017/09/02/åœ¨markdownä¸­ä½¿ç”¨æ•°å­¦å…¬å¼/","excerpt":"","text":"åœ¨markdownä¸­æ’å…¥æ•°å­¦å…¬å¼çš„\bæ–¹æ³•1ã€ä½¿ç”¨codecogsAPIcodecogså¯ä»¥æ”¯æŒå¤šç§æ ¼å¼å¦‚ï¼šgifã€pngã€pdfã€swfã€emfã€svgã€‚(æ¨èsvgæ ¼å¼)12345http://latex.codecogs.com/gif.latex?å…¬å¼ http://latex.codecogs.com/svg.latex?å…¬å¼http://latex.codecogs.com/png.latex?å…¬å¼ \bä¾‹å¦‚è¦æ˜¾ç¤ºä¸‹é¢çš„å…¬å¼ï¼š çš„å…¬å¼ä¸º \\frac{1}{1+sin(x)} &gt;åœ¨æ–‡æœ¬ä¸­æ’å…¥å¦‚ä¸‹ 1![](http://latex.codecogs.com/svg.latex?\\frac&#123;1&#125;&#123;1+sin(x)&#125;) }) 1&lt;img src=&quot;http://latex.codecogs.com/svg.latex?\\frac&#123;1&#125;&#123;1+sin(x)&#125;&quot;/&gt; =\\frac{1}{1+e^{(-x)}})","categories":[{"name":"markdown","slug":"markdown","permalink":"https://tanjunze.github.io/categories/markdown/"}],"tags":[{"name":"markdown","slug":"markdown","permalink":"https://tanjunze.github.io/tags/markdown/"}]},{"title":"ä¸Šä¼ æœ¬åœ°æ–‡ä»¶åˆ°è¿œç¨‹linuxä¸»æœº","slug":"ä¸Šä¼ æ–‡ä»¶åˆ°è¿œç¨‹ä¸»æœº","date":"2017-08-17T10:00:04.000Z","updated":"2019-02-22T01:23:14.055Z","comments":true,"path":"2017/08/17/ä¸Šä¼ æ–‡ä»¶åˆ°è¿œç¨‹ä¸»æœº/","link":"","permalink":"https://tanjunze.github.io/2017/08/17/ä¸Šä¼ æ–‡ä»¶åˆ°è¿œç¨‹ä¸»æœº/","excerpt":"","text":"ä¸Šä¼ æœ¬åœ°æ–‡ä»¶åˆ°è¿œç¨‹linuxä¸»æœºå‘½ä»¤scp /home/work/source.txt work@192.168.0.10:/home/work/ #æŠŠæœ¬åœ°çš„source.txtæ–‡ä»¶æ‹·è´åˆ°192.168.0.10æœºå™¨ä¸Šçš„/home/workç›®å½•ä¸‹ scp work@192.168.0.10:/home/work/source.txt /home/work/ #æŠŠ192.168.0.10æœºå™¨ä¸Šçš„source.txtæ–‡ä»¶æ‹·è´åˆ°æœ¬åœ°çš„/home/workç›®å½•ä¸‹ scp work@192.168.0.10:/home/work/source.txt work@192.168.0.11:/home/work/ #æŠŠ192.168.0.10æœºå™¨ä¸Šçš„source.txtæ–‡ä»¶æ‹·è´åˆ°192.168.0.11æœºå™¨çš„/home/workç›®å½•ä¸‹ scp -r /home/work/sourcedir work@192.168.0.10:/home/work/ #æ‹·è´æ–‡ä»¶å¤¹ï¼ŒåŠ -rå‚æ•° æ–‡ä»¶ä¸‹è½½ wget http://www.linuxsense.org/xxxx/xxx.tar.gz wget -c http://www.linuxsense.org/xxxx/xxx.tar.gz -bï¼šåå°ä¸‹è½½ï¼ŒWgeté»˜è®¤çš„æ˜¯æŠŠæ–‡ä»¶ä¸‹è½½åˆ°å½“å‰ç›®å½•ã€‚ -Oï¼šå°†æ–‡ä»¶ä¸‹è½½åˆ°æŒ‡å®šçš„ç›®å½•ä¸­ã€‚ -Pï¼šä¿å­˜æ–‡ä»¶ä¹‹å‰å…ˆåˆ›å»ºæŒ‡å®šåç§°çš„ç›®å½•ã€‚ -tï¼šå°è¯•è¿æ¥æ¬¡æ•°ï¼Œå½“Wgetæ— æ³•ä¸æœåŠ¡å™¨å»ºç«‹è¿æ¥æ—¶ï¼Œå°è¯•è¿æ¥å¤šå°‘æ¬¡ã€‚ -cï¼šæ–­ç‚¹ç»­ä¼ ï¼Œå¦‚æœä¸‹è½½ä¸­æ–­ï¼Œé‚£ä¹ˆè¿æ¥æ¢å¤æ—¶ä¼šä»ä¸Šæ¬¡æ–­ç‚¹å¼€å§‹ä¸‹è½½ã€‚ -rï¼šä½¿ç”¨é€’å½’ä¸‹è½½","categories":[{"name":"Linux","slug":"Linux","permalink":"https://tanjunze.github.io/categories/Linux/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://tanjunze.github.io/tags/Linux/"}]},{"title":"Android Activity","slug":"Android Activity","date":"2017-05-02T23:55:34.000Z","updated":"2019-02-26T07:22:31.628Z","comments":true,"path":"2017/05/03/Android Activity/","link":"","permalink":"https://tanjunze.github.io/2017/05/03/Android Activity/","excerpt":"","text":"Android Activityä¸€ã€Activity çš„ç”Ÿå‘½å‘¨æœŸ1ã€ç”Ÿå‘½å‘¨æœŸ ï¼ˆ1ï¼‰å¦‚æœæ‰“å¼€æ–°çš„Activityå¹¶ä¸”æ–°çš„Activityä½¿ç”¨é€æ˜ä¸»é¢˜ï¼Œé‚£ä¹ˆå½“å‰Activityä¸ä¼šè°ƒç”¨onStopã€‚ ï¼ˆ2ï¼‰æ‰“å¼€æ–°çš„Activityæ—¶ï¼Œå½“å‰ActivityåŠæ–°Activityç”Ÿå‘½å‘¨æœŸé¡ºåºå¦‚ä¸‹: 12345MainActivity----onPauseSecondActivity----onCreateSecondActivity----onStartSecondActivity----onResumeMainActivity----onStop 2ã€å¼‚å¸¸ç”Ÿå‘½å‘¨æœŸåŸå› ï¼š ï¼ˆ1ï¼‰èµ„æºç›¸å…³çš„ç³»ç»Ÿé…ç½®å‘ç”Ÿæ”¹å˜å¯¼è‡´çš„Activityè¢«æ€æ­»å¹¶é‡æ–°åˆ›å»ºã€‚ å¦‚ï¼šæ—‹è½¬å±å¹•ï¼Œé”®ç›˜æ”¹å˜ç­‰..â€¦ ï¼ˆ2) èµ„æºå†…å­˜ä¸è¶³å¯¼è‡´ä½ä¼˜å…ˆçº§çš„Activityè¢«æ€æ­»ã€‚ Activtyä¼˜å…ˆçº§é¡ºåº 1ã€å‰å°Activty,æ­£åœ¨å’Œç”¨æˆ·äº¤äº’çš„Activityï¼Œä¼˜å…ˆçº§æœ€é«˜ã€‚ 2ã€å¯è§ä½†éå‰å°Activityï¼Œå¦‚åœ¨Activityä¸­å¼¹å‡ºå¯¹è¯æ¡†ã€‚ 3ã€åå°Activityï¼Œå¦‚æ‰§è¡Œäº†onStop()ï¼Œä¼˜å…ˆçº§æœ€ä½ã€‚ è§£å†³ ï¼ˆ1ï¼‰åœ¨onSaveInstanceState(),onRestoreInstanceState()ä¿å­˜æ¢å¤æ•°æ® ï¼ˆ2ï¼‰åœ¨android å·¥ç¨‹ç›®å½•ä¸‹AndroidManifestä¸­é…ç½®å¦‚ä¸‹: 1android:configChanges=&quot;screenSize|orientation&quot; configChangesï¼šå¦‚ä¸‹ é¡¹ç›® å«ä¹‰ mcc IMSI(å›½é™…ç§»åŠ¨ç”¨æˆ·è¯†åˆ«ç )å‘ç”Ÿæ”¹å˜ï¼Œæ£€æµ‹åˆ°SIMå¡ï¼Œæˆ–è€…æ›´æ–°MCC mnc IMSIç½‘ç»œå‘ç”Ÿæ”¹å˜,æ£€æµ‹åˆ°SIMå¡ï¼Œæˆ–è€…æ›´æ–°MCC locale è¯­è¨€å‘ç”Ÿæ”¹å˜ï¼Œç”¨æˆ·é€‰æ‹©äº†ä¸€ä¸ªæ–°çš„è¯­è¨€ï¼Œæ–‡å­—åº”è¯¥é‡æ–°æ˜¾ç¤º touchscreen è§¦æ‘¸å±å‘ç”Ÿæ”¹å˜ï¼Œè¿™é€šå¸¸æ˜¯ä¸åº”è¯¥å‘ç”Ÿçš„ keyboard é”®ç›˜ç±»å‹å‘ç”Ÿæ”¹å˜ï¼Œä¾‹å¦‚ï¼Œç”¨æˆ·ä½¿ç”¨äº†å¤–éƒ¨é”®ç›˜ keyboardHidden é”®ç›˜å‘ç”Ÿæ”¹å˜ï¼Œä¾‹å¦‚ï¼Œç”¨æˆ·ä½¿ç”¨äº†ç¡¬ä»¶é”®ç›˜ navigation å¯¼èˆªå‘ç”Ÿæ”¹å˜ screenLayout å±å¹•çš„å¸ƒå±€å‘ç”Ÿæ”¹å˜ï¼Œè¿™å¯èƒ½å¯¼è‡´æ¿€æ´»ä¸åŒçš„æ˜¾ç¤º fontScale å…¨å±€å­—ä½“å¤§å°ç¼©æ”¾å‘ç”Ÿæ”¹å˜ orientation è®¾å¤‡æ—‹è½¬ï¼Œæ¨ªå‘æ˜¾ç¤ºå’Œç«–å‘æ˜¾ç¤ºæ¨¡å¼åˆ‡æ¢ screenSize å±å¹•å¤§å°æ”¹å˜äº† smallestScreenSize å±å¹•çš„ç‰©ç†å¤§å°æ”¹å˜äº†ï¼Œå¦‚ï¼šè¿æ¥åˆ°ä¸€ä¸ªå¤–éƒ¨çš„å±å¹•ä¸Š äºŒã€å¯åŠ¨æ¨¡å¼1ï¼Œstandard æ ‡å‡†æ¨¡å¼ æ¯å¯åŠ¨ä¸€ä¸ªActivityéƒ½ä¼šé‡æ–°åˆ›å»ºä¸€ä¸ªæ–°çš„Activityå®ä¾‹ã€‚å½“ä¸€ä¸ªActivityå¯åŠ¨è¿™ç§æ¨¡å¼ä¸‹æ–°çš„Activityï¼Œæ–°çš„Activityå°±ä¼šè¿›å…¥å¯åŠ¨å®ƒActivityçš„ä»»åŠ¡æ ˆä¸­ã€‚ 2ï¼ŒsingleTop æ ˆå®šå¤ç”¨æ¨¡å¼è¿™ç§æ¨¡å¼ä¸‹ï¼Œå¦‚æœæ–°çš„Activityçš„å®ä¾‹å·²ç»ä½äºä»»åŠ¡æ ˆçš„æ ˆé¡¶ï¼Œé‚£ä¹ˆæ–°çš„Activityå°±ä¸ä¼šé‡æ–°åˆ›å»ºï¼Œæ­¤æ—¶å®ƒçš„onNewIntent()è¢«è°ƒç”¨ã€‚å¦‚æœæ–°çš„Activityçš„å®ä¾‹ä¸ä½äºæ ˆé¡¶ï¼Œé‚£ä¹ˆå°±ä¼šé‡æ–°åˆ›å»ºã€‚ 3ï¼ŒsingleTask æ ˆå†…å¤ç”¨æ¨¡å¼è¿™æ˜¯ä¸€ç§å•ä¸€ä»»åŠ¡æ ˆã€‚ï¼Œç³»ç»Ÿä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ä»»åŠ¡ï¼Œå¹¶å°†å¯åŠ¨çš„Activityæ”¾å…¥è¿™ä¸ªæ–°ä»»åŠ¡çš„æ ˆåº•ä½ç½®ã€‚ä½†æ˜¯ï¼Œå¦‚æœç°æœ‰ä»»åŠ¡å½“ä¸­å·²ç»å­˜åœ¨ä¸€ä¸ªè¯¥Activityçš„å®ä¾‹äº†ï¼Œé‚£ä¹ˆç³»ç»Ÿå°±ä¸ä¼šå†åˆ›å»ºä¸€æ¬¡å®ƒçš„å®ä¾‹ï¼Œè€Œæ˜¯å¤ç”¨è¿™ä¸ªå·²ç»å­˜åœ¨çš„activityï¼Œè°ƒç”¨ onNewIntent() æ–¹æ³•ï¼Œå¹¶ä¸”æ¸…ç©ºè¿™ä¸ªactivityä»»åŠ¡æ ˆä¸Šé¢æ‰€æœ‰çš„activity 4ï¼ŒsingleInstance å•å®ä¾‹æ¨¡å¼å•å®ä¾‹æ¨¡å¼ã€‚è¿™ç§æ¨¡å¼ä¸‹çš„Activityåªå•ç‹¬çš„ä½äºç‹¬ç«‹çš„ä»»åŠ¡æ ˆä¸­ã€‚æ•´ä¸ªæ‰‹æœºæ“ä½œç³»ç»Ÿé‡Œé¢åªæœ‰ä¸€ä¸ªå®ä¾‹å­˜åœ¨ã€‚ä¸åŒçš„åº”ç”¨å»æ‰“å¼€è¿™ä¸ªactivityå…±äº« å…¬ç”¨çš„åŒä¸€ä¸ªactivityã€‚ä»–ä¼šè¿è¡Œåœ¨è‡ªå·±å•ç‹¬ï¼Œç‹¬ç«‹çš„ä»»åŠ¡æ ˆé‡Œé¢ï¼Œå¹¶ä¸”ä»»åŠ¡æ ˆé‡Œé¢åªæœ‰ä»–ä¸€ä¸ªå®ä¾‹å­˜åœ¨ Activityçš„Flage 1.FLAGE_ACTIVITY_NEW_TASK æ–°å¯åŠ¨Activityå°±ä¼šè¢«æ”¾ç½®åˆ°ä¸€ä¸ªæ–°çš„ä»»åŠ¡å½“ä¸­(ä¸â€œsingleTaskâ€æœ‰ç‚¹ç±»ä¼¼ï¼‰ 2.FLAGE_ACTIVITY_SINGLE_TOP ä½œç”¨äºsingleTopå¯åŠ¨æ¨¡å¼æ•ˆæœä¸€æ · 3.FLAGE_ACTIVITY_CLEAR_TOP å¦‚æœè¦å¯åŠ¨çš„Activityåœ¨å½“å‰ä»»åŠ¡ä¸­å·²ç»å­˜åœ¨äº†ï¼Œå°±ä¸ä¼šå†æ¬¡åˆ›å»ºè¿™ä¸ªActivityçš„å®ä¾‹ï¼Œè€Œæ˜¯ä¼šæŠŠè¿™ä¸ªActivityä¹‹ä¸Šçš„æ‰€æœ‰Activityå…¨éƒ¨å…³é—­æ‰ ä¸‰ã€ä»»åŠ¡æ ˆå¤„ç†ä»»åŠ¡æ ˆå¤„ç†affinity affinityå¯ä»¥ç”¨äºæŒ‡å®šä¸€ä¸ªActivityæ›´åŠ æ„¿æ„ä¾é™„äºå“ªä¸€ä¸ªä»»åŠ¡ï¼Œåœ¨é»˜è®¤æƒ…å†µä¸‹ï¼ŒåŒä¸€ä¸ªåº”ç”¨ç¨‹åºä¸­çš„æ‰€æœ‰Activityéƒ½å…·æœ‰ç›¸åŒçš„affinityï¼Œæ‰€ä»¥ï¼Œè¿™äº›Activityéƒ½æ›´åŠ å€¾å‘äºè¿è¡Œåœ¨ç›¸åŒçš„ä»»åŠ¡å½“ä¸­ã€‚å½“ç„¶äº†ï¼Œä½ ä¹Ÿå¯ä»¥å»æ”¹å˜æ¯ä¸ªActivityçš„affinityå€¼ï¼Œé€šè¿‡å…ƒç´ çš„taskAffinityå±æ€§å°±å¯ä»¥å®ç°äº† alwaysRetainTaskStateå¦‚æœå°†æœ€åº•å±‚çš„é‚£ä¸ªActivityçš„è¿™ä¸ªå±æ€§è®¾ç½®ä¸ºtrueï¼Œé‚£ä¹ˆä¸Šé¢æ‰€æè¿°çš„é»˜è®¤è¡Œä¸ºå°±å°†ä¸ä¼šå‘ç”Ÿï¼Œä»»åŠ¡ä¸­æ‰€æœ‰çš„Activityå³ä½¿è¿‡äº†å¾ˆé•¿ä¸€æ®µæ—¶é—´ä¹‹åä»ç„¶ä¼šè¢«ç»§ç»­ä¿ç•™ã€‚ clearTaskOnLaunchå¦‚æœå°†æœ€åº•å±‚çš„é‚£ä¸ªActivityçš„è¿™ä¸ªå±æ€§è®¾ç½®ä¸ºtrueï¼Œé‚£ä¹ˆåªè¦ç”¨æˆ·ç¦»å¼€äº†å½“å‰ä»»åŠ¡ï¼Œå†æ¬¡è¿”å›çš„æ—¶å€™å°±ä¼šå°†æœ€åº•å±‚Activityä¹‹ä¸Šçš„æ‰€æœ‰å…¶å®ƒActivityå…¨éƒ¨æ¸…é™¤æ‰ã€‚ç®€å•æ¥è®²ï¼Œå°±æ˜¯ä¸€ç§å’ŒalwaysRetainTaskStateå®Œå…¨ç›¸åçš„å·¥ä½œæ¨¡å¼ï¼Œå®ƒä¿è¯æ¯æ¬¡è¿”å›ä»»åŠ¡çš„æ—¶å€™éƒ½ä¼šæ˜¯ä¸€ç§åˆå§‹åŒ–çŠ¶æ€ï¼Œå³ä½¿ç”¨æˆ·ä»…ä»…ç¦»å¼€äº†å¾ˆçŸ­çš„ä¸€æ®µæ—¶é—´ã€‚ finishOnTaskLaunchè¿™ä¸ªå±æ€§å’ŒclearTaskOnLaunchæ˜¯æ¯”è¾ƒç±»ä¼¼çš„ï¼Œä¸è¿‡å®ƒä¸æ˜¯ä½œç”¨äºæ•´ä¸ªä»»åŠ¡ä¸Šçš„ï¼Œè€Œæ˜¯ä½œç”¨äºå•ä¸ªActivityä¸Šã€‚å¦‚æœæŸä¸ªActivityå°†è¿™ä¸ªå±æ€§è®¾ç½®æˆtrueï¼Œé‚£ä¹ˆç”¨æˆ·ä¸€æ—¦ç¦»å¼€äº†å½“å‰ä»»åŠ¡ï¼Œå†æ¬¡è¿”å›æ—¶è¿™ä¸ªActivityå°±ä¼šè¢«æ¸…é™¤æ‰ã€‚ å››ã€Activityå¯åŠ¨æ–¹å¼1ã€æ˜¾ç¤ºå¯åŠ¨ æ˜¾ç¤ºå¯åŠ¨éœ€è¦æ˜ç¡®çš„æŒ‡å®šè¢«å¯åŠ¨å¯¹è±¡çš„ç»„ä»¶ä¿¡æ¯ï¼ŒåŒ…æ‹¬åŒ…åå’Œç±»å 2ã€éšå¼å¯åŠ¨ éšå¼å¯åŠ¨çš„Intentèƒ½å¤ŸåŒ¹é…ç›®æ ‡ç»„ä»¶çš„ä¸€ç»„IntentFilterä¸­çš„ä¿¡æ¯ï¼ˆå³åŒ¹é…ä¸€ç»„IntentFilterçš„ Action,Category,Dataï¼‰ã€‚ åœ¨AndroidManifest.xmlä¸­ä¸€ä¸ªactivity å¯ä»¥æœ‰å¤šä¸ªIntentFilter åœ¨IntentFilterä¸­ä¹Ÿå¯ä»¥æœ‰å¤šç»„Action,Category,Data IntentFilterä¸­åŒ¹é…è§„åˆ™ IntentFilteræœ‰â€œAction,Category,Dataâ€çš„ä¸‰ç§åŒ¹é…æ–¹å¼ 1234567public void playMedia(Uri file) &#123; Intent intent = new Intent(Intent.ACTION_VIEW); intent.setData(file); if (intent.resolveActivity(getPackageManager()) != null) &#123; startActivity(intent); &#125;&#125; 12345678&lt;activity ...&gt; &lt;intent-filter&gt; &lt;action android:name=&quot;android.intent.action.VIEW&quot; /&gt; &lt;data android:type=&quot;audio/*&quot; /&gt; &lt;data android:type=&quot;application/ogg&quot; /&gt; &lt;category android:name=&quot;android.intent.category.DEFAULT&quot; /&gt; &lt;/intent-filter&gt;&lt;/activity&gt; äº”ã€æ‰©å±•æ¶æ„ç»„ä»¶æ•°æ®åº“ RoomLiveDataViewModelå‚è€ƒï¼š [1]ã€Activity Lifecycle [2]ã€Android Tasks and Back Stack [3]ã€Android Activities [4]ã€Android Intents [4]ã€Android intents-filter","categories":[{"name":"Android","slug":"Android","permalink":"https://tanjunze.github.io/categories/Android/"}],"tags":[{"name":"Android","slug":"Android","permalink":"https://tanjunze.github.io/tags/Android/"}]},{"title":"Android broadcast","slug":"Android å¹¿æ’­","date":"2017-04-16T23:35:14.000Z","updated":"2019-02-26T07:22:59.807Z","comments":true,"path":"2017/04/17/Android å¹¿æ’­/","link":"","permalink":"https://tanjunze.github.io/2017/04/17/Android å¹¿æ’­/","excerpt":"","text":"Android BroadcastBroadcastæ˜¯ä¸€ä¸ªå…¨å±€çš„ç›‘å¬å™¨ï¼Œä¸»è¦ç”¨äºç›‘å¬/ æ¥æ”¶åº”ç”¨å‘å‡ºçš„å¹¿æ’­æ¶ˆæ¯ã€‚å¹¿æ’­é‡‡ç”¨è®¢é˜…-å‘å¸ƒè®¾è®¡æ¨¡å¼ï¼ˆè§‚å¯Ÿè€…è®¾è®¡æ¨¡å¼ï¼‰ï¼Œæ•…å¹¿æ’­æœ‰2ä¸ªç»„æˆé‡è¦éƒ¨åˆ†ï¼šsendBroadcastå’ŒbroadcastReceiverã€‚ æ³¨å†Œå¹¿æ’­1ã€é™æ€æ³¨å†Œæ³¨å†Œï¼š 123456&lt;receiver android:name=\".MyBroadcastReceiver\" android:exported=\"true\"&gt; &lt;intent-filter&gt; &lt;action android:name=\"android.intent.action.BOOT_COMPLETED\"/&gt; &lt;action android:name=\"android.intent.action.INPUT_METHOD_CHANGED\" /&gt; &lt;/intent-filter&gt;&lt;/receiver&gt; ä½¿ç”¨ï¼š 123456789101112public class MyBroadcastReceiver extends BroadcastReceiver &#123; private static final String TAG = \"MyBroadcastReceiver\"; @Override public void onReceive(Context context, Intent intent) &#123; StringBuilder sb = new StringBuilder(); sb.append(\"Action: \" + intent.getAction() + \"\\n\"); sb.append(\"URI: \" + intent.toUri(Intent.URI_INTENT_SCHEME).toString() + \"\\n\"); String log = sb.toString(); Log.d(TAG, log); Toast.makeText(context, log, Toast.LENGTH_LONG).show(); &#125; &#125; ç³»ç»Ÿåœ¨å®‰è£…åº”ç”¨ç¨‹åºæ—¶æ³¨å†Œæ¥æ”¶å™¨ã€‚å¦‚æœåº”ç”¨ç¨‹åºå½“å‰æœªè¿è¡Œï¼Œç³»ç»Ÿå¯ä»¥å¯åŠ¨åº”ç”¨ç¨‹åºå¹¶å‘é€å¹¿æ’­ã€‚ 2ã€åŠ¨æ€æ³¨å†Œ1BroadcastReceiver br = new MyBroadcastReceiver(); 123IntentFilter filter = new IntentFilter(ConnectivityManager.CONNECTIVITY_ACTION);filter.addAction(Intent.ACTION_AIRPLANE_MODE_CHANGED);this.registerReceiver(br, filter); 1unregisterReceiver(br) å‘é€å¹¿æ’­1ã€æ™®é€šå¹¿æ’­sendBroadcastï¼šå·²æœªå®šä¹‰çš„é¡ºåºå‘æ‰€æœ‰æ¥æ”¶å™¨å‘é€å¹¿æ’­ 1234Intent intent = new Intent();intent.setAction(&quot;com.example.broadcast.MY_NOTIFICATION&quot;);intent.putExtra(&quot;data&quot;,&quot;Notice me senpai!&quot;);sendBroadcast(intent); 2ã€æœ‰åºå¹¿æ’­sendOrderedBroadcast(Intent, String)ä¸€æ¬¡å‘ä¸€ä¸ªæ¥æ”¶å™¨å‘é€å¹¿æ’­ã€‚å½“æ¯ä¸ªæ¥æ”¶å™¨ä¾æ¬¡æ‰§è¡Œæ—¶ï¼Œå®ƒå¯ä»¥å°†ç»“æœä¼ æ’­åˆ°ä¸‹ä¸€ä¸ªæ¥æ”¶å™¨ï¼Œæˆ–è€…å®ƒå¯ä»¥å®Œå…¨ä¸­æ­¢å¹¿æ’­ï¼Œä»¥ä¾¿å®ƒä¸ä¼šä¼ é€’ç»™å…¶ä»–æ¥æ”¶å™¨ã€‚é€šè¿‡intent-filterçš„android:priorityå±æ€§æ¥è®¾ç½®å¹¿æ’­çš„ä¼˜å…ˆçº§; å…·æœ‰ç›¸åŒä¼˜å…ˆçº§çš„æ¥æ”¶å™¨å°†ä»¥ä»»æ„é¡ºåºè¿è¡Œã€‚ åº”ç”¨ç¤ºä¾‹ï¼šçŸ­ä¿¡å¹¿æ’­ 3ã€æœ¬åœ°å¹¿æ’­å³åœ¨æœ¬åº”ç”¨ï¼ˆåŒä¸€è¿›ç¨‹ï¼‰å†…å‘é€å¹¿æ’­ã€‚æ³¨æ„ï¼Œæœ¬åœ°å¹¿æ’­åªèƒ½é€šè¿‡åŠ¨æ€æ³¨å†Œã€‚ 1LocalBroadcastManager.sendBroadcast(Intent) 4ã€ç³»ç»Ÿå¹¿æ’­ç³»ç»Ÿå¹¿æ’­ æ˜¯æœ‰ ç³»ç»Ÿ å‘é€çš„ä¸€ç§å½¢å¼çš„å¹¿æ’­ï¼Œå¼€å‘è€…æ— æ³•ä½¿ç”¨åªèƒ½æ¥å—ç³»ç»Ÿå¹¿æ’­ã€‚ 5ã€ç²˜ç²˜å¹¿æ’­Sticky Broadcast é«˜ç‰ˆæœ¬APIä¸Šä»¥åºŸå¼ƒï¼Œä¸å»ºè®®ä½¿ç”¨ã€‚ 1sendStickyBroadcast(intent); å¹¿æ’­çš„æƒé™ç®¡ç†åœ¨é»˜è®¤çš„æƒ…å†µä¸‹Android çš„å¹¿æ’­æ˜¯å¯ä»¥IPCé€šä¿¡ï¼ˆå«åº”ç”¨é—´é€šä¿¡ï¼‰ï¼Œè¿™ç§æƒ…å†µä¸‹å…¶ä»–appï¼ˆéç›®æ ‡appï¼‰å¯ä»¥æ¥å—åˆ°ä½ çš„å¹¿æ’­ä¿¡æ¯ä»è€Œäº§ç”Ÿå®‰å…¨éšæ‚£ä¹Ÿä¼šé€ æˆä¸€å®šçš„æ€§èƒ½å¼€é”€ã€‚ 1ã€åº”ç”¨å†…çš„å¹¿æ’­é€šä¿¡åº”ç”¨å†…çš„å¹¿æ’­ ä¸æƒ³ è¢«å…¶ä»–app çŸ¥æ™“æ—¶ã€‚å¯ä»¥è€ƒè™‘ä½¿ç”¨LocalBroadcast, 2ã€æŒ‡å®šåº”ç”¨é—´çš„å¹¿æ’­é€šä¿¡ã€ ä¸æ¥æ”¶å…¶ä»–app çš„å¹¿æ’­ é™æ€æ³¨å†Œçš„æƒ…å†µä¸‹ï¼Œè®¾ç½®ï¼š`android:exported=â€falseâ€ ã€ å‘é€ç»™æŒ‡å®šçš„app çš„å¹¿æ’­ åœ¨å‘é€å¹¿æ’­æ—¶åœ¨Intent ä¸­æŒ‡å®šæŠ¥åIntent.setPackage(packageName) ã€æ¥æ”¶æŒ‡å®šapp çš„å¹¿æ’­ åœ¨æ¥æ”¶æŒ‡å®šå¹¿æ’­æ—¶æ—¶å¯ä»¥è®¾ç½®æ¥æ”¶å¹¿æ’­çš„æƒé™ï¼Œå¦‚ï¼š 1ã€è‡ªå®šä¹‰æƒé™ï¼šhttps://developer.android.com/guide/topics/manifest/permission-element.html 12345&lt;permission android:name=\"com.hello.permission.broadcast\" android:label=\"@string/app_name\" android:permissionGroup=\"@string/hello_world\" android:protectionLevel=\"normal\" &gt; 2ã€æ¥æ”¶ç«¯ä½¿ç”¨è‡ªå®šä¹‰æƒé™ï¼š 1&lt;uses-permission android:name=\"com.hello.permission.broadcast\"/&gt; 3ã€å‘é€å¸¦æƒé™çš„å¹¿æ’­ 12sendBroadcast(new Intent(\"com.example.NOTIFY\"), \"com.hello.permission.broadcast\"); 4ã€æ¥æ”¶å¸¦æƒé™çš„å¹¿æ’­ 123456&lt;receiver android:name=\".MyBroadcastReceiver\" android:permission=\"com.hello.permission.broadcast\"&gt; &lt;intent-filter&gt; &lt;action android:name=\"android.intent.action.AIRPLANE_MODE\"/&gt; &lt;/intent-filter&gt;&lt;/receiver&gt; æˆ– 12IntentFilter filter = new IntentFilter(Intent.ACTION_AIRPLANE_MODE_CHANGED);registerReceiver(receiver, filter, \"com.hello.permission.broadcast\", null ); æ­¤æ—¶å¹¿æ’­æ¥æ”¶å™¨åªèƒ½æ¥æ”¶ç›¸åŒæƒé™çš„å¹¿æ’­ ã€‚ å¹¿æ’­æ‰©å±•çŸ¥è¯†1ã€æ¯”è¾ƒé™æ€æ³¨å†Œå’ŒåŠ¨æ€æ³¨å†Œ é™æ€æ³¨å†Œ åŠ¨æ€æ³¨å†Œ æ³¨å†Œæ–¹å¼ AndroidManifest.xml ä»£ç ä¸­æ³¨å†Œ ç”Ÿå‘½å‘¨æœŸ ä¸å—ä»»ä½•ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸå½±å“ï¼Œå³ä½¿appå…³é—­ä¹Ÿå¯ä»¥å”¤é†’æ¥æ”¶ è·Ÿéšç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸå˜åŒ–è€Œå˜åŒ–ï¼Œéœ€è¦åŠ¨æ€æ³¨é”€ åº”ç”¨åœºæ™¯ éœ€è¦å®æ—¶ç›‘å¬å¹¿æ’­ï¼Œå¦‚ç³»ç»Ÿå¹¿æ’­ éœ€è¦åŠ¨æ€ç›‘å¬å¹¿æ’­ï¼Œå¦‚ç›‘å¬æ–‡ä»¶ä¸‹è½½çš„å˜åŒ–ç­‰ 2ã€å¹¿æ’­çš„æ³¨æ„äº‹é¡¹å¹¿æ’­æ¥æ”¶è€…ä¸­ä¸èƒ½è¿›è¡Œè€—æ—¶æ“ä½œï¼Œå¦è€…ä¼šå‡ºç°ANå¼‚å¸¸ã€‚å¦‚æœéœ€è¦æ‰§è¡Œè€—æ—¶æ“ä½œéœ€è¦åœ¨çº¿ç¨‹ä¸­æ‰§è¡Œã€‚ä¾‹å¦‚ï¼š 1234567891011121314151617181920212223242526272829303132333435363738public class MyBroadcastReceiver extends BroadcastReceiver &#123; private static final String TAG = \"MyBroadcastReceiver\"; @Override public void onReceive(Context context, Intent intent) &#123; final PendingResult pendingResult = goAsync(); Task asyncTask = new Task(pendingResult, intent); asyncTask.execute(); &#125; private static class Task extends AsyncTask &#123; private final PendingResult pendingResult; private final Intent intent; private Task(PendingResult pendingResult, Intent intent) &#123; this.pendingResult = pendingResult; this.intent = intent; &#125; @Override protected String doInBackground(String... strings) &#123; StringBuilder sb = new StringBuilder(); sb.append(\"Action: \" + intent.getAction() + \"\\n\"); sb.append(\"URI: \" + intent.toUri(Intent.URI_INTENT_SCHEME).toString() + \"\\n\"); String log = sb.toString(); Log.d(TAG, log); return log; &#125; @Override protected void onPostExecute(String s) &#123; super.onPostExecute(s); // Must call finish() so the BroadcastReceiver can be recycled. pendingResult.finish(); &#125; &#125;&#125; 3ã€å¹¿æ’­çš„é€šä¿¡åŸç†å¹¿æ’­ä¸­é€šä¿¡ä¸Servceä¸­çš„é€šä¿¡åŸç†éƒ½æ˜¯ä½¿ç”¨IBinderæœºåˆ¶å®ç°çš„ã€‚è¿™é‡Œä¸åœ¨è¿‡åº¦å±•å¼€ï¼Œä¼šå¦èµ·ç¯‡ç« æ¥æ·±åº¦è®¨è®ºIBinderæœºåˆ¶ å‚è€ƒï¼š [1]ã€Android Broadcasts [2]ã€Android Permission","categories":[{"name":"Android","slug":"Android","permalink":"https://tanjunze.github.io/categories/Android/"}],"tags":[{"name":"Android","slug":"Android","permalink":"https://tanjunze.github.io/tags/Android/"}]},{"title":"Android äº‹ä»¶åˆ†å‘","slug":"Android äº‹ä»¶åˆ†å‘","date":"2017-04-09T10:34:05.000Z","updated":"2019-02-26T03:16:48.814Z","comments":true,"path":"2017/04/09/Android äº‹ä»¶åˆ†å‘/","link":"","permalink":"https://tanjunze.github.io/2017/04/09/Android äº‹ä»¶åˆ†å‘/","excerpt":"","text":"Android äº‹ä»¶åˆ†å‘åœ¨æ¢³ç†Androidäº‹ä»¶åˆ†å‘ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆè¦ç†è§£ä»€ä¹ˆæ˜¯ äº‹ä»¶åˆ†å‘ï¼Œç†è§£äº‹ä»¶åˆ†å‘å¯¹æˆ‘ä»¬æœ‰å“ªäº›ä½œç”¨ã€‚é¦–å…ˆAndroid Viewæ˜¯æ ‘å½¢ç»“æ„çš„ï¼ŒViewå¯èƒ½ä¼šé‡å åœ¨ä¸€èµ·ï¼Œå½“æˆ‘ä»¬ç‚¹å‡»çš„åœ°æ–¹æœ‰å¤šä¸ªViewéƒ½å¯ä»¥å“åº”, Android ä¸­äº‹ä»¶åˆ†å‘æŒ‡çš„æ˜¯ ç‚¹å‡»äº‹ä»¶ ä»ç‚¹å‡»å¼€å§‹åˆ†å‘åˆ° äº‹ä»¶è¢«æ¶ˆè´¹å“åº”çš„ä¸€ç³»åˆ—è¿‡ç¨‹ï¼Œå½“ä¸­åŒ…æ‹¬ äº‹ä»¶çš„åˆ†å‘ï¼Œæ‹¦æˆªï¼Œæ¶ˆè´¹ç­‰è¿‡ç¨‹ã€‚æŒæ¡å¥½äº‹ä»¶åˆ†å‘çš„è¿‡ç¨‹å¯ä»¥åšå‡ºé…·ç‚«çš„äº¤äº’å’Œè§£å†³ä¸€äº›å¤æ‚çš„äº¤äº’å†²çªè¿‡ç¨‹å¦‚ åŒé‡æ»šåŠ¨åµŒå¥—ã€‚ View ä½“ç³»åœ¨ç†è§£ äº‹ä»¶åˆ†å‘ä¹‹å‰æˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹Viewçš„ä½“ç³»ã€‚ phoneWindowæ˜¯Android ä¸­ç‰¹æ®Šçš„windowï¼Œå®ƒç»§æ‰¿è‡ªwindowç±»è´Ÿè´£å…·ä½“æ‰€æœ‰è§†å›¾çš„å¤–è§‚å’Œè¡Œä¸ºã€‚ DecorViewæ˜¯windowçš„å…·ä½“è£…é¥°ï¼Œæ˜¯windowä¸­æœ€é¡¶å±‚çš„viewã€‚ RootViewæ˜¯ä¸€ä¸ªViewGorupç±»å‹ï¼Œä»…æ¬¡äº DecorView çš„viewã€‚ 1234567// æºç  phonwWindow.java ,çœç•¥éƒ¨åˆ†ä»£ç ã€‚public class PhoneWindow extends Window implements MenuBuilder.Callback &#123; private final static String TAG = \"PhoneWindow\"; // This is the top-level view of the window, containing the window decor. private DecorView mDecor; 1234567//æºç  DecorView.java ,çœç•¥éƒ¨åˆ†ä»£ç ã€‚public class DecorView extends FrameLayout implements RootViewSurfaceTaker, WindowCallbacks &#123; private static final String TAG = \"DecorView\"; private PhoneWindow mWindow; ViewGroup mContentRoot; åˆ°è¿™é‡Œè™½ç„¶æˆ‘ä»¬äº†è§£äº†phoneWindow,DecorView,RootViewï¼Œä½†æ˜¯äº‹ä»¶åˆ†å‘ä¸­æˆ‘ä»¬æ— æ³•æ“ä½œè¿™ä¸‰ä¸ªç±»ï¼Œä¸è¿‡ å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ›´å¥½çš„ç†è§£åˆ†å‘çš„è¿‡ç¨‹ã€‚ äº‹ä»¶åˆ†å‘ViewGroupï¼ŒViewæ˜¯æˆ‘ä»¬å¸¸ç”¨åˆ°çš„æ§ä»¶ï¼Œè¿™é‡Œä¸åœ¨è¿‡å¤šçš„æè¿°ï¼Œé‡ç‚¹å…³æ³¨ äº‹ä»¶åˆ†å‘ä¸­éœ€è¦ç”¨åˆ°çš„å…³é”®æ–¹æ³•ã€‚ ç±»å‹ ç›¸å…³æ–¹æ³• Activity ViewGroup View äº‹ä»¶åˆ†å‘ dispatchTouchEvent âˆš âˆš âˆš äº‹ä»¶æ‹¦æˆª onInterceptTouchEvent X âˆš X äº‹ä»¶æ¶ˆè´¹ onTouchEvent âˆš âˆš âˆš ç»“åˆViewä½“ç³»ï¼Œæˆ‘ä»¬å¯ä»¥äº†è§£äº‹ä»¶åˆ†å‘çš„åŸºæœ¬æµç¨‹ã€‚ 1Activity ï¼&gt; PhoneWindow ï¼&gt; DecorView ï¼&gt; ViewGroup ï¼&gt; ... ï¼&gt; View å½“äº‹ä»¶æ²¡æœ‰è¢«æ¶ˆè´¹æ˜¯ï¼Œå‘ä¸Šåé¦ˆã€‚ 1Activity &lt;ï¼ PhoneWindow &lt;ï¼ DecorView &lt;ï¼ ViewGroup &lt;ï¼ ... &lt;ï¼ View åˆ°è¿™é‡Œï¼Œäº‹ä»¶åˆ†å‘çš„åŸºæœ¬æµç¨‹å·²ç»å®Œã€‚æœ‰æ—¶é—´å†è¡¥ä¸€ä¸‹å®Œå–„ä¸€ç‚¹çš„äº‹ä»¶åˆ†å‘çš„æµç¨‹å§ã€‚ å‚è€ƒï¼š [1]ã€http://www.gcssloop.com/customview/dispatch-touchevent-source [2]ã€http://hukai.me/android-deeper-touch-event-dispatch-process/ [3]ã€ Android æºç  [4]ã€https://www.programering.com/a/MzMyYzMwATA.html [5]ã€https://juejin.im/entry/5a33399f6fb9a04517053e75","categories":[{"name":"Android","slug":"Android","permalink":"https://tanjunze.github.io/categories/Android/"}],"tags":[{"name":"Android","slug":"Android","permalink":"https://tanjunze.github.io/tags/Android/"}]},{"title":"React Native æ•´ç†","slug":"react nativeæ•´ç†","date":"2017-03-22T15:20:17.000Z","updated":"2018-12-28T07:31:24.551Z","comments":true,"path":"2017/03/22/react nativeæ•´ç†/","link":"","permalink":"https://tanjunze.github.io/2017/03/22/react nativeæ•´ç†/","excerpt":"","text":"æ–‡æ¡£react-native å®˜ç½‘ https://facebook.github.io/react-native/ react-native ä¸­æ–‡ https://reactnative.cn/ react-native-community https://github.com/react-native-community ReactNativeæŒ‡å— https://github.com/reactnativecn/react-native-guide å·¥å…·Expo https://expo.io/ react-native-code-push https://github.com/Microsoft/react-native-code-push UI æ¡†æ¶/ç»„ä»¶è½®æ’­ç»„ä»¶ https://github.com/leecade/react-native-swiper è·¨å¹³å°UI ç»„ä»¶NativeBase https://github.com/GeekyAnts/NativeBase è·¨å¹³å°UI ç»„ä»¶ReactNativeElements https://github.com/react-native-training/react-native-elements https://react-native-training.github.io/react-native-elements/ è·¨å¹³å°UI ç»„ä»¶Shoutem https://shoutem.github.io/docs/ui-toolkit/introduction è·¨å¹³å°UI ç»„ä»¶kitten https://github.com/akveo/react-native-ui-kitten https://akveo.github.io/react-native-ui-kitten/#/home è·¨å¹³å°UI ç»„ä»¶MaterialUI https://github.com/xotahal/react-native-material-ui å›¾æ ‡åº“VectorIcons https://github.com/oblador/react-native-vector-icons å›¾è¡¨ChartsWrapper https://github.com/wuxudong/react-native-charts-wrapper åŠ¨ç”»Lottie https://github.com/react-native-community/lottie-react-native Spinkit https://github.com/maxs15/react-native-spinkit SampleF8App https://github.com/fbsamples/f8app http://makeitopen.com/ Reading https://github.com/attentiveness/reading","categories":[{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"https://tanjunze.github.io/categories/å‰ç«¯/"}],"tags":[{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"https://tanjunze.github.io/tags/å‰ç«¯/"},{"name":"RN","slug":"RN","permalink":"https://tanjunze.github.io/tags/RN/"}]},{"title":"Marketdown è¯­æ³•","slug":"Markdownè¯­æ³•","date":"2016-08-12T19:01:34.000Z","updated":"2019-02-26T06:29:23.337Z","comments":true,"path":"2016/08/13/Markdownè¯­æ³•/","link":"","permalink":"https://tanjunze.github.io/2016/08/13/Markdownè¯­æ³•/","excerpt":"","text":"Markdownæ¦‚å†µMarkdown æ˜¯ç”± Daring Fireball åˆ›å»ºçš„è½»é‡çº§æ ‡è®°è¯­è¨€ æ®µè½å’Œæ¢è¡Œç¬¦æ®µè½ç”±å¤šä¸ªç©ºè¡Œåˆ†éš” æ ‡é¢˜æ ‡é¢˜åœ¨è¡Œçš„å¼€å¤´ä½¿ç”¨ 1-6 ä¸ª # å¯¹åº”æ ‡é¢˜1-6ä¸ªçº§åˆ«ï¼Œä¾‹å¦‚ï¼š 12345# ä¸€çº§æ ‡é¢˜ H1## äºŒçº§æ ‡é¢˜ H2###### å…­çº§æ ‡é¢˜ H6 å¦ä¸€ç§ä½¿ç”¨æ–¹å¼, åœ¨ä¸€è¡Œä¸­ä½¿ç”¨å¤šä¸ªè¿ç»­çš„ #è¡¨ç¤º ä¸€çº§æ ‡é¢˜ ï¼Œä½¿ç”¨è¿ç»­çš„-è¡¨ç¤º äºŒçº§æ ‡é¢˜ã€‚ä¾‹å¦‚ï¼š 12ä¸€çº§æ ‡é¢˜=============== 12äºŒçº§æ ‡é¢˜--------------- åˆ†å‰²çº¿ä½¿ç”¨ *** æˆ– --- è¡¨ç¤ºåˆ†å‰²çº¿ï¼Œä¾‹å¦‚ï¼š 1---- æ˜¾ç¤ºå¦‚ä¸‹ï¼š å¼•ç”¨ ä½¿ç”¨ &gt; è¡¨ç¤ºå¼•ç”¨ã€‚ 123&gt; å¼•ç”¨1&gt; å¼•ç”¨2 åˆ—è¡¨ä½¿ç”¨ * è¡¨ç¤ºæ— åºåˆ—è¡¨ï¼Œæˆ–è€…ä½¿ç”¨ + æˆ– - æ›¿ä»£ã€‚ ä½¿ç”¨æ•°å­—å¦‚1. è¡¨ç¤ºæœ‰åºåˆ—è¡¨ã€‚ä¾‹å¦‚ï¼š 123456789## æ— åºåˆ—è¡¨* Red* Green* Blue## æœ‰åºåˆ—è¡¨1. Red2. Green3. Blue ä»»åŠ¡åˆ—è¡¨ä»»åŠ¡åˆ—è¡¨ä½¿ç”¨- [ ] æˆ–- [x] è¡¨ç¤ºä»»åŠ¡çš„æœªå®Œæˆ æˆ– å®Œæˆ çŠ¶æ€ã€‚ ä¾‹å¦‚ï¼š 12- [ ] æœªå®Œæˆ ä»»åŠ¡é€‰é¡¹- [x] å®Œæˆ ä»»åŠ¡é€‰é¡¹ ä»£ç å—ä½¿ç”¨ ä¸€å¯¹ ` è¡¨ç¤ºå•è¡Œä»£ç ï¼Œä½¿ç”¨ä¸€å¯¹ å¤šè¡Œä»£ç ã€‚ ä¾‹å¦‚ï¼š123456~~~ gfmå•è¡Œä»£ç ç¤ºä¾‹ï¼šmy function name is ` test() `å¤šè¡Œä»£ç ç¤ºä¾‹ï¼š function test() { console.log(â€œnotice the blank line before this function?â€);}123456ä»£ç é«˜äº®ï¼ˆä»£ç ç±»å‹ï¼‰:```rubyrequire &apos;redcarpet&apos;markdown = Redcarpet.new(&quot;Hello World!&quot;)puts markdown.to_html ~~~ å¦‚æœéœ€è¦åœ¨ä»£ç ä¸­ä½¿ç”¨å•å¼•å·ï¼Œéœ€è¦ä½¿ç”¨æ¥è§„é¿ï¼Œä¾‹å¦‚ï¼š 1``è¿™ä¸ª `ä»£ç ` æ˜¯é”™è¯¯çš„`` æ˜¾ç¤ºå¦‚ä¸‹ï¼š è¿™ä¸ª `ä»£ç ` æ˜¯é”™è¯¯çš„ è¡¨æ ¼ç¤ºä¾‹: 123| æ ‡é¢˜1 | æ ‡é¢˜1 || ----- | ----- || å†…å®¹1 | å†…å®¹2 | åœ¨æ ‡é¢˜å’Œå†…å®¹é—´çš„â€”â€” æ·»åŠ  : è¡¨ç¤ºå¯¹é½æ–¹å¼ï¼Œå¦‚:----- å·¦å¯¹é½ã€:-----:å±…ä¸­å¯¹é½ï¼Œ-----:å³å¯¹é½ï¼Œä¾‹å¦‚ï¼š 12345| å·¦å¯¹é½ | å±…ä¸­å¯¹é½ | å³å¯¹é½ || :----- |:-----:| -----:|| col 3 is | some wordy text | $1600 || col 2 is | centered | $12 || zebra stripes | are neat | $1 | é“¾æ¥ä½¿ç”¨[]()ç»„æˆã€‚ä¾‹å¦‚ï¼š 1[ç¤ºä¾‹ç½‘å€](http://example.com/) æ˜¾ç¤ºå¦‚ä¸‹ï¼š ç¤ºä¾‹ç½‘å€ å›¾ç‰‡ä½¿ç”¨![]()ç»„æˆã€‚ä¾‹å¦‚ï¼š 1234# å›¾ç‰‡ç›¸å¯¹è·¯å¾„![æœ¬åœ°å›¾ç‰‡](/path/img.png)# å›¾ç‰‡http è·¯å¾„![ç½‘ç»œå›¾ç‰‡](https://d33wubrfki0l68.cloudfront.net/e7ed9fe4bafe46e275c807d63591f85f9ab246ba/e2d28/assets/images/tux.png) æ–œä½“ä½¿ç”¨ å•ä¸ª* æˆ–å•ä¸ª (_) è¡¨ç¤ºæ–œä½“ï¼Œä¾‹å¦‚ï¼š 1*æ–œä½“1* æ˜¾ç¤ºå¦‚ä¸‹ï¼š æ–œä½“1 ç²—ä½“ä½¿ç”¨ä¸€å¯¹**è¡¨ç¤ºç²—ä½“ï¼Œä¾‹å¦‚ï¼š 1**ç²—ä½“** ç²—ä½“ åˆ é™¤çº¿ä½¿ç”¨ä¸€å¯¹~~ è¡¨ç¤ºåˆ é™¤çº¿ï¼ˆéæ ‡å‡†è¯­æ³•ï¼ŒGFMä¸­ä½¿ç”¨ï¼‰ 1~~ä¸è¦äº†~~ æ˜¾ç¤ºå¦‚ä¸‹ï¼š ä¸è¦äº† ä¸‹åˆ’çº¿å¯ä»¥ä½¿ç”¨htmlæ ‡ç­¾&lt;u&gt; &lt;/u&gt;è¡¨ç¤ºï¼Œä¾‹å¦‚ï¼š 1&lt;u&gt; ä¸‹åˆ’çº¿ &lt;/u&gt; æ˜¾ç¤ºå¦‚ä¸‹ï¼š ä¸‹åˆ’çº¿ ä¸‹æ ‡ä½¿ç”¨ ~è¡¨ç¤ºä¸‹æ ‡ï¼Œ ä¾‹å¦‚: 1H~2~O X~long\\ text~ æ˜¾ç¤ºå¦‚ä¸‹ï¼š H~2~O X~long\\ text~ ä¸Šæ ‡ä½¿ç”¨ ^ è¡¨ç¤ºä¸Šæ ‡, ä¾‹å¦‚: 1X^2^ æ˜¾ç¤ºå¦‚ä¸‹ï¼š X^2^ é«˜äº®ä½¿ç”¨ == è¡¨ç¤ºé«˜äº®ï¼Œ ä¾‹å¦‚: 1==é«˜äº®æ–‡å­—== æ˜¾ç¤ºå¦‚ä¸‹ï¼š ==é«˜äº®æ–‡å­—== Html ç‰‡æ®µä¾‹å¦‚ ï¼š1&lt;span style=&quot;color:red&quot;&gt;çº¢è‰²æ–‡å­—&lt;/span&gt; æ˜¾ç¤ºå¦‚ä¸‹ï¼š çº¢è‰²æ–‡å­— åä¹‰ä½¿ç”¨\\ åä¹‰ markdownä¸­çš„å…³é”®å­—ï¼Œä¾‹å¦‚ï¼š 1\\* å¦‚æœæ²¡æœ‰åæ–œæ ,è¿™å°†æ˜¯æ— åºåˆ—è¡¨ æ˜¾ç¤ºå¦‚ä¸‹ï¼š * å¦‚æœæ²¡æœ‰åæ–œæ ,è¿™å°†æ˜¯æ— åºåˆ—è¡¨ å¯ä»¥ä½¿ç”¨åä¹‰çš„å…³é”®å­— å­—ç¬¦ åç§° \\ åæ–œçº¿ ` åˆ»åº¦çº¿ * æ˜Ÿå· _ ä¸‹åˆ’çº¿ {} å¤§æ‹¬å· [] æ‹¬å· () æ‹¬å¼§ # è‹±é•‘ç¬¦å· + åŠ å· - å‡å·ï¼ˆè¿å­—ç¬¦ï¼‰ . ç‚¹ ! æ„Ÿå¹å· å‚è€ƒç½‘å€ï¼š [1]ã€markdownguide","categories":[{"name":"Marketdown","slug":"Marketdown","permalink":"https://tanjunze.github.io/categories/Marketdown/"}],"tags":[{"name":"Marketdown","slug":"Marketdown","permalink":"https://tanjunze.github.io/tags/Marketdown/"}]}]}